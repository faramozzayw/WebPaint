(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(51)},36:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(15),i=a.n(r),c=a(25),l=a(2),s=a(1),u=a(3),m=a(4),d=a(6),k=a(5),f=a(7),p=(a(36),a(10)),g=a.n(p),h=function(e){return{type:"CHANGE_COLOR",payload:e}},b=function(e){return{type:"CHANGE_THICKNESS",payload:e}},v=Object(s.b)(function(e){return{thickness:e.penProperty.thickness}},function(e){return Object(l.bindActionCreators)({changeThickness:b},e)})(function(e){var t=e.changeThickness;return o.a.createElement("div",null,o.a.createElement("label",{className:"thickness"},"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0448\u0440\u0438\u0444\u0442\u0430:",o.a.createElement("select",{className:"uk-select",onChange:function(e){return t(e.target.value)}},o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"8"},"8"),o.a.createElement("option",{value:"16"},"16"),o.a.createElement("option",{value:"32"},"32"),o.a.createElement("option",{value:"64"},"64"))))}),E=Object(s.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(l.bindActionCreators)({changeColor:h},e)})(function(e){var t=e.changeColor;return o.a.createElement("div",{className:"uk-flex uk-flex-column"},o.a.createElement("label",{htmlFor:"colorPicker"},"\u0426\u0432\u0435\u0442:"),o.a.createElement("input",{type:"color",id:"colorPicker",onChange:function(e){return t(e.target.value)}}))}),y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(){var e=a.props.ctx;e.rect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#ffffff",e.fill()},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u043b\u0441\u0442",id:"clearButton",className:"uk-icon-link uk-icon-button trash icon",onClick:this.handleClick}))}}]),t}(n.Component),x=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},null)(y),N=a(13),w=a.n(N),O=a(14),S=function(e){return{type:"SET_CONTEXT",payload:e}},C=function(e){return{type:"CHANGE_PEN_TYPE",payload:e}},j=function(e){return{type:"CHANGE_IS_SELECTING",payload:e}},I=function(e){return{type:"RESET_CANVAS",payload:e}},D=function(){return{type:"RESET_SELECT_OBJECT"}},A=function(e){return{type:"UPDATE_SELECTED_OBJECT",payload:e}},M=function(){function e(t,a){if(Object(u.a)(this,e),Array.isArray(t)||Array.isArray(a))return console.log(new TypeError("Bad args, x or y is array, x: "+t+" y: "+a)),new Error("Bad args === bad vector2");var n=[Number(t),Number(a)],o=n[0],r=n[1];if(!Number.isFinite(o)||!Number.isFinite(r))return console.log(new TypeError("Bad args, x or y isn't finite, x: "+t+" y: "+a)),new Error("Bad args === bad vector2");this.x=t,this.y=a}return Object(m.a)(e,null,[{key:"getBoxSize",value:function(e,t){return{width:t.x-e.x,height:t.y-e.y}}}]),e}(),T=function(e,t,a,n){for(var o,r,i,c=[e.width,e.height],l=c[0],s=c[1],u=0,m=[[a.x,a.y]];m.length>0;)if(!((o=m.pop())[0]<0||o[0]>=l)&&!(o[1]<0||o[1]>=s)){u=(i=(r=4*o[1]*l+4*o[0])+1)+1;var d={r:e.data[r],g:e.data[i],b:e.data[u]};d.r===t.r&&d.g===t.g&&d.b===t.b||d.r!==n.r||d.g!==n.g||d.b!==n.b||(e.data[r]=t.r,e.data[i]=t.g,e.data[u]=t.b,m.push([o[0]-1,o[1]]),m.push([o[0]+1,o[1]]),m.push([o[0],o[1]-1]),m.push([o[0],o[1]+1]))}return e},L=function(e){return 0!==Object.entries(e).length||e.constructor!==Object},_=a(9),R=a.n(_),P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).link=o.a.createRef(),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"downloadCanvasAsImg",value:function(){var e=Object(O.a)(w.a.mark(function e(t){var a,n,o,r,i,c,l,s,u,m,d;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.isSelecting,o=a.resetSelectedObject,r=a.resetCanvasActions,i=a.selectedObject,c=this.link.current,n){e.next=6;break}c.href=document.querySelector("#draw").toDataURL("image/png"),e.next=22;break;case 6:if(!n||!L(i)){e.next=22;break}return l=this.props.ctx,e.next=10,r(!0);case 10:return s=document.createElement("canvas"),u=s.getContext("2d"),m=M.getBoxSize(i.startVector,i.endVector),s.width=Math.abs(m.width),s.height=Math.abs(m.height),e.next=17,l.getImageData(i.startVector.x,i.startVector.y,m.width,m.height);case 17:d=e.sent,u.putImageData(d,0,0),c.href=s.toDataURL("image/png"),o(),s.remove();case 22:c.download="canvasImage.png",R.a.notification({message:"".concat(n?"\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e":"\u0425\u043e\u043b\u0441\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e"),pos:"bottom-right",timeout:2500});case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("a",{"uk-tooltip":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0445\u043e\u043b\u0441\u0442",href:"canvasDownload",ref:this.link,id:"saveButton",className:"uk-icon-link uk-icon-button download icon",onClick:this.downloadCanvasAsImg.bind(this)}," "))}}]),t}(n.Component),B=Object(s.b)(function(e){return{ctx:e.canvasState.ctx,isSelecting:e.canvasState.isSelecting,selectedObject:e.canvasState.selectedObject}},function(e){return Object(l.bindActionCreators)({resetCanvasActions:I,resetSelectedObject:D},e)})(P),X="pencil",Y="pipette",H="eraser",F="paint-bucket",U="none",W=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(l.bindActionCreators)({changePenType:C},e)})(function(e){var t=e.changePenType;return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u041f\u0438\u043f\u0435\u0442\u043a\u0430",className:"uk-icon uk-icon-button uk-icon-image pipette icon",onClick:function(){return t(Y)}}))}),V=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(l.bindActionCreators)({changePenType:C},e)})(function(e){var t=e.changePenType;return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u0420\u0443\u0447\u043a\u0430",className:"uk-icon uk-icon-button pencil icon",onClick:function(){return t(X)}}))}),z=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(l.bindActionCreators)({changePenType:C},e)})(function(e){var t=e.changePenType;return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u041b\u0430\u0441\u0442\u0438\u043a",className:"uk-icon uk-icon-button uk-icon-image eraser icon",onClick:function(){return t(H)}}))}),G=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"uploadImgAsCanvas",value:function(){var e=Object(O.a)(w.a.mark(function e(t){var a,n,o,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),!(window.File||window.FileReader||window.FileList||window.Blob)){e.next=14;break}if(!window.confirm("\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u043e\u0442\u043e \u0445\u043e\u043b\u0441\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0447\u0438\u0449\u0435\u043d, \u0432\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")){e.next=12;break}return(a=this.props.ctx).rect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#ffffff",e.next=8,a.fill();case 8:n=[t.target.files[0],new FileReader],o=n[0],(r=n[1]).onload=function(e){var t=[e.target.result,new Image],n=t[0],o=t[1];o.onload=function(){o.height<=window.innerHeight&&o.width<=window.innerWidth?a.drawImage(o,0,0):o.height>window.innerHeight?a.drawImage(o,0,0,o.width,window.innerHeight):o.width>window.innerWidth&&a.drawImage(o,0,0,window.innerWidth,o.height)},o.src=n,R.a.notification({message:"\u0424\u0430\u0439\u043b \u0431\u044b\u043b \u0443\u0434\u0430\u0447\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d",pos:"bottom-right",timeout:2e3})},r.onerror=function(e){console.log("Error loading file. Code: ".concat(e.target.error.code)),R.a.notification({message:"\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430.",pos:"bottom-right",timeout:2e3})},r.readAsDataURL(o);case 12:e.next=15;break;case 14:alert("\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u044d\u0442\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u044e :(");case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("label",{"uk-tooltip":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e",htmlFor:"uploadButton",className:"uk-icon-link uk-icon-button upload icon"}),o.a.createElement("input",{type:"file",id:"uploadButton",className:"uk-hidden",onChange:this.uploadImgAsCanvas.bind(this)}))}}]),t}(n.Component),q=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},null)(G),J=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(l.bindActionCreators)({changePenType:C},e)})(function(e){var t=e.changePenType;return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u0417\u0430\u043b\u0438\u0432\u043a\u0430 \u0446\u0432\u0435\u0442\u043e\u043c",className:"uk-icon uk-icon-button paint-bucket icon",onClick:function(){return t(F)}}))}),$=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(){var e=a.props,t=e.changeIsSelecting,n=e.isSelecting,o=e.resetCanvasActions;t(!0),n&&o(!0)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u0438",className:"uk-icon uk-icon-button uk-icon-image selection icon",onClick:this.handleClick}))}}]),t}(n.Component),K=Object(s.b)(function(e){return{color:e.penProperty.color,isSelecting:e.canvasState.isSelecting}},function(e){return Object(l.bindActionCreators)({changeIsSelecting:j,resetCanvasActions:I},e)})($),Q=function(){return{type:"ENABLE_MODAL"}},Z=function(){return{type:"DISABLE_MODAL"}},ee=function(){return{type:"RE_RENDER_MODAL"}},te=a(17),ae=a.n(te),ne=function(e,t){var a=/Date: (\d+)(?=Size)/g,n=e.keys().next().value,o=t.keys().next().value,r=Number.parseInt(n.match(a)[0].replace(/Date: (.*)/,"$1"),10);return Number.parseInt(o.match(a)[0].replace(/Date: (.*)/,"$1"),10)-r},oe=function(e,t){var a=/Date: (\d+)(?=Size)/g,n=e.keys().next().value,o=t.keys().next().value;return Number.parseInt(n.match(a)[0].replace(/Date: (.*)/,"$1"),10)-Number.parseInt(o.match(a)[0].replace(/Date: (.*)/,"$1"),10)},re=function(){for(var e=[],t=0;t<localStorage.length;t++){var a=new Map,n=localStorage.key(t);if(/^Name:.*Date: \d+/.test(n)){var o=localStorage.getItem(n);a.set(n,o),e.push(a)}}return e},ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={showEditForm:!1},a.editInput=o.a.createRef(),a.image=o.a.createRef(),a.onCanvas=function(){var e=a.props,t=e.ctx,n=e.disableModal;t.drawImage(a.image.current,0,0),n()},a.finishEditName=function(e){var t=a.props,n=t.stringKey,o=t.reRenderModal,r=localStorage.getItem(n);localStorage.removeItem(n);n=n.replace(/Name: .*?(?=Date)/g,"Name: ".concat(a.editInput.current.value)),localStorage.setItem(n,r),a.setState({showEditForm:!1},o)},a.deleteImg=function(e){var t=a.props,n=t.stringKey,o=t.reRenderModal;localStorage.removeItem(n),o()},a.headerClick=function(e){a.setState(function(e){return{showEditForm:!e.showEditForm}})},a.disableEditForm=function(){return a.setState({showEditForm:!1})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stringKey,a=e.imgData,n=this.state.showEditForm,r=function(e){var t=e.match(/Name: (.*?)(?=Date)/g)[0].replace(/Name: (.*)/,"$1"),a=Number.parseInt(e.match(/Date: (\d+)/g)[0].replace(/Date: (.*)/,"$1"),10),n=/Size: (.*)$/g;return{name:t,date:a=(a=String(new Date(a))).match(/^.*(?= GMT)/g)[0],size:e.match(n)[0].replace(n,"$1")}}(t),i=n?"":"uk-hidden";return o.a.createElement("div",{className:"uk-margin-bottom uk-margin-left uk-card uk-width-medium uk-card-default uk-flex uk-flex-column uk-flex-between"},o.a.createElement("div",{className:"uk-flex uk-flex-column uk-flex-between uk-flex-1"},o.a.createElement("div",{className:"uk-card-media-top uk-card-header"},o.a.createElement("img",{className:"image-border",src:a,alt:"",ref:this.image})),o.a.createElement("div",{className:"uk-card-body padding"},o.a.createElement("h4",{className:"uk-card-title uk-heading-bullet",onClick:this.headerClick},r.name),o.a.createElement("div",{id:"editBox",className:"".concat(i," uk-margin-small-bottom")},o.a.createElement("input",{className:"uk-input uk-form-width-small uk-form-small",type:"text",defaultValue:r.name,ref:this.editInput}),o.a.createElement("div",{className:"uk-button-group"},o.a.createElement("span",{className:"uk-icon uk-margin-small-left uk-icon-button icon check",onClick:this.finishEditName}),o.a.createElement("span",{className:"uk-icon uk-margin-small-left uk-icon-button icon close",onClick:this.disableEditForm}))),o.a.createElement("span",null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430: ",o.a.createElement("br",null),r.date),o.a.createElement("br",null),o.a.createElement("span",null,"\u0420\u0430\u0437\u043c\u0435\u0440\u044b: ",r.size))),o.a.createElement("div",{className:"uk-button-group image-button-group uk-width-1-1 uk-child-width-1-2@m uk-child-width-1-1"},o.a.createElement("button",{className:"uk-button uk-button-primary",onClick:this.onCanvas},"\u041d\u0430 \u0445\u043e\u043b\u0441\u0442"),o.a.createElement("button",{className:"uk-button uk-button-danger",onClick:this.deleteImg},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}}]),t}(n.PureComponent),ce=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(l.bindActionCreators)({reRenderModal:ee,disableModal:Z},e)})(ie),le=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={sortBy:"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"},a.clearHandle=function(){window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0412\u0421\u0415 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f?")&&(0!==localStorage.length?(localStorage.clear(),R.a.notification({message:"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0431\u044b\u043b\u043e \u043e\u0447\u0438\u0449\u0435\u043d\u043e.",pos:"bottom-right",timeout:2500}),a.forceUpdate()):R.a.notification({message:"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u043f\u0443\u0441\u0442\u043e\u0435!",pos:"bottom-right",timeout:2500}))},a.handleChange=function(e){return a.setState({sortBy:e.target.value})},a.autosaveControlClick=function(){var e="autosaveEnable",t=g.a.getItem(e);null!==t&&(g.a.setItem(e,(!JSON.parse(t)).toString()),a.forceUpdate())},a.downloadAllImg=function(){var e=re();if(0===e.length)R.a.notification({message:"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u043f\u0443\u0441\u0442\u043e\u0435!",pos:"bottom-right",timeout:2500});else{var t=document.createElement("a");document.body.appendChild(t);var a=/Name: .*?(?=Date)/g,n=!0,o=!1,r=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value,s=l.keys().next().value.match(a)[0];s=s.replace(/Name: (.*)/,"$1"),t.download="".concat(s,".png"),t.href=l.values().next().value,t.click()}}catch(u){o=!0,r=u}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}document.body.removeChild(t)}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=re(),t=this.state.sortBy,a=this.props.disableModal;"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"===t?e=e.sort(ne):"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c)"===t&&(e=e.sort(oe));var n=e.map(function(e){return o.a.createElement(ce,{key:Math.floor(1e8*Math.random()),stringKey:e.keys().next().value,imgData:e.values().next().value})}),r=JSON.parse(g.a.getItem("autosaveEnable"));return o.a.createElement("div",{className:"uk-flex uk-flex-column uk-flex-between uk-height-1-1"},o.a.createElement("div",null,o.a.createElement("h2",{className:"uk-heading-line uk-text-center"},o.a.createElement("span",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")),o.a.createElement("h4",null,"\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e ",localStorage.length," ","".concat(1===localStorage.length?"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435":"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439"),"."),o.a.createElement("div",null,o.a.createElement("form",null,o.a.createElement("fieldset",{className:"uk-fieldset"},o.a.createElement("legend",{className:"uk-legend"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c: "),o.a.createElement("div",{className:"uk-margin"},o.a.createElement("select",{className:"uk-select uk-width-medium",onChange:this.handleChange,value:this.state.sortBy},o.a.createElement("option",{value:"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"},"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"),o.a.createElement("option",{value:"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c)"},"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c)"))))))),o.a.createElement("div",{className:"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch uk-flex-top"},n),o.a.createElement("div",{className:"uk-flex uk-flex-around uk-button-group uk-flex-wrap"},o.a.createElement("button",{onClick:this.downloadAllImg,className:"uk-button uk-margin-auto uk-margin-bottom uk-button-default uk-width-1-1@s uk-width-1-4@m"},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0432\u0441\u0451"),o.a.createElement("button",{onClick:this.autosaveControlClick,className:"uk-button uk-margin-auto uk-margin-bottom uk-button-secondary uk-width-1-1@s uk-width-1-4@m"},"".concat(r?"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c":"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"," \u0430\u0432\u0442\u043e\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435")),o.a.createElement("button",{onClick:this.clearHandle,className:"uk-button uk-margin-auto uk-margin-bottom uk-button-danger uk-width-1-1@s uk-width-1-4@m"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0451"),o.a.createElement("button",{onClick:function(){return a()},className:"uk-button uk-margin-auto uk-margin-bottom uk-button-primary uk-width-1-1@s uk-width-1-4@m"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}}]),t}(n.Component),se=Object(s.b)(function(e){return{isOpen:e.modalStorage.isOpen,reRender:e.modalStorage.reRender}},function(e){return Object(l.bindActionCreators)({enableModal:Q,disableModal:Z},e)})(le),ue=Object(s.b)(function(e){return{isOpen:e.modalStorage.isOpen}},function(e){return Object(l.bindActionCreators)({enableModal:Q},e)})(function(e){var t=e.isOpen,a=e.enableModal;return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435",className:"uk-icon uk-icon-button storage icon",onClick:function(){return document.querySelector(".cursor").style.display="none",void a()}}),o.a.createElement(ae.a,{isOpen:t,ariaHideApp:!1,contentLabel:"Show storage Modal"},o.a.createElement(se,null)))}),me=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(){var e=Object(O.a)(w.a.mark(function e(){var t,a,n,o,r,i,c,l,s,u,m,d,k,f,p;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.ctx,n=t.isSelecting,r="Name: \u0420\u0438\u0441\u0443\u043d\u043e\u043a \u2116".concat(localStorage.length+1),i="Date: ".concat(Date.now()),n){e.next=8;break}l="Size: ".concat(a.canvas.width," x ").concat(a.canvas.height),o=a.canvas.toDataURL("image/png"),e.next=23;break;case 8:return s=this.props,u=s.selectedObject,m=s.resetCanvasActions,e.next=11,m(!0);case 11:return d=document.createElement("canvas"),k=d.getContext("2d"),f=M.getBoxSize(u.startVector,u.endVector),l="Size: ".concat(Math.abs(f.width)," x ").concat(Math.abs(f.height)),d.width=Math.abs(f.width),d.height=Math.abs(f.height),e.next=19,a.getImageData(u.startVector.x,u.startVector.y,f.width,f.height);case 19:p=e.sent,k.putImageData(p,0,0),o=d.toDataURL("image/png"),d.remove();case 23:c=r+i+l;try{localStorage.setItem("".concat(c),o),R.a.notification({message:"".concat(n?"\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435.":"\u0425\u043e\u043b\u0441\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435."),pos:"bottom-right",timeout:2500})}catch(g){console.log("Storage failed:",g)}case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435",className:"uk-icon uk-icon-button cloud-upload icon",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),de=Object(s.b)(function(e){return{ctx:e.canvasState.ctx,isSelecting:e.canvasState.isSelecting,selectedObject:e.canvasState.selectedObject}},function(e){return Object(l.bindActionCreators)({resetCanvasActions:I},e)})(me),ke=function(){return{type:"ENABLE_INFO_MODAL"}},fe=function(){return{type:"DISABLE_INFO_MODAL"}},pe=Object(s.b)(function(e){return{isOpen:e.infoModal.isOpen}},function(e){return Object(l.bindActionCreators)({disableInfoModal:fe},e)})(function(e){var t=e.disableInfoModal;return o.a.createElement("div",{id:"info-box"},o.a.createElement("div",{className:"uk-margin-medium-bottom"},o.a.createElement("h1",{className:"uk-heading-divider uk-flex uk-flex-between uk-margin-small-left uk-margin-small-right"},"\u041a\u0440\u0430\u0442\u043a\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430:",o.a.createElement("span",{className:"uk-icon uk-margin-left uk-icon-button close icon uk-overlay","uk-overlay-icon":"true",onClick:function(){return t()}}))),o.a.createElement("ul",null,o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle pencil icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle "},"\u0420\u0443\u0447\u043a\u0430. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0440\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043b\u0438\u043d\u0438\u0438")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle pipette icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u041f\u0438\u043f\u0435\u0442\u043a\u0430. \u0414\u0430\u0451\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0446\u0432\u0435\u0442 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0435 \u0445\u043e\u043b\u0441\u0442\u0430")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle eraser icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u041b\u0430\u0441\u0442\u0438\u043a. \u041b\u0430\u0441\u0442\u0438\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0433\u043e \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle paint-bucket icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0417\u0430\u043b\u0438\u0432\u043a\u0430. \u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0438")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle selection icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435. \u0412\u044b\u0434\u0435\u043b\u0438\u0432 \u0447\u0430\u0441\u0442\u044c \u0445\u043e\u043b\u0441\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0435\u0451 \u043b\u0438\u0431\u043e \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440, \u043b\u0438\u0431\u043e \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle trash icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u041e\u0447\u0438\u0449\u0430\u0435\u0442 \u0445\u043e\u043b\u0441\u0442")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle download icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435. \u0421\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u0442 \u043b\u0438\u0431\u043e \u0445\u043e\u043b\u0441\u0442, \u043b\u0438\u0431\u043e \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442 \u0445\u043e\u043b\u0441\u0442\u0430, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c ",o.a.createElement("i",null,"\u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435"))),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle upload icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435(",o.a.createElement("span",{className:"uk-text-warning"},"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u0436\u0430\u0442\u043e, \u0435\u0441\u043b\u0438 \u0435\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0431\u0443\u0434\u0443\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432 \u0445\u043e\u043b\u0441\u0442\u0430"),")")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle cloud-upload icon"}),o.a.createElement("span",{className:"info-text uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435. \u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043b\u0438\u0431\u043e \u0445\u043e\u043b\u0441\u0442, \u043b\u0438\u0431\u043e \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442 \u0445\u043e\u043b\u0441\u0442\u0430, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c ",o.a.createElement("i",null,"\u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435")," \u0432 \u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle storage icon"}),o.a.createElement("span",{className:"uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435. \u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u043e\u043a\u043d\u043e, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom info-li"},o.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image uk-text-middle info icon"}),o.a.createElement("span",{className:"uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0421\u043f\u0440\u0430\u0432\u043a\u0430. \u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u043e\u043a\u043d\u043e \u0441 \u043a\u0440\u0430\u0442\u043a\u043e\u0439 \u0441\u043f\u0440\u0430\u0432\u043a\u043e\u0439")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom"},o.a.createElement("h3",null,"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435")),o.a.createElement("li",{className:"uk-flex uk-flex-auto uk-margin-small-bottom"},o.a.createElement("span",{className:"uk-margin-small-left uk-margin-small-top uk-text-middle"},"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 - \u043c\u0435\u0441\u0442\u043e, \u043a\u0443\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0431\u0435\u0437 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u0438\u0445 \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043c\u0435\u0441\u0442\u043e, \u043a\u0443\u0434\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438/\u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0438 \u0432\u043a\u043b\u0430\u0434\u043a\u0438. \u041c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0438\u0445, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c/\u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438/\u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0438 \u0432\u043a\u043b\u0430\u0434\u043a\u0438(\u0435\u0441\u043b\u0438 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0430\u0432\u0442\u043e\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435). \u0418\u043c\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043b\u0438\u043a\u043d\u0443\u0432 \u043d\u0430 \u043d\u0435\u0433\u043e"))))}),ge=Object(s.b)(function(e){return{isOpen:e.infoModal.isOpen}},function(e){return Object(l.bindActionCreators)({enableInfoModal:ke},e)})(function(e){var t=e.isOpen,a=e.enableInfoModal;return o.a.createElement("div",{className:"uk-margin-small-top"},o.a.createElement("span",{"uk-tooltip":"\u041f\u043e\u043c\u043e\u0449\u044c",className:"uk-icon uk-icon-button info icon",onClick:function(){return document.querySelector(".cursor").style.display="none",void a()}}),o.a.createElement(ae.a,{isOpen:t,ariaHideApp:!1,contentLabel:"Storage Modal"},o.a.createElement(pe,null)))}),he=Object(s.b)(function(e){return{penType:e.canvasState.penType,isSelecting:e.canvasState.isSelecting}},null)(function(e){var t=e.penType,a=e.isSelecting;return o.a.createElement("div",null,o.a.createElement("nav",{className:"uk-navbar-container uk-flex uk-flex-center","uk-navbar":"true"},o.a.createElement("div",{className:"uk-navbar-left"},o.a.createElement("ul",{className:"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel"},o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle"},o.a.createElement(E,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right"},o.a.createElement(v,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("pencil"===t&&"active")},o.a.createElement(V,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("pipette"===t&&"active")},o.a.createElement(W,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("eraser"===t&&"active")},o.a.createElement(z,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("paint-bucket"===t&&"active")},o.a.createElement(J,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat(a&&"active")},o.a.createElement(K,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right"},o.a.createElement(x,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},o.a.createElement(B,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},o.a.createElement(q,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},o.a.createElement(de,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left  uk-margin-medium-right"},o.a.createElement(ue,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},o.a.createElement(ge,null))))))}),be=Object(s.b)(function(e){return{penType:e.canvasState.penType,infoModal:e.infoModal.isOpen,modalStorage:e.modalStorage.isOpen}},null)(function(e){var t=e.penType,a=e.infoModal,n=e.modalStorage;return o.a.createElement("div",null,o.a.createElement("button",{className:"uk-button uk-button-primary uk-width-1-1 panel-mobile border-x-none",type:"button","uk-toggle":"target: #offcanvas-nav-default"},"\u041c\u0435\u043d\u044e"),o.a.createElement("div",{id:"offcanvas-nav-default","uk-offcanvas":"".concat(a||n?"overlay: false":"overlay: true")},o.a.createElement("div",{className:"uk-offcanvas-bar uk-flex uk-flex-column"},o.a.createElement("ul",{className:"uk-nav uk-nav-default uk-nav-center"},o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(E,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(v,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom ".concat("pencil"===t&&"mobile-active")},o.a.createElement(V,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom ".concat("pipette"===t&&"mobile-active")},o.a.createElement(W,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom ".concat("eraser"===t&&"mobile-active")},o.a.createElement(z,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom ".concat("paint-bucket"===t&&"mobile-active")},o.a.createElement(J,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(x,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(B,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(q,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(de,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(ue,null)),o.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom"},o.a.createElement(ge,null))))))}),ve=function(e){return{r:Number.parseInt(e.slice(1,3),16),g:Number.parseInt(e.slice(3,5),16),b:Number.parseInt(e.slice(5,7),16)}},Ee=function(e){var t=e.match(/(\d+)/g);return"#"+(t=(t=t.filter(function(e,t){return 3!==t})).map(function(e){var t=Number.parseInt(e,10).toString(16);return 1!==t.length?t:"0"+t})).join("")},ye=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={mobile:!1,isDrawing:!1,lastX:0,lastY:0,selectStartX:void 0,selectStartY:void 0,beforeImageData:void 0,selectStart:!1},a.canvas=o.a.createRef(),a.getCanvas=function(){return a.canvas.current},a.getCanvasContext=function(){return a.getCanvas().getContext("2d")},a.getCursor=function(){return document.querySelector(".cursor")},a.cursor=function(e){var t=a.getCursor(),n=a.props,o=n.penType,r=n.thickness,i=n.color,c=t.style;o!==U?(c.display="block",c.width="".concat(r+5,"px"),c.height="".concat(r+5,"px"),c.top="".concat(e.pageY-Number.parseInt(c.height)/2,"px"),c.left="".concat(e.pageX-Number.parseInt(c.width)/2,"px"),o===X?c.backgroundColor="".concat(i):o===F?(c.backgroundColor="".concat(i),c.width="16px",c.height="16px"):o===Y?(c.backgroundColor="".concat(i),c.width="8px",c.height="8px"):o===H&&(c.backgroundColor="#ffffff")):c.display="none"},a.pickColor=function(e){var t,n,o=a.state.mobile,r=a.props,i=r.changeColor,c=r.changePenType,l=r.ctx;if(o){if(o){t=Math.floor(e.changedTouches[0].clientX);var s=Math.floor(e.changedTouches[0].clientY)-document.querySelector(".panel-mobile").clientHeight;s>=0&&(n=s)}}else{var u=[e.nativeEvent.offsetX,e.nativeEvent.offsetY];t=u[0],n=u[1]}var m=l.getImageData(t,n,1,1).data,d="rgba(".concat(m.join(","),")");i(Ee(d)),c(X)},a.floodFill=function(e){var t=a.props,n=t.color,o=t.ctx,r=ve(n),i=o.getImageData(0,0,a.getCanvas().width,a.getCanvas().height),c={},l=a.state.mobile;if(l){if(l){var s=Math.floor(e.changedTouches[0].clientX),u=Math.floor(e.changedTouches[0].clientY)-document.querySelector(".panel-mobile").clientHeight;u>=0&&(c={x:s,y:u})}}else c={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};var m=o.getImageData(c.x,c.y,1,1),d={r:m.data[0],g:m.data[1],b:m.data[2]};o.putImageData(T(i,r,c,d),0,0)},a.draw=function(e){a.cursor(e);var t=a.props,n=t.ctx,o=t.penType,r=t.thickness,i=t.color,c=a.state,l=c.lastX,s=c.lastY,u=c.isDrawing,m=e.nativeEvent,d=m.offsetX,k=m.offsetY;n.lineWidth=r,u&&o!==F&&(n.beginPath(),n.setLineDash([0]),o===X||o===Y?n.strokeStyle=i:o===H&&(n.strokeStyle="#ffffff"),n.moveTo(l,s),n.lineTo(d,k),n.stroke(),a.setState({lastX:d,lastY:k}))},a.touchMoveEventLister=function(e){var t=a.props,n=t.ctx,o=t.penType,r=t.thickness,i=t.color,c=a.state,l=c.lastX,s=c.lastY,u=c.isDrawing;if(n.lineWidth=r,u&&o!==F){n.beginPath(),n.setLineDash([0]),o===X||o===Y?n.strokeStyle=i:o===H&&(n.strokeStyle="#ffffff");var m=Math.floor(e.touches[0].clientX),d=Math.floor(e.touches[0].clientY)-document.querySelector(".panel-mobile").clientHeight;d>=0&&(n.moveTo(l,s),n.lineTo(m,d),n.stroke(),a.setState({lastX:m,lastY:d}))}},a.touchStartEventLister=function(e){var t=a.props.penType,n=Math.floor(e.changedTouches[0].clientX),o=Math.floor(e.changedTouches[0].clientY)-document.querySelector(".panel-mobile").clientHeight;t!==X&&t!==H||o>=0&&a.setState({isDrawing:!0,lastX:n,lastY:o})},a.touchEndEventLister=function(e){var t=a.props.penType;t===Y?a.pickColor(e):t===F&&a.floodFill(e)},a.onClickHandle=function(e){var t=a.props.penType;t===Y?a.pickColor(e):t===F&&a.floodFill(e)},a.selectingDraw=function(e){a.cursor(e);var t=a.props.ctx,n=a.state,o=n.lastX,r=n.lastY,i=n.selectStartX,c=n.selectStartY,l=n.selectStart,s=n.beforeImageData;t.lineWidth=1,l&&(a.setState({lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY},function(){var e=o-i,a=r-c;t.setLineDash([4,4]),t.lineDashOffset=0,t.strokeRect(i,c,e,a)}),t.putImageData(s,0,0))},a.onMouseMoveEvent=function(e){var t=a.getCanvas();a.props.isSelecting?(a.selectingDraw(e),t.style.cursor="crosshair"):a.state.isDrawing?(a.draw(e),t.style.cursor="none"):a.cursor(e)},a.onMouseDownEvent=function(e){var t=a.props,n=t.ctx,o=t.isSelecting,r=t.selectedObject,i=a.state,c=i.selectStartX,l=i.selectStartY,s=i.selectStart,u=i.beforeImageData,m=e.nativeEvent,d=m.offsetX,k=m.offsetY;if(o){L(r)&&n.putImageData(u,0,0);var f=a.getCanvas(),p=n.getImageData(0,0,f.width,f.height);a.setState({selectStartX:void 0===c?d:c,selectStartY:void 0===l?k:l,beforeImageData:s?u:p,selectStart:!0})}else a.setState({isDrawing:!o,lastX:d,lastY:k})},a.onMouseUpEvent=function(e){var t=a.state,n=t.selectStartX,o=t.selectStartY,r=t.lastX,i=t.lastY,c=t.beforeImageData,l=a.props,s=l.ctx,u=l.updateSelectedObject;if(l.isSelecting){var m=r-n,d=i-o;u({startVector:new M(n,o),endVector:new M(r,i)}),s.setLineDash([4,4]),s.putImageData(c,0,0),s.strokeRect(n,o,m,d),a.setState({selectStartX:void 0,selectStartY:void 0,selectStart:!1})}else a.setState({isDrawing:!1})},a.onMouseOutEvent=function(e){a.setState({isDrawing:!1})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getCanvas(),a=this.getCanvasContext(),n=this.props,o=n.setContext,r=n.color,i=n.thickness;o(a),this.setState({beforeImageData:a.getImageData(0,0,t.width,t.height),mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},function(){t.width=window.innerWidth,t.height=e.state.mobile?window.innerHeight-document.querySelector(".panel-mobile").clientHeight:window.innerHeight-document.querySelector(".uk-navbar-container").clientHeight,a.strokeStyle=r,a.lineJoin="round",a.lineCap="round",a.lineWidth=i,a.rect(0,0,t.width,t.height),a.fillStyle="#ffffff",a.fill()})}},{key:"render",value:function(){return this.props.resetCanvas&&(this.props.ctx.putImageData(this.state.beforeImageData,0,0),this.props.resetCanvasActions(!1)),o.a.createElement("div",{id:"draw-container"},o.a.createElement("div",{className:"cursor"}),this.state.mobile?o.a.createElement("canvas",{id:"draw",ref:this.canvas,className:"uk-width-1-1",onTouchMove:this.touchMoveEventLister.bind(this),onTouchStart:this.touchStartEventLister.bind(this),onMouseOut:this.onMouseOutEvent.bind(this),onTouchEnd:this.touchEndEventLister.bind(this),onTouchCancel:this.onMouseOutEvent.bind(this)}):o.a.createElement("canvas",{id:"draw",ref:this.canvas,className:"uk-width-1-1",onMouseMove:this.onMouseMoveEvent,onMouseDown:this.onMouseDownEvent,onMouseUp:this.onMouseUpEvent,onMouseOut:this.onMouseOutEvent,onClick:this.onClickHandle}))}}]),t}(n.Component),xe=Object(s.b)(function(e){return{color:e.penProperty.color,thickness:e.penProperty.thickness,ctx:e.canvasState.ctx,penType:e.canvasState.penType,isSelecting:e.canvasState.isSelecting,resetCanvas:e.canvasState.resetCanvas,selectedObject:e.canvasState.selectedObject}},function(e){return Object(l.bindActionCreators)({setContext:S,changeIsSelecting:j,updateSelectedObject:A,resetCanvasActions:I,resetSelectedObject:D,changePenType:C,changeColor:h},e)})(ye),Ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).onUnload=function(e){var t=a.props.ctx,n=g.a.getItem("autosaveEnable");if(n=JSON.parse(n)){var o=t.canvas.toDataURL("image/png"),r="Name: \u041d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0439  \u0440\u0438\u0441\u0443\u043d\u043e\u043a"+"Date: ".concat(Date.now())+"Size: ".concat(t.canvas.width," x ").concat(t.canvas.height);localStorage.setItem("".concat(r),o)}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){try{if(g.a.hasItem("firstLogin"))g.a.setItem("firstLogin","false");else{var e=this.props.enableInfoModal;g.a.setItem("firstLogin","true"),g.a.setItem("autosaveEnable","false"),e()}}catch(t){console.log("Failed with error: "),console.log(t)}finally{window.addEventListener("beforeunload",this.onUnload)}}},{key:"componentDidUmmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?o.a.createElement("div",{className:"App"},o.a.createElement(be,null),o.a.createElement(xe,null)):o.a.createElement("div",{className:"App"},o.a.createElement(he,null),o.a.createElement(xe,null));return o.a.createElement("div",null,e)}}]),t}(n.Component),we=Object(s.b)(function(e){return{isOpen:e.infoModal.isOpen,ctx:e.canvasState.ctx}},function(e){return Object(l.bindActionCreators)({enableInfoModal:ke},e)})(Ne),Oe=(a(50),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Se(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ce=a(8),je={color:"#000000",thickness:1},Ie={ctx:{},penType:"pencil",isSelecting:!1,resetCanvas:!1,selectedObject:{}},De={isOpen:!1,reRender:0},Ae={isOpen:!1,reRender:0},Me=Object(l.combineReducers)({penProperty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COLOR":return Object(Ce.a)({},e,{color:t.payload});case"CHANGE_THICKNESS":return Object(Ce.a)({},e,{thickness:Number(t.payload)});default:return e}},canvasState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTEXT":return Object(Ce.a)({},e,{ctx:t.payload});case"CHANGE_PEN_TYPE":return Object(Ce.a)({},e,{resetCanvas:e.isSelecting&&!0,isSelecting:!1,selectedObject:{},penType:t.payload});case"CHANGE_IS_SELECTING":return Object(Ce.a)({},e,{penType:t.payload?"none":"pencil",isSelecting:t.payload});case"RESET_CANVAS":return Object(Ce.a)({},e,{resetCanvas:t.payload,penType:"pencil",isSelecting:!1});case"RESET_SELECT_OBJECT":return Object(Ce.a)({},e,{selectedObject:{}});case"UPDATE_SELECTED_OBJECT":return Object(Ce.a)({},e,{selectedObject:Object.assign(t.payload)});default:return e}},modalStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;switch((arguments.length>1?arguments[1]:void 0).type){case"ENABLE_MODAL":return Object(Ce.a)({},e,{isOpen:!0});case"DISABLE_MODAL":return Object(Ce.a)({},e,{isOpen:!1});case"RE_RENDER_MODAL":return Object(Ce.a)({},e,{reRender:Math.random()});default:return e}},infoModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;switch((arguments.length>1?arguments[1]:void 0).type){case"ENABLE_INFO_MODAL":return{isOpen:!0};case"DISABLE_INFO_MODAL":return{isOpen:!1};default:return e}}}),Te=Object(l.createStore)(Me,Object(l.compose)(Object(c.devToolsEnhancer)()));i.a.render(o.a.createElement(s.a,{store:Te},o.a.createElement(we,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/WebPaint",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/WebPaint","/service-worker.js");Oe?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Se(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Se(t,e)})}}()}},[[27,1,2]]]);
//# sourceMappingURL=main.a7a82d74.chunk.js.map