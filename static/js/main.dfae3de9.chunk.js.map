{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","modules/Tools.js","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","components/Panel/SaveButton.jsx","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","store/actions/modalStorageActions.js","components/Panel/Storage/ImageCard.jsx","components/Panel/Storage/StorageModal.jsx","components/Panel/Storage.jsx","components/Panel/Storage/SaveToStorage.jsx","components/Panel.jsx","modules/PenTypeConsts.js","components/Canvas.jsx","components/DisplayError.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","store/data/storageModal.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","store/reducers/modalStorageReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","changePipetteColor","Thickness","handleChange","event","_this","props","target","react_default","a","createElement","className","onChange","this","bind","Component","connect","state","thickness","penProperty","dispatch","bindActionCreators","ColorPicker","htmlFor","id","color","hexToRGB","hex","r","Number","parseInt","slice","g","b","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","_ref","width","height","blue","stack","x","y","length","pop","pointColor","data","push","sortByDateNewOld","elem1","elem2","regexDate","key1","keys","next","key2","date1","match","sortByDateOldNew","autosaveImg","ctx","key","concat","sessionStorage","canvas","toDataURL","setItem","chkObjForNonEmptiness","object","Object","entries","constructor","ClearButton","handleClick","rect","fillStyle","fill","onClick","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","resetSelectedObject","updateSelectedObject","Vector2","classCallCheck","Array","isArray","console","log","TypeError","Error","_thisX","_thisY","isFinite","createClass","arguments","undefined","VectorStart","VectorEnd","SaveButton","e","isSelecting","link","refs","href","document","querySelector","selectedObject","getContext","size","getBoxSize","startVector","endVector","Math","abs","getImageData","imageDate","putImageData","remove","download","UIkit","notification","message","pos","timeout","ref","saveCanvasAsImg","Pipette","Pen","Eraser","UploadButton","persist","window","File","FileReader","FileList","Blob","alert","confirm","files","file","reader","onload","_ref2","result","Image","dataUri","image","innerHeight","innerWidth","drawImage","src","onerror","error","code","readAsDataURL","uploadImgAsCanvas","FloodFill","Selection","enableModal","disableModal","reRenderModal","ImageCard","edit","onCanvas","editName","stringKey","date","localStorage","getItem","removeItem","replace","editInput","setState","deleteImg","_this2","_this$props","imgData","info","string","name","String","Date","parseKey","hidden","alt","defaultValue","PureComponent","StorageModal","sortBy","clearHandle","clear","forceUpdate","listMap","arr","i","map","Map","item","set","getStorageElemsMap","sort","list","Storage_ImageCard","floor","random","values","propTypes","isOpen","PropTypes","bool","reRender","number","func","modalStorage","Modal","setAppElement","Storage","getCursor","onClickHandle","style","display","lib_default","contentLabel","Storage_StorageModal","SaveToStorage","now","imgSize","saveImg","context","penType","uk-navbar","Panel_ColorPicker","Panel_Thickness","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_SaveButton","Panel_UploadButton","Storage_SaveToStorage","Panel_Storage","pencil","pipette","eraser","paintBucket","none","Canvas","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","cursor","pipetteColor","top","pageY","left","pageX","draw","_this$props2","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","nativeEvent","offsetX","offsetY","stroke","pickColor","join","floodFill","selectingDraw","_this$state","lineDashOffset","strokeRect","onMouseMoveEvent","onMouseDownEvent","_this$props3","_this$state2","onMouseUpEvent","selectObject","onMouseOutEvent","clientHeight","lineJoin","lineCap","resetCanvas","onMouseMove","onMouseDown","onMouseUp","onMouseOut","DisplayError","uk-grid","App","app","components_DisplayError","components_Panel","components_Canvas","Boolean","location","hostname","storageModal","rootReducer","combineReducers","action","objectSpread","assign","store","createStore","compose","applyMiddleware","thunk","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.dfae3de9.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePipetteColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PIPETTE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nclass Thickness extends Component {\r\n\thandleChange = event => this.props.changeThickness(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<label>Толщина шрифта:\r\n\t\t\t\t\t<select \r\n\t\t\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t\t\t4\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t\t\t8\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t\t\t16\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t\t\t32\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t\t\t64\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nclass ColorPicker extends Component {\r\n\thandleChange = event => this.props.changeColor(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t\t\t<input \r\n\t\t\t\t\ttype=\"color\" \r\n\t\t\t\t\tid=\"colorPicker\" \r\n\t\t\t\t\tonChange={this.handleChange.bind(this)} \r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n  }\r\n  return imageData;\r\n}\r\n\r\n/*export const loadWebAssembly = fileName => {\r\n  return fetch(fileName)\r\n    .then(response => response.arrayBuffer())\r\n    .then(bits => {\r\n    \treturn WebAssembly.compile(bits)\r\n    })\r\n    .then(module => new WebAssembly.Instance(module));\r\n};*/\r\n\r\nexport const sortByDateNewOld = (elem1, elem2) => {\r\n\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0], 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0], 10);\r\n\r\n\treturn date2 - date1; // от новых к старым\r\n}\r\n\r\nexport const sortByDateOldNew  = (elem1, elem2) => {\r\n\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0], 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0], 10);\r\n\r\n\treturn date1 - date2; // от старых к новым\r\n}\r\n\r\nexport const parseKey = string => {\r\n\tlet regexName = /(?<=Name: ).*(?=Date)/g;\r\n\tlet name = string.match(regexName)[0];\r\n\r\n\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\tlet resultRegexDate = /^.*(?= GMT)/g;\r\n\tlet date = Number.parseInt(string.match(regexDate)[0], 10);\r\n\tdate = String(new Date(date));\r\n\tdate = date.match(resultRegexDate)[0];\r\n\r\n\tlet regexSize = /(?<=Size: ).*$/g;\r\n\tlet size = string.match(regexSize)[0];\r\n\r\n\treturn {\r\n\t\tname: name,\r\n\t\tdate: date,\r\n\t\tsize: size\r\n\t}\r\n}\r\n\r\nexport const getStorageElemsMap = () => {\r\n\tlet arr = [];\r\n\tfor (let i = 0; i < localStorage.length; i++) {\r\n\t\tlet map = new Map();\r\n\t\tlet key = localStorage.key(i);\r\n\t\tlet item = localStorage.getItem(key);\r\n\t\tmap.set(key, item);\r\n\t\tarr.push(map);\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nexport const autosaveImg = ctx => {\r\n\tlet key = `autosave: ${sessionStorage.length}`;\r\n\tlet data = ctx.canvas.toDataURL('image/png');\r\n\r\n\tsessionStorage.setItem(key, data);\r\n}\r\n\r\nexport const chkObjForEmptiness = object => (Object.entries(object).length === 0 && object.constructor === Object) ? true : false;\r\nexport const chkObjForNonEmptiness = object => !(Object.entries(object).length === 0 && object.constructor === Object) ? true : false;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { autosaveImg } from './../../modules/Tools';\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tlet { ctx } = this.props;\r\n\t\tautosaveImg(ctx);\r\n\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button trash\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetSelectedObject = () => {\r\n\treturn {\r\n\t\ttype: 'RESET_SELECT_OBJECT'\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n\r\n\tupdateVector2(x = this.x, y = this.y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { \r\n\tresetCanvasActions, \r\n\tresetSelectedObject \r\n}  from './../../store/actions/canvasActions';\r\nimport { Vector2 } from './../../modules/Vector2';\r\nimport UIkit from 'uikit';\r\n\r\nclass SaveButton extends Component {\r\n\tasync saveCanvasAsImg(e) {\r\n\t\tlet { isSelecting } = this.props;\r\n\t\tlet link = this.refs.link;\r\n\t\tif (!isSelecting) \r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\telse if (isSelecting) {\r\n\t\t\tlet { selectedObject } = this.props;\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet ctx = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = await this.props.ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tctx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t\tthis.props.resetSelectedObject();\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\t\tlink.download = 'canvasImage.png';\r\n\t\tUIkit.notification({\r\n\t\t\tmessage: `${\r\n\t\t\t\tisSelecting ? \r\n\t\t\t\t\"Фрагмент был сохранён на компьютер\"\r\n\t\t\t\t: \"Холст был сохранён на компьютер\"\r\n\t\t\t}`,\r\n\t\t\tpos: 'bottom-right',\r\n\t\t\ttimeout: 2500\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button download\"\r\n\t\t\t\t\tonClick={this.saveCanvasAsImg.bind(this)}\r\n\t\t\t\t> </a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\nimport { autosaveImg } from './../../modules/Tools';\r\n\r\nclass Pipette extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('pipette');\r\n\t\tautosaveImg(this.props.ctx);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\nimport { autosaveImg } from './../../modules/Tools';\r\n\r\nclass Pen extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('pencil');\r\n\t\tautosaveImg(this.props.ctx);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button pencil\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\nimport { autosaveImg } from './../../modules/Tools';\r\n\r\nclass Eraser extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('eraser');\r\n\t\tautosaveImg(this.props.ctx);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport UIkit from 'uikit';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif(!window.File || !window.FileReader || !window.FileList || !window.Blob){\r\n\t\t\talert(\"Ваш браузер не поддерживает эту функцию :(\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\tlet { ctx } = this.props;\r\n\t\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tawait ctx.fill();\r\n\r\n\t\t\tlet [ file, reader ] = [ e.target.files[0], new FileReader() ];\r\n\t\t\t\r\n\t\t\treader.onload = e => {\r\n\t\t\t\tlet [ dataUri, image ] = [ e.target.result, new Image()];\r\n\r\n\t\t\t\timage.onload = () => {\r\n\t\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\t\t\telse if (image.height > window.innerHeight) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\r\n\t\t\t\t\telse if (image.width > window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\timage.src = dataUri;\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `Файл был удачно загружен`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.onerror = e => {\r\n\t\t\t\tconsole.log(`Error loading file. Code: ${e.target.error.code}`);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `При загрузке файла произошла ошибка, попробуйте снова.`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label \r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button upload\"\r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(UploadButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\nimport { autosaveImg } from './../../modules/Tools';\r\n\r\nclass FloodFill extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('paint-bucket');\r\n\t\tautosaveImg(this.props.ctx);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button paint-bucket\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changeIsSelecting(true)\r\n\t\tif (this.props.isSelecting) \r\n\t\t\tthis.props.resetCanvasActions(true)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tchangeIsSelecting: PropTypes.func.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","export const enableModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const reRenderModal = () => {\r\n\treturn {\r\n\t\ttype: 'RE_RENDER_MODAL'\r\n\t}\r\n}","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { \r\n\treRenderModal, \r\n\tdisableModal \r\n}  from './../../../store/actions/modalStorageActions';\r\nimport { parseKey } from './../../../modules/Tools';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass ImageCard extends PureComponent {\r\n\tstate = {\r\n\t\tedit: false\r\n\t}\r\n\r\n\tonCanvas = () => {\r\n\t\tthis.props.ctx.drawImage(this.refs.image, 0, 0);\r\n\t\tthis.props.disableModal();\r\n\t}\r\n\r\n\teditName = e => {\r\n\t\tlet { stringKey } = this.props;\r\n\t\tlet date = localStorage.getItem(stringKey);\r\n\r\n\t\tlocalStorage.removeItem(stringKey);\r\n\r\n\t\tlet regexName = /(?<=Name: ).*(?=Date)/g;\r\n\t\tstringKey = stringKey.replace(regexName, this.refs.editInput.value);\r\n\r\n\t\tlocalStorage.setItem(stringKey, date);\r\n\t\tthis.setState({\r\n\t\t\tedit: false\r\n\t\t}, this.props.reRenderModal());\r\n\t}\r\n\r\n\tdeleteImg = e => {\r\n\t\tlocalStorage.removeItem(this.props.stringKey);\r\n\t\tthis.props.reRenderModal();\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { stringKey, imgData } = this.props;\r\n\t\tlet { edit } = this.state;\r\n\t\tlet info = parseKey(stringKey);\r\n\t\tlet hidden = !edit ? \"uk-hidden\" : \"\";\r\n\r\n\t\treturn (\r\n\t\t\t<div \r\n\t\t\t\tclassName=\"uk-margin-bottom uk-margin-left uk-card uk-width-1-2@s uk-width-1-3@m uk-width-1-4@l uk-flex-none uk-card-default uk-flex uk-flex-column uk-flex-between\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"uk-card-media-top uk-card-header\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"image-border\"\r\n\t\t\t\t\t\tsrc={imgData}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tref=\"image\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"uk-card-body\">\r\n\t\t\t\t\t\t<h4 \r\n\t\t\t\t\t\t\tclassName=\"uk-card-title\"\r\n\t\t\t\t\t\t\tonClick={() => this.setState({ edit: true })}\r\n\t\t\t\t\t\t>{info.name}</h4>\r\n\t\t\t\t\t\t<div id=\"editBox\" className={hidden}>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tclassName=\"uk-input uk-form-width-small uk-form-small\" \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tdefaultValue={info.name} \r\n\t\t\t\t\t\t\t\tref=\"editInput\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-left uk-icon-button check\" \r\n\t\t\t\t\t\t\t\tonClick={this.editName.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-left uk-icon-button close\" \r\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ edit: false })}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>Дата создания файла: <br/>{info.date}</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>Размеры: {info.size}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-button-group uk-width-1-1 \">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-primary uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.onCanvas.bind(this)}\r\n\t\t\t\t\t>На холст</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-danger uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.deleteImg.bind(this)}\r\n\t\t\t\t\t>Удалить</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\treRenderModal: reRenderModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nImageCard.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\treRenderModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCard);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { \r\n\tenableModal, \r\n\tdisableModal \r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport UIkit from 'uikit';\r\nimport ImageCard from './ImageCard';\r\nimport { \r\n\tsortByDateNewOld, \r\n\tsortByDateOldNew,\r\n\tgetStorageElemsMap\r\n} from './../../../modules/Tools';\r\n\r\nclass StorageModal extends Component {\r\n\tstate = {\r\n\t\tsortBy: 'По дате(от новых к старым)'\r\n\t}\r\n\r\n\tclearHandle = () => {\r\n\t\tif (localStorage.length !== 0) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище было очищено.',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t\tthis.forceUpdate();\r\n\t\t} else \r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t}\r\n\r\n\thandleChange = event => this.setState({ sortBy: event.target.value })\r\n\r\n\trender() {\r\n\t\tlet listMap = getStorageElemsMap();\r\n\t\tlet { sortBy } = this.props;\r\n\t\tif (sortBy === 'По дате(от новых к старым)') \r\n\t\t\tlistMap = listMap.sort(sortByDateNewOld);\r\n\t\telse if(sortBy === 'По дате(от старых к новым)')\r\n\t\t\tlistMap = listMap.sort(sortByDateOldNew);\r\n\r\n\t\tlet list = listMap.map(item => (\r\n\t\t\t<ImageCard\r\n\t\t\t\tkey={Math.floor(Math.random() * 100000000)}\r\n\t\t\t\tstringKey={item.keys().next().value}\r\n\t\t\t\timgData={item.values().next().value}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-height-1-1\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className=\"uk-heading-line uk-text-center\">\r\n\t\t\t\t\t\t<span>Сохранённые изображения</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4>На данный момент сохранено {localStorage.length} {`${localStorage.length === 1 ? 'изображение' : 'изображений' }`}.</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<fieldset className=\"uk-fieldset\">\r\n\t\t\t\t\t\t\t<legend className=\"uk-legend\">Сортировать: </legend>\r\n\t\t\t\t\t\t\t<div className=\"uk-margin\">\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclassName=\"uk-select uk-width-medium\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.sortBy}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от новых к старым)\">По дате(от новых к старым)</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от старых к новым)\">По дате(от старых к новым)</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch\">\r\n\t\t\t\t\t{list}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-flex uk-flex-around\">\r\n\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.clearHandle.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-right uk-margin-bottom uk-button-danger\"\r\n\t\t\t\t\t\t>Удалить всё</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.props.disableModal()}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-left uk-margin-bottom uk-button-primary\"\r\n\t\t\t\t\t\t>Закрыть</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen,\r\n\t\treRender: state.modalStorage.reRender\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nImageCard.propTypes = {\r\n\tisOpen: PropTypes.bool, \r\n\treRender: PropTypes.number,\r\n\tenableModal: PropTypes.func,\r\n\tdisableModal: PropTypes.func,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StorageModal);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal }  from './../../store/actions/modalStorageActions';\r\nimport Modal from 'react-modal';\r\nimport StorageModal from './Storage/StorageModal';\r\nimport PropTypes from 'prop-types';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nclass Storage extends Component {\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tonClickHandle = () => {\r\n\t\tthis.getCursor().style.display = 'none';\r\n\t\tthis.props.enableModal();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button storage\"\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={this.props.isOpen}\r\n\t\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<StorageModal />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal\r\n\t}, dispatch);\r\n}\r\n\r\nStorage.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired, \r\n\tenableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Storage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport UIkit from 'uikit';\r\nimport { bindActionCreators } from 'redux';\r\nimport { resetCanvasActions }  from './../../../store/actions/canvasActions';\r\nimport { Vector2 } from './../../../modules/Vector2';\r\n\r\nclass SaveToStorage extends Component {\r\n\tasync handleClick() {\r\n\t\tlet { ctx, isSelecting } = this.props;\r\n\t\tlet saveImg;\r\n\t\tlet name = `Name: Рисунок №${localStorage.length + 1}`;\r\n\t\tlet date = `Date: ${Date.now()}`;\r\n\t\tlet key, imgSize;\r\n\r\n\t\tif (!isSelecting) {\r\n\t\t\timgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tsaveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t} else {\r\n\t\t\tlet { selectedObject } = this.props;\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet context = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\timgSize = `Size: ${Math.abs(size.width)} x ${Math.abs(size.height)}`;\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\t\t\tcontext.putImageData(imageDate, 0, 0);\r\n\t\t\tsaveImg = canvas.toDataURL('image/png');\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\tkey = name + date + imgSize;\r\n\t\ttry {\r\n\t\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `${isSelecting ? \r\n\t\t\t\t\t\t'Фрагмент был сохранён в хранилище.' \r\n\t\t\t\t\t\t: 'Холст был сохранён в хранилище.'\r\n\t\t\t\t\t}`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2500\r\n\t\t\t\t});\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.log(\"Storage failed: \" + e);\r\n\t\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button cloud-upload\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\t//resetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveToStorage.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveToStorage);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport SaveButton from './Panel/SaveButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\n\r\nconst Panel = ({penType, isSelecting}) => (\r\n\t<div>\r\n\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(Panel);","export const pencil = 'pencil';\r\nexport const pipette = 'pipette';\r\nexport const eraser = 'eraser';\r\nexport const paintBucket = 'paint-bucket';\r\nexport const none = 'none';","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\tresetSelectedObject\r\n} from './../store/actions/canvasActions';\r\n\r\nimport {\r\n\tpencil,\r\n\tpipette,\r\n\teraser,\r\n\tpaintBucket,\r\n\tnone\r\n} from './../modules/PenTypeConsts';\r\n\r\nimport { \r\n\tchangeColor, \r\n\tchangePipetteColor\r\n} from './../store/actions/penActions';\r\n\r\nimport { \r\n\thexToRGB,\r\n\tfloodFillImageData,\r\n\t/*chkObjForEmptiness,*/\r\n\tchkObjForNonEmptiness,\r\n\t/*loadWebAssembly*/ \r\n} from './../modules/Tools';\r\n\r\nimport { Vector2 } from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tgetCanvas = () => this.refs.canvas;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\r\n\t\tthis.props.setContext(ctx);\r\n\r\n\t\tcanvas.width = window.innerWidth;\r\n\t\tcanvas.height = window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight;\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n\t\t});\r\n\r\n\t\tctx.strokeStyle = this.props.color;\r\n\t\tctx.lineJoin = \"round\";\r\n\t\tctx.lineCap = \"round\";\r\n\t\tctx.lineWidth = this.props.thickness;\r\n\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tlet { \r\n\t\t\tpenType, \r\n\t\t\tthickness, \r\n\t\t\tpipetteColor, \r\n\t\t\tcolor \r\n\t\t} = this.props;\r\n\r\n\t\tif (penType !== none) {\r\n\t\t\tcursor.style.display = 'block';\r\n\t\t\tcursor.style.width = `${thickness + 5}px`;\r\n\t\t\tcursor.style.height = `${thickness + 5}px`;\r\n\t\r\n\t\t\tcursor.style.top = `${e.pageY - Number.parseInt(cursor.style.height)/2}px`;\r\n\t\t\tcursor.style.left = `${e.pageX - Number.parseInt(cursor.style.width)/2}px`;\r\n\t\r\n\t\t\tif (penType === pencil || penType === paintBucket) \r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\t\t\telse if (penType === pipette) \r\n\t\t\t\tcursor.style.backgroundColor  = `${pipetteColor}`;\r\n\t\t\telse if (penType === eraser) \r\n\t\t\t\tcursor.style.backgroundColor = '#ffffff';\r\n\r\n\t\t} else {\r\n\t\t\tcursor.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tlet  {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color,\r\n\t\t\tpipetteColor \t\r\n\t\t} =  this.props;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (this.state.isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === pipette)\r\n\t\t\t\tctx.strokeStyle = pipetteColor;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tctx.moveTo(this.state.lastX, this.state.lastY);\r\n\t\t\tctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n\t\t\tctx.stroke();\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tconst [x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\tconst imgData = this.props.ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tthis.props.changePipetteColor(`rgba(${pixel.join(',')})`);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tlet color = hexToRGB(this.props.color);\r\n\t\tlet imageData = this.props.ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {\r\n\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\ty: e.nativeEvent.offsetY\r\n\t\t}\r\n\t\tconst imgData = this.props.ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tthis.props.ctx.putImageData(floodFillImageData(imageData, color, startPoint, backgroundColor), 0, 0);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tif (this.props.penType === pipette) this.pickColor(e);\r\n\t\telse if (this.props.penType === paintBucket) this.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tlet  { ctx } =  this.props;\r\n\t\tlet { \r\n\t\t\tlastX, lastY, \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tctx.lineWidth = 1;\r\n\t\tif (selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = lastX - selectStartX;\r\n\t\t\t\tlet height = lastY - this.state.selectStartY;\r\n\t\t\t\tctx.setLineDash([4, 4]);\r\n\r\n\t\t\t\tctx.lineDashOffset = 0;\r\n\t\t\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\t\t\t\t});\r\n\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMoveEvent = e => {\r\n\t\tlet canvas = this.getCanvas();\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tthis.selectingDraw(e);\r\n\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t} else {\r\n\t\t\tthis.draw(e);\r\n\t\t\tcanvas.style.cursor = 'none';\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseDownEvent = e => {\r\n\t\tlet  { ctx, isSelecting, selectedObject } =  this.props;\r\n\t\tlet {  \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart, beforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tif (chkObjForNonEmptiness(selectedObject)) \r\n\t\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\r\n\t\t\tlet canvas = this.getCanvas();\r\n\t\t\tlet imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: selectStartX === undefined ? e.nativeEvent.offsetX : selectStartX,\r\n\t\t\t\tselectStartY: selectStartY === undefined ? e.nativeEvent.offsetY : selectStartY,\r\n\t\t\t\tbeforeImageData: !selectStart ? imageData : beforeImageData,\r\n\t\t\t\tselectStart: true\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: isSelecting ? false : true,\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseUpEvent = e => {\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tlet width = this.state.lastX - this.state.selectStartX;\r\n\t\t\tlet height = this.state.lastY - this.state.selectStartY;\r\n\t\t\tlet selectObject = {\r\n\t\t\t\tstartVector: new Vector2(this.state.selectStartX, this.state.selectStartY),\r\n\t\t\t\tendVector: new Vector2(this.state.lastX, this.state.lastY)\r\n\t\t\t}\r\n\t\t\tthis.props.updateSelectedObject(selectObject);\r\n\t\t\tthis.props.ctx.setLineDash([4, 4]);\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.ctx.strokeRect(this.state.selectStartX, this.state.selectStartY, width, height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: undefined,\r\n\t\t\t\tselectStartY: undefined,\r\n\t\t\t\tselectStart: false,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseOutEvent = e => {\r\n\t\tthis.setState({\r\n\t\t\tisDrawing: false\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref=\"canvas\" \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\t\t\t\t\tonMouseMove={this.onMouseMoveEvent.bind(this)}\r\n\t\t\t\t\tonMouseDown={this.onMouseDownEvent.bind(this)}\r\n\t\t\t\t\tonMouseUp={this.onMouseUpEvent.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t</canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpipetteColor: state.penProperty.pipetteColor,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeColor: changeColor,\r\n\t\tchangePipetteColor: changePipetteColor,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired,\r\n\tchangePipetteColor: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React from 'react';\r\n\r\nconst DisplayError = () => {\r\n\treturn(\r\n\t\t<div className=\"uk-container uk-margin-small-top\">\r\n\t\t\t<div className=\"uk-card uk-card-default uk-width-1-2@m\">\r\n\t\t\t\t<div className=\"uk-card-header\">\r\n\t\t\t\t\t<div className=\"uk-grid-small uk-flex-middle\" uk-grid=\"true\">\r\n\t\t\t\t\t  <div className=\"uk-width-expand uk-flex uk-flex-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"uk-card-title uk-margin-remove-bottom\">Ваш браузер не поддерживается</h3>\r\n\t\t\t\t\t \t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-card-body uk-flex uk-flex-center\">\r\n\t\t\t\t  <button className=\"uk-button uk-button-danger uk-button-small\">Кинуть в faramo_zayw тапок</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DisplayError;","import React, { Component } from 'react';\r\nimport './../css/App.css';\r\nimport Panel from './Panel';\r\nimport Canvas from './Canvas';\r\nimport DisplayError from './DisplayError';\r\n\r\nclass App extends Component {\r\n  render() {\r\n  \tconst app = !(window.innerWidth < 800) ? \r\n    (\r\n      <div className=\"App\">\r\n\t\t  \t<Panel />\r\n\t\t  \t<Canvas /> \r\n\t\t  </div>\r\n    ) : <DisplayError />;\r\n\r\n    return (\r\n    \t<div>\r\n    \t\t{app}\r\n    \t</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n\tpipetteColor: '#000000'\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","const storageModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default storageModal;\r\n","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\nimport modalStorageReducer from './store/reducers/modalStorageReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer,\r\n\t\"modalStorage\": modalStorageReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PIPETTE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpipetteColor: action.payload\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: state.isSelecting && true,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tselectedObject: {},\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\tpenType: 'pencil',\r\n\t\t\t\tisSelecting: false\r\n\t\t\t}\r\n\t\tcase 'RESET_SELECT_OBJECT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import storageModal from './../data/storageModal';\r\n\r\nexport default (state = storageModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tcase 'RE_RENDER_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\treRender: Math.random()\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tapplyMiddleware(thunk), \r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}