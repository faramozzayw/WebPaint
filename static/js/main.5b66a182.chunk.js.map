{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","components/Panel/SaveButton.jsx","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","store/actions/modalStorageActions.js","components/Panel/Storage/ImageCard.jsx","components/Panel/Storage/StorageModal.jsx","components/Panel/Storage.jsx","components/Panel/Storage/SaveToStorage.jsx","components/Panel.jsx","modules/Tools.js","components/Canvas.jsx","components/DisplayError.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","store/data/storageModal.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","store/reducers/modalStorageReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","changePipetteColor","Thickness","handleChange","event","_this","props","target","react_default","a","createElement","className","onChange","this","bind","Component","connect","state","thickness","penProperty","dispatch","bindActionCreators","ColorPicker","htmlFor","id","color","ClearButton","handleClick","ctx","rect","canvas","width","height","fillStyle","fill","onClick","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","resetSelectedObject","updateSelectedObject","Vector2","x","y","Object","classCallCheck","Array","isArray","console","log","TypeError","Error","_ref","Number","_thisX","_thisY","isFinite","createClass","key","arguments","length","undefined","VectorStart","VectorEnd","SaveButton","e","link","refs","isSelecting","href","document","querySelector","toDataURL","getContext","size","getBoxSize","selectedObject","startVector","endVector","Math","abs","getImageData","imageDate","putImageData","download","UIkit","notification","message","concat","pos","timeout","ref","saveCanvasAsImg","Pipette","Pen","Eraser","UploadButton","persist","window","File","FileReader","FileList","Blob","alert","confirm","file","files","reader","onload","dataUri","result","image","Image","innerHeight","innerWidth","drawImage","src","onerror","error","code","readAsDataURL","uploadImgAsCanvas","FloodFill","Selection","enableModal","disableModal","reRenderModal","ImageCard","parseKey","string","name","match","date","parseInt","String","Date","onCanvas","_this2","_this$props","stringKey","imgData","info","alt","localStorage","removeItem","PureComponent","reRender","modalStorage","StorageModal","getStorageElemsMap","arr","i","map","Map","item","getItem","set","push","clearHandle","clear","forceUpdate","list","Storage_ImageCard","floor","random","keys","next","values","isOpen","Modal","setAppElement","Storage","getCursor","onClickHandle","style","display","lib_default","contentLabel","Storage_StorageModal","SaveToStorage","saveImg","now","setItem","Panel","uk-navbar","Panel_ColorPicker","Panel_Thickness","penType","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_SaveButton","Panel_UploadButton","Storage_SaveToStorage","Panel_Storage","hexToRGB","hex","r","slice","g","b","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","blue","stack","pop","pointColor","data","Canvas","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","cursor","top","pageY","left","pageX","pipetteColor","draw","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","nativeEvent","offsetX","offsetY","stroke","setState","pickColor","join","floodFill","selectingDraw","lineDashOffset","strokeRect","clientHeight","lineJoin","lineCap","resetCanvas","entries","constructor","onMouseMove","onMouseDown","onMouseUp","selectObject","onMouseOut","DisplayError","uk-grid","App","app","components_DisplayError","components_Panel","components_Canvas","Boolean","location","hostname","storageModal","rootReducer","combineReducers","action","objectSpread","assign","store","createStore","compose","applyMiddleware","thunk","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5b66a182.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePipetteColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PIPETTE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nclass Thickness extends Component {\r\n\thandleChange = event => this.props.changeThickness(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<label>Толщина шрифта:\r\n\t\t\t\t\t<select \r\n\t\t\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t\t\t4\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t\t\t8\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t\t\t16\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t\t\t32\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t\t\t64\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nclass ColorPicker extends Component {\r\n\thandleChange = event => this.props.changeColor(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t\t\t<input \r\n\t\t\t\t\ttype=\"color\" \r\n\t\t\t\t\tid=\"colorPicker\" \r\n\t\t\t\t\tonChange={this.handleChange.bind(this)} \r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.ctx.rect(0, 0, this.props.ctx.canvas.width, this.props.ctx.canvas.height);\r\n\t\tthis.props.ctx.fillStyle = '#ffffff';\r\n\t\tthis.props.ctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button trash\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetSelectedObject = () => {\r\n\treturn {\r\n\t\ttype: 'RESET_SELECT_OBJECT'\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n\r\n\tupdateVector2(x = this.x, y = this.y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { \r\n\tresetCanvasActions, \r\n\tresetSelectedObject \r\n}  from './../../store/actions/canvasActions';\r\nimport { Vector2 } from './../../modules/Vector2';\r\nimport UIkit from 'uikit';\r\n\r\nclass SaveButton extends Component {\r\n\tasync saveCanvasAsImg(e) {\r\n\t\tlet link = this.refs.link;\r\n\t\tif (!this.props.isSelecting) {\r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\t} else if (this.props.isSelecting) {\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet ctx = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(this.props.selectedObject.startVector, this.props.selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = await this.props.ctx.getImageData(\r\n\t\t\t\tthis.props.selectedObject.startVector.x,\r\n\t\t\t\tthis.props.selectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tlet link = this.refs.link;\r\n\t\t\tctx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t\tthis.props.resetSelectedObject();\r\n\t\t}\r\n\t\tlink.download = 'canvasImage.png';\r\n\t\tUIkit.notification({\r\n\t\t\tmessage: `${\r\n\t\t\t\tthis.props.isSelecting ? \r\n\t\t\t\t\"Фрагмент был сохранён на компьютер\"\r\n\t\t\t\t: \"Холст был сохранён на компьютер\"\r\n\t\t\t}`,\r\n\t\t\tpos: 'bottom-right',\r\n\t\t\ttimeout: 2500\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button download\"\r\n\t\t\t\t\tonClick={this.saveCanvasAsImg.bind(this)}\r\n\t\t\t\t></a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Pipette extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('pipette')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Pen extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button pencil\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('pencil')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Eraser extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('eraser')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport UIkit from 'uikit';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif(!window.File || !window.FileReader || !window.FileList || !window.Blob){\r\n\t\t\talert(\"Ваш браузер не поддерживается :(\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\tthis.props.ctx.rect(0, 0, this.props.ctx.canvas.width, this.props.ctx.canvas.height);\r\n\t\t\tthis.props.ctx.fillStyle = '#ffffff';\r\n\t\t\tawait this.props.ctx.fill();\r\n\r\n\t\t\tlet file = e.target.files[0];\r\n\t\t\tlet reader = new FileReader();\r\n\t\t\t\r\n\t\t\treader.onload = e => {\r\n\t\t\t\tlet dataUri = e.target.result;\r\n\t\t\t\tlet image = new Image();\r\n\r\n\t\t\t\timage.onload = () => {\r\n\t\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) \r\n\t\t\t\t\t\tthis.props.ctx.drawImage(image, 0, 0);\r\n\r\n\t\t\t\t\telse if (image.height > window.innerHeight) \r\n\t\t\t\t\t\tthis.props.ctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\r\n\t\t\t\t\telse if (image.width > window.innerWidth) \r\n\t\t\t\t\t\tthis.props.ctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\timage.src = dataUri;\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `Файл был удачно загружен`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.onerror = e => {\r\n\t\t\t\tconsole.log(`Error loading file. Code: ${e.target.error.code}`);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `При загрузке файла произошла ошибка, попробуйте снова.`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label \r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button upload\"\r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object\r\n}\r\n\r\nexport default connect(mapStateToProps)(UploadButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass FloodFill extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button paint-bucket\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('paint-bucket')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changeIsSelecting(true)\r\n\t\tif (this.props.isSelecting) this.props.resetCanvasActions(true)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tchangeIsSelecting: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","export const enableModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const reRenderModal = () => {\r\n\treturn {\r\n\t\ttype: 'RE_RENDER_MODAL'\r\n\t}\r\n}","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { reRenderModal, disableModal }  from './../../../store/actions/modalStorageActions';\r\n\r\nclass ImageCard extends PureComponent {\r\n\tparseKey = string => {\r\n\t\tlet regexName = /(?<=Name: ).*(?=Date)/g;\r\n\t\tlet name = string.match(regexName)[0];\r\n\r\n\t\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\t\tlet resultRegexDate = /^.*(?= GMT)/g;\r\n\t\tlet date = Number.parseInt(string.match(regexDate)[0], 10);\r\n\t\tdate = String(new Date(date));\r\n\t\tdate = date.match(resultRegexDate)[0];\r\n\r\n\t\tlet regexSize = /(?<=Size: ).*$/g;\r\n\t\tlet size = string.match(regexSize)[0];\r\n\r\n\t\treturn {\r\n\t\t\tname: name,\r\n\t\t\tdate: date,\r\n\t\t\tsize: size\r\n\t\t}\r\n\t}\r\n\r\n\tonCanvas = () => {\r\n\t\tthis.props.ctx.drawImage(this.refs.image, 0, 0);\r\n\t\tthis.props.disableModal();\r\n\t}\r\n\r\n\trender() {\r\n  \t\tlet { stringKey, imgData } = this.props;\r\n  \t\tlet info = this.parseKey(stringKey);\r\n\r\n    \treturn (\r\n    \t    <div className=\"uk-margin-bottom uk-margin-left uk-card uk-card-small uk-width-1-3 uk-flex-none uk-card-default\">\r\n    \t      <div className=\"uk-card-media-top uk-card-header\">\r\n    \t        <img src={imgData} alt=\"\" ref=\"image\"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"uk-card-body\">\r\n\t\t\t\t\t\t\t<h4 className=\"uk-card-title\">{info.name}</h4>\r\n\t\t\t\t\t\t\t<span>Дата создания файла: <br/>{info.date}</span>\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t<span>Размеры: {info.size}</span>\r\n    \t      </div>\r\n    \t      <div className=\"uk-button-group uk-width-1-1\">\r\n    \t      \t<button \r\n    \t      \t\tclassName=\"uk-button uk-button-primary uk-width-1-2\"\r\n    \t      \t\tonClick={this.onCanvas.bind(this)}\r\n    \t      \t>На холст</button>\r\n    \t      \t<button \r\n    \t      \t\tclassName=\"uk-button uk-button-danger uk-width-1-2\"\r\n    \t      \t\tonClick={() => {\r\n    \t      \t\t\tlocalStorage.removeItem(stringKey);\r\n    \t      \t\t\tthis.props.reRenderModal();\r\n    \t      \t\t}}\r\n    \t      \t>Удалить</button>\r\n    \t      </div>\r\n    \t    </div> \r\n    \t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\treRender: state.modalStorage.reRender,\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\treRenderModal: reRenderModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCard);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal, disableModal }  from './../../../store/actions/modalStorageActions';\r\nimport UIkit from 'uikit';\r\nimport ImageCard from './ImageCard';\r\n\r\nclass StorageModal extends Component {\r\n\tgetStorageElemsMap = () => {\r\n\t\tlet arr = [];\r\n\t\tfor (let i = 0; i < localStorage.length; i++) {\r\n\t\t\tlet map = new Map();\r\n\t\t\tlet key = localStorage.key(i);\r\n\t\t\tlet item = localStorage.getItem(key);\r\n\t\t\tmap.set(key, item);\r\n\t\t\tarr.push(map);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tclearHandle = () => {\r\n\t\tif (localStorage.length !== 0) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище было очищено.',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t\tthis.forceUpdate();\r\n\t\t} else \r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tlet listMap = this.getStorageElemsMap();\r\n\t\tlet list = listMap.map(item => (\r\n\t\t\t<ImageCard\r\n\t\t\t\tkey={Math.floor(Math.random() * 100000000)}\r\n\t\t\t\tstringKey={item.keys().next().value}\r\n\t\t\t\timgData={item.values().next().value}\r\n\t\t  />\r\n\t\t));\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-height-1-1\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className=\"uk-heading-line uk-text-center\">\r\n\t\t\t\t\t\t<span>Сохранённые изображения</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4>На данный момент сохранено {localStorage.length} {`${localStorage.length === 1? 'изображение' : 'изображений' }`}.</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch\">\r\n\t\t\t\t\t{list}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-flex uk-flex-around\">\r\n\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.clearHandle.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-right uk-margin-bottom uk-button-danger\"\r\n\t\t\t\t\t\t>Удалить всё</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.props.disableModal()}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-left uk-margin-bottom uk-button-primary\"\r\n\t\t\t\t\t\t>Закрыть</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen,\r\n\t\treRender: state.modalStorage.reRender\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StorageModal);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal }  from './../../store/actions/modalStorageActions';\r\nimport Modal from 'react-modal';\r\nimport StorageModal from './Storage/StorageModal';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nclass Storage extends Component {\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tonClickHandle = () => {\r\n\t\tthis.getCursor().style.display = 'none';\r\n\t\tthis.props.enableModal();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button storage\"\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={this.props.isOpen}\r\n\t\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<StorageModal />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal\r\n\t}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Storage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport UIkit from 'uikit';\r\n\r\nclass SaveToStorage extends Component {\r\n\thandleClick = () => {\r\n\t\tlet saveImg = this.props.ctx.canvas.toDataURL('image/png');\r\n\t\tlet name = `Name: Рисунок №${localStorage.length + 1}`;\r\n\t\tlet date = `Date: ${Date.now()}`;\r\n\t\tlet size = `Size: ${this.props.ctx.canvas.width} x ${this.props.ctx.canvas.height}`\r\n\t\tlet key = name + date + size;\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Изображение было сохранено в хранилище.',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(\"Storage failed: \" + e);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button cloud-upload\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nSaveToStorage.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(SaveToStorage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport SaveButton from './Panel/SaveButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\n\r\nclass Panel extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right\">\r\n\t\t\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<SaveButton />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</nav>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(Panel);","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n  }\r\n  return imageData;\r\n}\r\n\r\nexport const loadWebAssembly = fileName => {\r\n  return fetch(fileName)\r\n    .then(response => response.arrayBuffer())\r\n    .then(bits => {\r\n    \treturn WebAssembly.compile(bits)\r\n    })\r\n    .then(module => new WebAssembly.Instance(module));\r\n};","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\tresetSelectedObject\r\n} from './../store/actions/canvasActions';\r\n\r\nimport { \r\n\tchangeColor, \r\n\tchangePipetteColor\r\n} from './../store/actions/penActions';\r\n\r\nimport { \r\n\thexToRGB,\r\n\tfloodFillImageData,\r\n\t/*loadWebAssembly*/ \r\n} from './../modules/Tools';\r\nimport { Vector2 } from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tgetCanvas = () => this.refs.canvas;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\r\n\t\tthis.props.setContext(ctx);\r\n\r\n\t\tcanvas.width = window.innerWidth;\r\n\t\tcanvas.height = window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight;\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n\t\t});\r\n\r\n\t\tctx.strokeStyle = this.props.color;\r\n\t\tctx.lineJoin = \"round\";\r\n\t\tctx.lineCap = \"round\";\r\n\t\tctx.lineWidth = this.props.thickness;\r\n\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tif (this.props.penType !== 'none') {\r\n\t\t\tcursor.style.display = 'block';\r\n\t\t\tcursor.style.width = `${this.props.thickness + 5}px`;\r\n\t\t\tcursor.style.height = `${this.props.thickness + 5}px`;\r\n\t\r\n\t\t\tcursor.style.top = `${e.pageY - Number.parseInt(cursor.style.height)/2}px`;\r\n\t\t\tcursor.style.left = `${e.pageX - Number.parseInt(cursor.style.width)/2}px`;\r\n\t\r\n\t\t\tif (this.props.penType === 'pencil' || this.props.penType === 'paint-bucket') {\r\n\t\t\t\tcursor.style.backgroundColor  = `${this.props.color}`;\r\n\t\t\t} else if (this.props.penType === 'pipette') {\r\n\t\t\t\tcursor.style.backgroundColor  = `${this.props.pipetteColor}`;\r\n\t\t\t} else if (this.props.penType === 'eraser') {\r\n\t\t\t\tcursor.style.backgroundColor = '#ffffff';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcursor.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tthis.props.ctx.lineWidth = this.props.thickness;\r\n\t\tif (this.state.isDrawing && this.props.penType !== 'paint-bucket') {\r\n\t\t\tthis.props.ctx.beginPath();\r\n\t\t\tthis.props.ctx.setLineDash([0]);\r\n\r\n\t\t\tif (this.props.penType === 'pencil')\r\n\t\t\t\tthis.props.ctx.strokeStyle = this.props.color;\r\n\t\t\telse if (this.props.penType === 'pipette')\r\n\t\t\t\tthis.props.ctx.strokeStyle = this.props.pipetteColor;\r\n\t\t\telse if (this.props.penType === 'eraser')\r\n\t\t\t\tthis.props.ctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tthis.props.ctx.moveTo(this.state.lastX, this.state.lastY);\r\n\t\t\tthis.props.ctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n\t\t\tthis.props.ctx.stroke();\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tconst [x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\tconst imgData = this.props.ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tthis.props.changePipetteColor(`rgba(${pixel.join(',')})`);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tlet color = hexToRGB(this.props.color);\r\n\t\tlet imageData = this.props.ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {\r\n\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\ty: e.nativeEvent.offsetY\r\n\t\t}\r\n\t\tconst imgData = this.props.ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tthis.props.ctx.putImageData(floodFillImageData(imageData, color, startPoint, backgroundColor), 0, 0);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tif (this.props.penType === 'pipette') this.pickColor(e);\r\n\t\telse if (this.props.penType === 'paint-bucket') this.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tthis.props.ctx.lineWidth = 1;\r\n\t\tif (this.state.selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = this.state.lastX - this.state.selectStartX;\r\n\t\t\t\tlet height = this.state.lastY - this.state.selectStartY;\r\n\t\t\t\tthis.props.ctx.setLineDash([4, 4]);\r\n  \t\t\tthis.props.ctx.lineDashOffset = 0;\r\n\t\t\t\tthis.props.ctx.strokeRect(this.state.selectStartX, this.state.selectStartY, width, height);\r\n\t\t\t});\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas \r\n\t\t\t&& !(Object.entries(this.props.selectedObject).length === 0 \r\n\t\t\t&& this.props.selectedObject.constructor === Object)) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t//\tUIkit.notification({message: 'Notification message'});\r\n\t\t\t//this.props.resetSelectedObject();\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref=\"canvas\" \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonMouseMove={e => {\r\n\t\t\t\t\t\tlet canvas = this.getCanvas();\r\n\t\t\t\t\t\tif (this.props.isSelecting) {\r\n\t\t\t\t\t\t\tthis.selectingDraw(e);\r\n\t\t\t\t\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.draw(e);\r\n\t\t\t\t\t\t\tcanvas.style.cursor = 'none';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseDown={e => {\r\n\t\t\t\t\t\tif (this.props.isSelecting) {\r\n\t\t\t\t\t\t\tlet canvas = this.getCanvas();\r\n\t\t\t\t\t\t\tlet imageData = this.props.ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tselectStartX: this.state.selectStartX === undefined ? e.nativeEvent.offsetX : this.state.selectStartX,\r\n\t\t\t\t\t\t\t\tselectStartY: this.state.selectStartY === undefined ? e.nativeEvent.offsetY : this.state.selectStartY,\r\n\t\t\t\t\t\t\t\tbeforeImageData: !this.state.selectStart ? imageData : this.state.beforeImageData,\r\n\t\t\t\t\t\t\t\tselectStart: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tisDrawing: this.state.isSelecting ? false : true,\r\n\t\t\t\t\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\t\t\t\t\tlastY: e.nativeEvent.offsetY,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseUp={e => {\r\n\t\t\t\t\t\tif (this.props.isSelecting) {\r\n\t\t\t\t\t\t\tlet width = this.state.lastX - this.state.selectStartX;\r\n\t\t\t\t\t\t\tlet height = this.state.lastY - this.state.selectStartY;\r\n\t\t\t\t\t\t\tlet selectObject = {\r\n\t\t\t\t\t\t\t\tstartVector: new Vector2(this.state.selectStartX, this.state.selectStartY),\r\n\t\t\t\t\t\t\t\tendVector: new Vector2(this.state.lastX, this.state.lastY)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.props.updateSelectedObject(selectObject);\r\n\t\t\t\t\t\t\tthis.props.ctx.setLineDash([4, 4]);\r\n\t\t\t\t\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\t\t\t\t\tthis.props.ctx.strokeRect(this.state.selectStartX, this.state.selectStartY, width, height);\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tselectStartX: undefined,\r\n\t\t\t\t\t\t\t\tselectStartY: undefined,\r\n\t\t\t\t\t\t\t\tselectStart: false,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tisDrawing: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tisDrawing: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t</canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpipetteColor: state.penProperty.pipetteColor,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeColor: changeColor,\r\n\t\tchangePipetteColor: changePipetteColor,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired,\r\n\tchangePipetteColor: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React from 'react';\r\n\r\nconst DisplayError = () => {\r\n\treturn(\r\n\t\t<div className=\"uk-container uk-margin-small-top\">\r\n\t\t\t<div className=\"uk-card uk-card-default uk-width-1-2@m\">\r\n\t\t\t\t<div className=\"uk-card-header\">\r\n\t\t\t\t\t<div className=\"uk-grid-small uk-flex-middle\" uk-grid=\"true\">\r\n\t\t\t\t\t  <div className=\"uk-width-expand uk-flex uk-flex-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"uk-card-title uk-margin-remove-bottom\">Ваш браузер не поддерживается</h3>\r\n\t\t\t\t\t \t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-card-body uk-flex uk-flex-center\">\r\n\t\t\t\t  <button className=\"uk-button uk-button-danger uk-button-small\">Кинуть в faramo_zayw тапок</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DisplayError;","import React, { Component } from 'react';\r\nimport './../css/App.css';\r\nimport Panel from './Panel';\r\nimport Canvas from './Canvas';\r\nimport DisplayError from './DisplayError';\r\n\r\nclass App extends Component {\r\n  render() {\r\n  \tconst app = !(window.innerWidth < 768) ? \r\n    (\r\n      <div className=\"App\">\r\n\t\t  \t<Panel />\r\n\t\t  \t<Canvas /> \r\n\t\t  </div>\r\n    ) : <DisplayError />;\r\n\r\n    return (\r\n    \t<div>\r\n    \t\t{app}\r\n    \t</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n\tpipetteColor: '#000000'\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","const storageModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default storageModal;\r\n","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\nimport modalStorageReducer from './store/reducers/modalStorageReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer,\r\n\t\"modalStorage\": modalStorageReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PIPETTE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpipetteColor: action.payload\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tresetCanvas: state.isSelecting ? true : false\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\t//selectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'RESET_SELECT_OBJECT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import storageModal from './../data/storageModal';\r\n\r\nexport default (state = storageModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tcase 'RE_RENDER_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\treRender: Math.random() * 10\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tapplyMiddleware(thunk), \r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}