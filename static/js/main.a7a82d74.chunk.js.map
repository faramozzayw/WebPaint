{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","modules/Tools.js","components/Panel/DownloadButton.jsx","modules/PenTypeConsts.js","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","store/actions/modalStorageActions.js","modules/StorageTools.js","components/Panel/Storage/ImageCard.jsx","components/Panel/Storage/StorageModal.jsx","components/Panel/Storage.jsx","components/Panel/Storage/SaveToStorage.jsx","store/actions/infoModalActions.js","components/InfoBox.jsx","components/Panel/InfoBoxModal.jsx","components/Panel.jsx","components/PanelMobile.jsx","modules/ColorTools.js","components/Canvas.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","store/data/storageModal.js","store/data/infoModal.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","store/reducers/modalStorageReducer.js","store/reducers/infoModalReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","connect","state","thickness","penProperty","dispatch","bindActionCreators","_ref","react_default","a","createElement","className","onChange","e","target","color","htmlFor","id","ClearButton","handleClick","ctx","_this","props","rect","canvas","width","height","fillStyle","fill","uk-tooltip","onClick","this","Component","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","resetSelectedObject","updateSelectedObject","Vector2","x","y","Object","classCallCheck","Array","isArray","console","log","TypeError","Error","Number","_thisX","_thisY","isFinite","VectorStart","VectorEnd","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","blue","stack","length","pop","pointColor","r","data","g","b","push","chkObjForNonEmptiness","object","entries","constructor","DownloadButton","link","React","createRef","isSelecting","selectedObject","current","href","document","querySelector","toDataURL","localCtx","getContext","size","getBoxSize","startVector","endVector","Math","abs","getImageData","imageDate","putImageData","remove","download","UIkit","notification","message","concat","pos","timeout","ref","downloadCanvasAsImg","bind","pencil","pipette","eraser","paintBucket","none","UploadButton","persist","window","File","FileReader","FileList","Blob","confirm","files","file","reader","onload","event","_ref2","result","Image","dataUri","image","innerHeight","innerWidth","drawImage","src","onerror","err","error","code","readAsDataURL","alert","uploadImgAsCanvas","Selection","_this$props","enableModal","disableModal","reRenderModal","sortByDateNewOld","elem1","elem2","regexDate","key1","keys","next","key2","date1","parseInt","match","replace","sortByDateOldNew","getStorageElemsMap","arr","i","localStorage","map","Map","key","test","item","getItem","set","ImageCard","showEditForm","editInput","onCanvas","finishEditName","_this$props2","stringKey","date","removeItem","setItem","setState","deleteImg","_this$props3","headerClick","prevState","disableEditForm","_this$props4","imgData","info","string","name","regexSize","String","Date","parseKey","hidden","alt","defaultValue","PureComponent","StorageModal","sortBy","clearHandle","clear","forceUpdate","handleChange","autosaveControlClick","str","autosave","docCookies","JSON","parse","toString","downloadAllImg","list","body","appendChild","regexName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","elem","values","click","return","removeChild","listMap","sort","Storage_ImageCard","floor","random","isOpen","modalStorage","reRender","style","display","lib_default","ariaHideApp","contentLabel","Storage_StorageModal","SaveToStorage","now","imgSize","saveImg","context","enableInfoModal","disableInfoModal","infoModal","uk-overlay-icon","components_InfoBox","penType","uk-navbar","Panel_ColorPicker","Panel_Thickness","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_DownloadButton","Panel_UploadButton","Storage_SaveToStorage","Storage","Panel_InfoBoxModal","uk-toggle","uk-offcanvas","hexToRGB","hex","slice","rgbaToHex","rgba","filter","join","Canvas","mobile","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","getCursor","cursor","top","pageY","left","pageX","pickColor","changedTouches","clientX","py","clientY","clientHeight","nativeEvent","offsetX","offsetY","floodFill","rgbColor","draw","_this$state","_e$nativeEvent","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","stroke","touchMoveEventLister","_this$props5","_this$state2","touches","touchStartEventLister","touchEndEventLister","onClickHandle","selectingDraw","_this$state3","lineDashOffset","strokeRect","onMouseMoveEvent","onMouseDownEvent","_this$props6","_this$state4","_e$nativeEvent2","onMouseUpEvent","_this$state5","_this$props7","onMouseOutEvent","_this2","_this$props8","navigator","userAgent","lineJoin","lineCap","resetCanvas","onTouchMove","onTouchStart","onMouseOut","onTouchEnd","onTouchCancel","onMouseMove","onMouseDown","onMouseUp","App","onUnload","hasItem","addEventListener","removeEventListener","app","components_PanelMobile","components_Canvas","components_Panel","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","storageModal","rootReducer","combineReducers","arguments","action","objectSpread","assign","store","createStore","compose","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","URL","process","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.a7a82d74.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nconst Thickness = ({ changeThickness }) =>  (\r\n\t<div>\r\n\t\t<label className=\"thickness\">Толщина шрифта:\r\n\t\t\t<select \r\n\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\tonChange={e => changeThickness(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t1\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t2\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t4\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t8\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t16\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t32\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t64\r\n\t\t\t\t</option>\r\n\t\t\t</select>\r\n\t\t</label>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nconst ColorPicker = ({ changeColor }) => (\r\n\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t<input \r\n\t\t\ttype=\"color\" \r\n\t\t\tid=\"colorPicker\" \r\n\t\t\tonChange={e => changeColor(e.target.value)} \r\n\t\t/>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tlet { ctx } = this.props;\r\n\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Очистить холст\"\r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button trash icon\" \r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetSelectedObject = () => {\r\n\treturn {\r\n\t\ttype: 'RESET_SELECT_OBJECT'\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export default class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n}","export const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t\t]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t\t]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t\t]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn imageData;\r\n}\r\n\r\nexport const chkObjForEmptiness = object => (Object.entries(object).length === 0 && object.constructor === Object) ? true : false;\r\nexport const chkObjForNonEmptiness = object => !(Object.entries(object).length === 0 && object.constructor === Object) ? true : false;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tresetCanvasActions, \r\n\tresetSelectedObject \r\n}  from './../../store/actions/canvasActions';\r\n\r\nimport Vector2 from './../../modules/Vector2';\r\nimport { chkObjForNonEmptiness } from './../../modules/Tools' \r\nimport UIkit from 'uikit';\r\n\r\nclass DownloadButton extends Component {\r\n\tlink = React.createRef()\r\n\r\n\tasync downloadCanvasAsImg(e) {\r\n\t\tlet { \r\n\t\t\tisSelecting, \r\n\t\t\tresetSelectedObject,\r\n\t\t\tresetCanvasActions,\r\n\t\t\tselectedObject\r\n\t\t} = this.props;\r\n\r\n\t\tlet link = this.link.current;\r\n\t\t\r\n\t\tif (!isSelecting)\r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\t\r\n\t\telse if (isSelecting && chkObjForNonEmptiness(selectedObject)) {\r\n\t\t\tlet { ctx } = this.props;\r\n\r\n\t\t\tawait resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet localCtx = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tlocalCtx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t\tresetSelectedObject();\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\tlink.download = 'canvasImage.png';\r\n\t\tUIkit.notification({\r\n\t\t\tmessage: `${\r\n\t\t\t\tisSelecting ? \r\n\t\t\t\t\"Фрагмент был сохранён на устройство\"\r\n\t\t\t\t: \"Холст был сохранён на устройство\"\r\n\t\t\t}`,\r\n\t\t\tpos: 'bottom-right',\r\n\t\t\ttimeout: 2500\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\tuk-tooltip=\"Скачать холст\"\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref={this.link}\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button download icon\"\r\n\t\t\t\t\tonClick={this.downloadCanvasAsImg.bind(this)}\r\n\t\t\t\t> </a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nDownloadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tresetSelectedObject: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DownloadButton);","export const pencil = 'pencil';\r\nexport const pipette = 'pipette';\r\nexport const eraser = 'eraser';\r\nexport const paintBucket = 'paint-bucket';\r\nexport const none = 'none';","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { pipette } from './../../modules/PenTypeConsts';\r\n\r\nconst Pipette = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Пипетка\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette icon\" \r\n\t\t\tonClick={() => changePenType(pipette)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { pencil } from './../../modules/PenTypeConsts';\r\n\r\nconst Pen = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Ручка\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button pencil icon\" \r\n\t\t\tonClick={() => changePenType(pencil)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { eraser } from './../../modules/PenTypeConsts';\r\n\r\nconst Eraser = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Ластик\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser icon\" \r\n\t\t\tonClick={() => changePenType(eraser)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport UIkit from 'uikit';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif(window.File || window.FileReader || window.FileList || window.Blob){\r\n\t\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\t\tlet { ctx } = this.props;\r\n\t\t\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\t\tawait ctx.fill();\r\n\r\n\t\t\t\tlet [file, reader] = [e.target.files[0], new FileReader()];\r\n\t\t\t\r\n\t\t\t\treader.onload = event => {\r\n\t\t\t\t\tlet [dataUri, image] = [event.target.result, new Image()];\r\n\r\n\t\t\t\t\timage.onload = () => {\r\n\t\t\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) \r\n\t\t\t\t\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\t\t\t\telse if (image.height > window.innerHeight) \r\n\t\t\t\t\t\t\tctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\r\n\t\t\t\t\t\telse if (image.width > window.innerWidth) \r\n\t\t\t\t\t\t\tctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\timage.src = dataUri;\r\n\t\t\t\t\tUIkit.notification({\r\n\t\t\t\t\t\tmessage: `Файл был удачно загружен`,\r\n\t\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treader.onerror = err => {\r\n\t\t\t\t\tconsole.log(`Error loading file. Code: ${err.target.error.code}`);\r\n\t\t\t\t\tUIkit.notification({\r\n\t\t\t\t\t\tmessage: `При загрузке файла произошла ошибка, попробуйте снова.`,\r\n\t\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\talert(\"Ваш браузер не поддерживает эту функцию :(\");\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tuk-tooltip=\"Загрузить фото\"\r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button upload icon\"\r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(UploadButton);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { paintBucket } from './../../modules/PenTypeConsts';\r\n\r\nconst FloodFill  = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Заливка цветом\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button paint-bucket icon\" \r\n\t\t\tonClick={() => changePenType(paintBucket)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tlet { \r\n\t\t\tchangeIsSelecting, \r\n\t\t\tisSelecting, \r\n\t\t\tresetCanvasActions\r\n\t\t} = this.props;\r\n\r\n\t\tchangeIsSelecting(true);\r\n\t\tif (isSelecting) \r\n\t\t\tresetCanvasActions(true);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Выделение области\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection icon\" \r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tchangeIsSelecting: PropTypes.func.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","export const enableModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const reRenderModal = () => {\r\n\treturn {\r\n\t\ttype: 'RE_RENDER_MODAL'\r\n\t}\r\n}","export const sortByDateNewOld = (elem1, elem2) => {\r\n\tlet regexDate = /Date: (\\d+)(?=Size)/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\r\n\treturn date2 - date1; // от новых к старым\r\n}\r\n\r\nexport const sortByDateOldNew  = (elem1, elem2) => {\r\n\tlet regexDate = /Date: (\\d+)(?=Size)/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\r\n\treturn date1 - date2; // от старых к новым\r\n}\r\n\r\nexport const parseKey = string => {\r\n\tlet regexName = /Name: (.*?)(?=Date)/g;\r\n\tlet name = string.match(regexName)[0].replace(/Name: (.*)/, \"$1\");\r\n\r\n\tlet regexDate = /Date: (\\d+)/g;\r\n\tlet resultRegexDate = /^.*(?= GMT)/g;\r\n\tlet date = Number.parseInt(string.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10)\r\n\tdate = String(new Date(date));\r\n\tdate = date.match(resultRegexDate)[0];\r\n\r\n\tlet regexSize = /Size: (.*)$/g;\r\n\tlet size = string.match(regexSize)[0].replace(regexSize, \"$1\");\r\n\r\n\treturn {\r\n\t\tname: name,\r\n\t\tdate: date,\r\n\t\tsize: size\r\n\t}\r\n}\r\n\r\nexport const getStorageElemsMap = () => {\r\n\tlet arr = [];\r\n\tfor (let i = 0; i < localStorage.length; i++) {\r\n\t\tlet map = new Map();\r\n\t\tlet key = localStorage.key(i);\r\n\t\tlet pattern = /^Name:.*Date: \\d+/\r\n\t\tif(pattern.test(key)) {\r\n\t\t\tlet item = localStorage.getItem(key);\r\n\t\t\tmap.set(key, item);\r\n\t\t\tarr.push(map);\r\n\t\t} else \r\n\t\t\tcontinue;\r\n\t}\r\n\treturn arr;\r\n}","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { \r\n\treRenderModal, \r\n\tdisableModal \r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport { parseKey } from './../../../modules/StorageTools';\r\n\r\nclass ImageCard extends PureComponent {\r\n\tstate = {\r\n\t\tshowEditForm: false\r\n\t}\r\n\r\n\teditInput = React.createRef()\r\n\timage = React.createRef()\r\n\r\n\tonCanvas = () => {\r\n\t\tlet { ctx, disableModal } = this.props;\r\n\t\tctx.drawImage(this.image.current, 0, 0);\r\n\t\tdisableModal();\r\n\t}\r\n\r\n\tfinishEditName = e => {\r\n\t\tlet { stringKey, reRenderModal } = this.props;\r\n\t\tlet date = localStorage.getItem(stringKey);\r\n\r\n\t\tlocalStorage.removeItem(stringKey);\r\n\r\n\t\tlet regexName = /Name: .*?(?=Date)/g;\r\n\t\tstringKey = stringKey.replace(regexName, `Name: ${this.editInput.current.value}`);\r\n\t\t\r\n\t\tlocalStorage.setItem(stringKey, date);\r\n\t\tthis.setState({\r\n\t\t\tshowEditForm: false\r\n\t\t}, reRenderModal);\r\n\t}\r\n\r\n\tdeleteImg = e => {\r\n\t\tlet { stringKey, reRenderModal } = this.props;\r\n\t\tlocalStorage.removeItem(stringKey);\r\n\t\treRenderModal();\r\n\t}\r\n\r\n\theaderClick = e => {\r\n\t\tthis.setState(prevState => {\r\n\t\t\treturn {\r\n\t\t\t\tshowEditForm: !prevState.showEditForm \r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdisableEditForm = () => this.setState({ showEditForm: false })\r\n\r\n\trender() {\r\n\t\tlet { stringKey, imgData } = this.props;\r\n\t\tlet { showEditForm } = this.state;\r\n\t\tlet info = parseKey(stringKey);\r\n\t\tlet hidden = !showEditForm ? \"uk-hidden\" : \"\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-bottom uk-margin-left uk-card uk-width-medium uk-card-default uk-flex uk-flex-column uk-flex-between\">\r\n\t\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-flex-1\">\r\n\t\t\t\t\t<div className=\"uk-card-media-top uk-card-header\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"image-border\"\r\n\t\t\t\t\t\tsrc={imgData}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tref={this.image}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"uk-card-body padding\">\r\n\t\t\t\t\t\t<h4 \r\n\t\t\t\t\t\t\tclassName=\"uk-card-title uk-heading-bullet\"\r\n\t\t\t\t\t\t\tonClick={this.headerClick}\r\n\t\t\t\t\t\t>{info.name}</h4>\r\n\t\t\t\t\t\t<div id=\"editBox\" className={`${hidden} uk-margin-small-bottom`}>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tclassName=\"uk-input uk-form-width-small uk-form-small\" \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tdefaultValue={info.name} \r\n\t\t\t\t\t\t\t\tref={this.editInput}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button icon check\" \r\n\t\t\t\t\t\t\t\tonClick={this.finishEditName}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button icon close\" \r\n\t\t\t\t\t\t\t\tonClick={this.disableEditForm}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>Дата создания файла: <br/>{info.date}</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>Размеры: {info.size}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-button-group image-button-group uk-width-1-1 uk-child-width-1-2@m uk-child-width-1-1\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-primary\"\r\n\t\t\t\t\t\tonClick={this.onCanvas}\r\n\t\t\t\t\t>На холст</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-danger\"\r\n\t\t\t\t\t\tonClick={this.deleteImg}\r\n\t\t\t\t\t>Удалить</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\treRenderModal: reRenderModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nImageCard.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\treRenderModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCard);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport { \r\n\tenableModal, \r\n\tdisableModal\r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport UIkit from 'uikit';\r\nimport ImageCard from './ImageCard';\r\nimport { \r\n\tsortByDateNewOld, \r\n\tsortByDateOldNew,\r\n\tgetStorageElemsMap\r\n} from './../../../modules/StorageTools';\r\n\r\nclass StorageModal extends Component {\r\n\tstate = {\r\n\t\tsortBy: 'По дате(от новых к старым)'\r\n\t}\r\n\r\n\tclearHandle = () => {\r\n\t\tif(window.confirm('Вы уверены, что хотите удалить ВСЕ изображения?')) {\r\n\t\t\tif (localStorage.length !== 0) {\r\n\t\t\t\tlocalStorage.clear();\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: 'Хранилище было очищено.',\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2500\r\n\t\t\t\t});\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t} else \r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2500\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = event => this.setState({ sortBy: event.target.value })\r\n\r\n\tautosaveControlClick = () => {\r\n\t\tlet str = \"autosaveEnable\";\r\n\t\tlet autosave = docCookies.getItem(str);\r\n\t\tif(autosave !== null) {\r\n\t\t\tdocCookies.setItem(str, (!JSON.parse(autosave)).toString());\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadAllImg = () => {\r\n\t\tlet list = getStorageElemsMap();\r\n\t\tif(list.length === 0) {\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet link = document.createElement('a');\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlet regexName = /Name: .*?(?=Date)/g;\r\n\r\n\t\t\tfor(let elem of list) {\r\n\t\t\t\tlet key = elem.keys().next().value\r\n\t\t\t\tlet name = key.match(regexName)[0];\r\n\t\t\t\tname = name.replace(/Name: (.*)/, \"$1\");\r\n\t\t\t\tlink.download = `${name}.png`;\r\n\t\t\t\tlink.href = elem.values().next().value;\r\n\t\t\t\tlink.click();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet listMap = getStorageElemsMap();\r\n\t\tlet { sortBy } = this.state;\r\n\t\tlet { disableModal } = this.props;\r\n\t\t\r\n\t\tif (sortBy === 'По дате(от новых к старым)') \r\n\t\t\tlistMap = listMap.sort(sortByDateNewOld);\r\n\t\telse if(sortBy === 'По дате(от старых к новым)')\r\n\t\t\tlistMap = listMap.sort(sortByDateOldNew);\r\n\r\n\t\tlet list = listMap.map(item => (\r\n\t\t\t<ImageCard\r\n\t\t\t\tkey={Math.floor(Math.random() * 100000000)}\r\n\t\t\t\tstringKey={item.keys().next().value}\r\n\t\t\t\timgData={item.values().next().value}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\tconst autosave = JSON.parse(docCookies.getItem(\"autosaveEnable\"));\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-height-1-1\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className=\"uk-heading-line uk-text-center\">\r\n\t\t\t\t\t\t<span>Сохранённые изображения</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4>На данный момент сохранено {localStorage.length} {`${localStorage.length === 1 ? 'изображение' : 'изображений' }`}.</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<fieldset className=\"uk-fieldset\">\r\n\t\t\t\t\t\t\t<legend className=\"uk-legend\">Сортировать: </legend>\r\n\t\t\t\t\t\t\t<div className=\"uk-margin\">\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclassName=\"uk-select uk-width-medium\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.sortBy}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от новых к старым)\">По дате(от новых к старым)</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от старых к новым)\">По дате(от старых к новым)</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch uk-flex-top\">\r\n\t\t\t\t\t{list}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-flex uk-flex-around uk-button-group uk-flex-wrap\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.downloadAllImg}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-default uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Скачать всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.autosaveControlClick}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-secondary uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>{`${autosave ? \"Выключить\" : \"Включить\"} автосохранение`}</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.clearHandle}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-danger uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Удалить всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => disableModal()}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-primary uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Закрыть</button>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen,\r\n\t\treRender: state.modalStorage.reRender,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal,\r\n\t\tdisableModal: disableModal,\r\n\t}, dispatch);\r\n}\r\n\r\nStorageModal.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\treRender: PropTypes.number.isRequired,\r\n\tenableModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StorageModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal }  from './../../store/actions/modalStorageActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport StorageModal from './Storage/StorageModal';\r\n\r\nconst ShowStorage = ({ isOpen, enableModal }) => {\r\n\tconst enableHandle = () => {\r\n\t\tdocument.querySelector('.cursor').style.display = 'none';\r\n\t\tenableModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t<span\r\n\t\t\t\tuk-tooltip=\"Открыть хранилище\"\r\n\t\t\t\tclassName=\"uk-icon uk-icon-button storage icon\"\r\n\t\t\t\tonClick={() =>enableHandle()}\r\n\t\t\t></span>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isOpen}\r\n\t\t\t\tariaHideApp={false}\r\n\t\t\t\tcontentLabel=\"Show storage Modal\"\r\n\t\t\t>\r\n\t\t\t\t<StorageModal />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal\r\n\t}, dispatch);\r\n}\r\n\r\nShowStorage.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired, \r\n\tenableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowStorage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport UIkit from 'uikit';\r\nimport { bindActionCreators } from 'redux';\r\nimport { resetCanvasActions }  from './../../../store/actions/canvasActions';\r\nimport Vector2 from './../../../modules/Vector2';\r\n\r\nclass SaveToStorage extends Component {\r\n\tasync handleClick() {\r\n\t\tlet { ctx, isSelecting } = this.props;\r\n\t\tlet saveImg;\r\n\t\tlet name = `Name: Рисунок №${localStorage.length + 1}`;\r\n\t\tlet date = `Date: ${Date.now()}`;\r\n\t\tlet key, imgSize;\r\n\r\n\t\tif (!isSelecting) {\r\n\t\t\timgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tsaveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t} else {\r\n\t\t\tlet { selectedObject, resetCanvasActions } = this.props;\r\n\t\t\tawait resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet context = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\timgSize = `Size: ${Math.abs(size.width)} x ${Math.abs(size.height)}`;\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\t\t\tcontext.putImageData(imageDate, 0, 0);\r\n\t\t\tsaveImg = canvas.toDataURL('image/png');\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\tkey = name + date + imgSize;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: `${isSelecting ? \r\n\t\t\t\t\t'Фрагмент был сохранён в хранилище.' \r\n\t\t\t\t\t: 'Холст был сохранён в хранилище.'\r\n\t\t\t\t}`,\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(\"Storage failed:\", e);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Сохранить в хранилище\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button cloud-upload icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t}, dispatch);\r\n}\r\n\r\nSaveToStorage.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveToStorage);","export const enableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_INFO_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_INFO_MODAL'\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { disableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nconst InfoBox = ({ disableInfoModal }) => (\r\n\t<div id=\"info-box\">\r\n\t\t<div className=\"uk-margin-medium-bottom\">\r\n\t\t\t<h1 className=\"uk-heading-divider uk-flex uk-flex-between uk-margin-small-left uk-margin-small-right\">\r\n\t\t\tКраткая справка:\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-margin-left uk-icon-button close icon uk-overlay\" uk-overlay-icon=\"true\" \r\n\t\t\t\t\tonClick={() => disableInfoModal()}\r\n\t\t\t\t></span>\r\n\t\t\t</h1>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<ul>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pencil icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle \">Ручка. Используется для того, чтобы рисовать линии</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pipette icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Пипетка. Даёт возможность получить цвет в определённой точке холста</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle eraser icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Ластик. Ластик используется для очистки произвольного фрагмента</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle paint-bucket icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Заливка. Можно использовать для заливки области</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle selection icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Выделение. Выделив часть холста можно сохранить её либо на компьютер, либо в хранилище</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle trash icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Очищает холст</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle download icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Скачивание. Скачивает либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i></span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle upload icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Загрузка. Загружает выбранное изображение(<span className=\"uk-text-warning\">изображене будет сжато, если его размеры будут больше размеров холста</span>)</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle cloud-upload icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Сохранение. Сохранение либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i> в Хранилище</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle storage icon\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище. Открывает окно, где храняться сохранённые изображения</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle info icon\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Справка. Открывает окно с краткой справкой</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<h3>Хранилище</h3>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище - место, куда можно сохранить изображения без скачивания их на компьютер, а также место, куда сохраняются изображения при обновлени/закрытии вкладки. Можно удалить все изображения, скачать их, включить/выключить сохранение изображения при обновлени/закрытии вкладки(если включено автосохранение). Имя изображения можно изменить кликнув на него</span>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tdisableInfoModal: disableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBox.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\tdisableInfoModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBox);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableInfoModal }  from './../../store/actions/infoModalActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport InfoBox from './../InfoBox';\r\n\r\nconst InfoBoxModal = ({ isOpen, enableInfoModal }) => {\r\n\tconst enableHandle = () => {\r\n\t\tdocument.querySelector('.cursor').style.display = 'none';\r\n\t\tenableInfoModal();\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t<span\r\n\t\t\t\tuk-tooltip=\"Помощь\"\r\n\t\t\t\tclassName=\"uk-icon uk-icon-button info icon\"\r\n\t\t\t\tonClick={() => enableHandle()}\r\n\t\t\t></span>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isOpen}\r\n\t\t\t\tariaHideApp={false}\r\n\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t>\r\n\t\t\t\t<InfoBox />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBoxModal.propTypes = {\r\n\tisOpen: PropTypes.bool,\r\n\tenableInfoModal: PropTypes.func\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBoxModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport DownloadButton from './Panel/DownloadButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst Panel = ({penType, isSelecting}) => (\r\n\t<div>\r\n\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<DownloadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left  uk-margin-medium-right\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Panel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport DownloadButton from './Panel/DownloadButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst PanelMobile = ({ penType, infoModal, modalStorage }) => (\r\n\t<div>\r\n\t\t<button className=\"uk-button uk-button-primary uk-width-1-1 panel-mobile border-x-none\" type=\"button\" uk-toggle=\"target: #offcanvas-nav-default\">Меню</button>\r\n\t\t<div id=\"offcanvas-nav-default\" uk-offcanvas={`${(infoModal || modalStorage) ? \"overlay: false\" : \"overlay: true\"}`}>\r\n\t\t\t<div className=\"uk-offcanvas-bar uk-flex uk-flex-column\">\r\n\r\n\t\t\t\t<ul className=\"uk-nav uk-nav-default uk-nav-center\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'pencil' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'pipette' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'eraser' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'paint-bucket' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<DownloadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tinfoModal: state.infoModal.isOpen,\r\n\t\tmodalStorage: state.modalStorage.isOpen,\r\n\t}\r\n}\r\n\r\nPanelMobile.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tinfoModal: PropTypes.bool.isRequired,\r\n\tmodalStorage: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(PanelMobile);","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const rgbaToHex = rgba => {\r\n\tlet match = rgba.match(/(\\d+)/g);\r\n\tmatch = match.filter((e, i) => i !== 3);\r\n\tmatch = match.map(elem => {\r\n\t\tlet a = Number.parseInt(elem, 10).toString(16);\r\n\t\treturn a.length !== 1 ? a : \"0\" + a;\r\n\t});\r\n\treturn \"#\"+match.join(\"\");\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\tresetSelectedObject,\r\n\tchangePenType\r\n} from './../store/actions/canvasActions';\r\n\r\nimport {\r\n\tpencil,\r\n\tpipette,\r\n\teraser,\r\n\tpaintBucket,\r\n\tnone\r\n} from './../modules/PenTypeConsts';\r\n\r\nimport { changeColor } from './../store/actions/penActions';\r\n\r\nimport { \r\n\tfloodFillImageData,\r\n\tchkObjForNonEmptiness,\r\n} from './../modules/Tools';\r\n\r\nimport { \r\n\thexToRGB,\r\n\trgbaToHex\r\n} from './../modules/ColorTools';\r\n\r\nimport Vector2 from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tmobile: false,\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tcanvas = React.createRef();\r\n\r\n\tgetCanvas = () => this.canvas.current;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\t\tlet { \r\n\t\t\tsetContext,\r\n\t\t\tcolor,\r\n\t\t\tthickness\r\n\t\t} = this.props;\r\n\t\tsetContext(ctx);\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height),\r\n\t\t\tmobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\r\n\t\t}, () => {\r\n\t\t\tcanvas.width = window.innerWidth;\r\n\t\t\tcanvas.height = !this.state.mobile\r\n\t\t\t? window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight \r\n\t\t\t: window.innerHeight - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\t\r\n\t\t\tctx.strokeStyle = color;\r\n\t\t\tctx.lineJoin = \"round\";\r\n\t\t\tctx.lineCap = \"round\";\r\n\t\t\tctx.lineWidth = thickness;\r\n\t\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tctx.fill();\r\n\t\t});\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tlet { \r\n\t\t\tpenType, \r\n\t\t\tthickness, \r\n\t\t\tcolor \r\n\t\t} = this.props;\r\n\r\n\t\tlet { style } = cursor;\r\n\r\n\t\tif (penType !== none) {\r\n\t\t\tstyle.display = 'block';\r\n\t\t\tstyle.width = `${thickness + 5}px`;\r\n\t\t\tstyle.height = `${thickness + 5}px`;\r\n\t\r\n\t\t\tstyle.top = `${e.pageY - Number.parseInt(style.height)/2}px`;\r\n\t\t\tstyle.left = `${e.pageX - Number.parseInt(style.width)/2}px`;\r\n\t\r\n\t\t\tif (penType === pencil) \r\n\t\t\t\tstyle.backgroundColor  = `${color}`;\r\n\r\n\t\t\telse if(penType === paintBucket) {\r\n\t\t\t\tstyle.backgroundColor  = `${color}`;\r\n\t\t\t\tstyle.width = `16px`;\r\n\t\t\t\tstyle.height = `16px`;\r\n\r\n\t\t\t} else if (penType === pipette) {\r\n\t\t\t\tstyle.backgroundColor  = `${color}`;\r\n\t\t\t\tstyle.width = `8px`;\r\n\t\t\t\tstyle.height = `8px`;\r\n\r\n\t\t\t} else if (penType === eraser) \r\n\t\t\t\tstyle.backgroundColor = '#ffffff';\r\n\r\n\t\t} else \r\n\t\t\tstyle.display = 'none';\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tlet { mobile } = this.state;\r\n\t\tlet { changeColor, changePenType, ctx } = this.props;\r\n\r\n\t\tlet x, y;\r\n\t\tif (!mobile)\r\n\t\t\t[x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\telse if(mobile) {\r\n\t\t\tx = Math.floor(e.changedTouches[0].clientX);\r\n\t\t\tlet py = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(py >= 0)\r\n\t\t\t\ty = py;\r\n\t\t}\r\n\t\tconst imgData = ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tconst color = `rgba(${pixel.join(',')})`;\r\n\t\tchangeColor(rgbaToHex(color));\r\n\t\tchangePenType(pencil);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tlet { color, ctx } = this.props;\r\n\t\tlet rgbColor = hexToRGB(color);\r\n\t\tlet imageData = ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {};\r\n\r\n\t\tlet { mobile } = this.state;\r\n\r\n\t\tif(!mobile) {\r\n\t\t\tstartPoint = {\r\n\t\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\t\ty: e.nativeEvent.offsetY\r\n\t\t\t}\r\n\t\t} else if(mobile) {\r\n\t\t\tlet x = Math.floor(e.changedTouches[0].clientX);\r\n\t\t\tlet y = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tstartPoint = {\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst imgData = ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tctx.putImageData(floodFillImageData(imageData, rgbColor, startPoint, backgroundColor), 0, 0);\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\t\r\n\t\tlet {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color \t\r\n\t\t} =  this.props;\r\n\t\tlet { lastX, lastY, isDrawing } = this.state;\r\n\t\tlet { offsetX, offsetY } = e.nativeEvent;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil || penType === pipette)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tctx.moveTo(lastX, lastY);\r\n\t\t\tctx.lineTo(offsetX, offsetY);\r\n\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: offsetX,\r\n\t\t\t\tlastY: offsetY\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\ttouchMoveEventLister = e => {\r\n\t\tlet {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color \t\r\n\t\t} =  this.props;\r\n\t\tlet { lastX, lastY, isDrawing } = this.state;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil || penType === pipette)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tlet x = Math.floor(e.touches[0].clientX);\r\n\t\t\tlet y = Math.floor(e.touches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tctx.moveTo(lastX, lastY);\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tlastX: x,\r\n\t\t\t\t\tlastY: y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\ttouchStartEventLister = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tlet\tx = Math.floor(e.changedTouches[0].clientX);\r\n\t\tlet\ty = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\r\n\t\tif(penType === pencil || penType === eraser) {\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisDrawing: true,\r\n\t\t\t\t\tlastX: x,\r\n\t\t\t\t\tlastY: y,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\ttouchEndEventLister = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tif (penType === pipette) \r\n\t\t\tthis.pickColor(e);\r\n\t\telse if (penType === paintBucket)\r\n\t\t\tthis.floodFill(e);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tif (penType === pipette) \r\n\t\t\tthis.pickColor(e);\r\n\t\telse if (penType === paintBucket) \r\n\t\t\tthis.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\t\r\n\t\tlet  { ctx } =  this.props;\r\n\t\tlet { \r\n\t\t\tlastX, lastY, \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tctx.lineWidth = 1;\r\n\t\tif (selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = lastX - selectStartX;\r\n\t\t\t\tlet height = lastY - selectStartY;\r\n\t\t\t\tctx.setLineDash([4, 4]);\r\n\r\n\t\t\t\tctx.lineDashOffset = 0;\r\n\t\t\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\t\t\t});\r\n\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMoveEvent = e => {\r\n\t\tlet canvas = this.getCanvas();\r\n\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tthis.selectingDraw(e);\r\n\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t} else if (this.state.isDrawing) {\r\n\t\t\tthis.draw(e);\r\n\t\t\tcanvas.style.cursor = 'none';\r\n\t\t} else\r\n\t\t\tthis.cursor(e);\r\n\t}\r\n\r\n\tonMouseDownEvent = e => {\r\n\t\tlet  { ctx, isSelecting, selectedObject } =  this.props;\r\n\t\tlet {  \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart, beforeImageData\r\n\t\t} = this.state;\r\n\t\tlet { offsetX, offsetY } = e.nativeEvent;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tif (chkObjForNonEmptiness(selectedObject)) \r\n\t\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\r\n\t\t\tlet canvas = this.getCanvas();\r\n\t\t\tlet imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: selectStartX === undefined ? offsetX : selectStartX,\r\n\t\t\t\tselectStartY: selectStartY === undefined ? offsetY : selectStartY,\r\n\t\t\t\tbeforeImageData: !selectStart ? imageData : beforeImageData,\r\n\t\t\t\tselectStart: true\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: isSelecting ? false : true,\r\n\t\t\t\tlastX: offsetX,\r\n\t\t\t\tlastY: offsetY,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseUpEvent = e => {\r\n\t\tlet {\r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tlastX, lastY,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\t\tlet {\r\n\t\t\tctx, updateSelectedObject,\r\n\t\t\tisSelecting\r\n\t\t} =  this.props;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tlet width = lastX - selectStartX;\r\n\t\t\tlet height = lastY - selectStartY;\r\n\t\t\tlet selectObject = {\r\n\t\t\t\tstartVector: new Vector2(selectStartX, selectStartY),\r\n\t\t\t\tendVector: new Vector2(lastX, lastY)\r\n\t\t\t}\r\n\r\n\t\t\tupdateSelectedObject(selectObject);\r\n\t\t\tctx.setLineDash([4, 4]);\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: undefined,\r\n\t\t\t\tselectStartY: undefined,\r\n\t\t\t\tselectStart: false,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseOutEvent = e => {\r\n\t\tthis.setState({\r\n\t\t\tisDrawing: false\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t{ !this.state.mobile ? (\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref={this.canvas} \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonMouseMove={this.onMouseMoveEvent}\r\n\t\t\t\t\tonMouseDown={this.onMouseDownEvent}\r\n\t\t\t\t\tonMouseUp={this.onMouseUpEvent}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent}\r\n\t\t\t\t\tonClick={this.onClickHandle}\r\n\r\n\t\t\t\t></canvas>) \r\n\t\t\t\t: (<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref={this.canvas} \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonTouchMove={this.touchMoveEventLister.bind(this)}\r\n\t\t\t\t\tonTouchStart={this.touchStartEventLister.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonTouchEnd={this.touchEndEventLister.bind(this)}\r\n\t\t\t\t\tonTouchCancel={this.onMouseOutEvent.bind(this)}\r\n\r\n\t\t\t\t></canvas>)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject,\r\n\t\tchangePenType: changePenType,\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tpenType: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tresetCanvas: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tchangeIsSelecting: PropTypes.func.isRequired,\r\n\tupdateSelectedObject: PropTypes.func.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tresetSelectedObject: PropTypes.func.isRequired,\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React, { Component } from 'react';\r\nimport './../css/App.css';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport Panel from './Panel';\r\nimport PanelMobile from './PanelMobile';\r\nimport Canvas from './Canvas';\r\n\r\nimport { enableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nclass App extends Component {\r\n\tonUnload = e => {\r\n\t\tlet  { ctx } = this.props;\r\n\t\tlet autosave = docCookies.getItem(\"autosaveEnable\");\r\n\t\tautosave = JSON.parse(autosave);\r\n\t\tif (autosave) {\r\n\t\t\tlet saveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t\tlet name = `Name: Несохраненный  рисунок`;\r\n\t\t\tlet date = `Date: ${Date.now()}`;\r\n\t\t\tlet imgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tlet key = name + date + imgSize;\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet exist = docCookies.hasItem(\"firstLogin\");\r\n\t\t\tif (exist)\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"false\")\r\n\t\t\telse {\r\n\t\t\t\tlet { enableInfoModal } = this.props;\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"true\");\r\n\t\t\t\tdocCookies.setItem(\"autosaveEnable\", \"false\");\r\n\t\t\t\tenableInfoModal();\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"Failed with error: \");\r\n\t\t\tconsole.log(e);\r\n\t\t\t\r\n\t\t} finally {\r\n\t\t\twindow.addEventListener('beforeunload', this.onUnload);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUmmount() {\r\n\t\twindow.removeEventListener(\"beforeunload\", this.onUnload)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\t\tconst app = !mobile ? \r\n\t\t(\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Panel />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<PanelMobile />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{app}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nApp.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tenableInfoModal: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","const storageModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default storageModal;\r\n","const infoModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default infoModal;\r\n","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\nimport modalStorageReducer from './store/reducers/modalStorageReducer';\r\nimport infoModalReducer from './store/reducers/infoModalReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer,\r\n\t\"modalStorage\": modalStorageReducer,\r\n\t\"infoModal\": infoModalReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: state.isSelecting && true,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tselectedObject: {},\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\tpenType: 'pencil',\r\n\t\t\t\tisSelecting: false\r\n\t\t\t}\r\n\t\tcase 'RESET_SELECT_OBJECT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import storageModal from './../data/storageModal';\r\n\r\nexport default (state = storageModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tcase 'RE_RENDER_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\treRender: Math.random()\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import infoModal from './../data/infoModal';\r\n\r\nexport default (state = infoModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose } from 'redux';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.register();"],"sourceRoot":""}