(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(51)},36:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),o=a(24),s=a(1),l=a(4),u=a(26),m=a(2),p=a(3),d=a(6),h=a(5),g=a(7),f=(a(36),function(e){return{type:"CHANGE_COLOR",payload:e}}),b=function(e){return{type:"CHANGE_THICKNESS",payload:e}},v=function(e){return{type:"CHANGE_PIPETTE_COLOR",payload:e}},k=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return a.props.changeThickness(e.target.value)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",null,"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0448\u0440\u0438\u0444\u0442\u0430:",r.a.createElement("select",{className:"uk-select",onChange:this.handleChange.bind(this)},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"16"},"16"),r.a.createElement("option",{value:"32"},"32"),r.a.createElement("option",{value:"64"},"64"))))}}]),t}(n.Component),E=Object(l.b)(function(e){return{thickness:e.penProperty.thickness}},function(e){return Object(s.bindActionCreators)({changeThickness:b},e)})(k),y=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return a.props.changeColor(e.target.value)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-flex uk-flex-column"},r.a.createElement("label",{htmlFor:"colorPicker"},"\u0426\u0432\u0435\u0442:"),r.a.createElement("input",{type:"color",id:"colorPicker",onChange:this.handleChange.bind(this)}))}}]),t}(n.Component),O=Object(l.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(s.bindActionCreators)({changeColor:f},e)})(y),C=function(e){return{r:Number.parseInt(e.slice(1,3),16),g:Number.parseInt(e.slice(3,5),16),b:Number.parseInt(e.slice(5,7),16)}},j=function(e,t,a,n){for(var r,c,i,o=[e.width,e.height],s=o[0],l=o[1],u=0,m=[[a.x,a.y]];m.length>0;)if(!((r=m.pop())[0]<0||r[0]>=s)&&!(r[1]<0||r[1]>=l)){u=(i=(c=4*r[1]*s+4*r[0])+1)+1;var p={r:e.data[c],g:e.data[i],b:e.data[u]};p.r===t.r&&p.g===t.g&&p.b===t.b||p.r!==n.r||p.g!==n.g||p.b!==n.b||(e.data[c]=t.r,e.data[i]=t.g,e.data[u]=t.b,m.push([r[0]-1,r[1]]),m.push([r[0]+1,r[1]]),m.push([r[0],r[1]-1]),m.push([r[0],r[1]+1]))}return e},S=function(e,t){var a=/(?<=Date: )\d+/g,n=e.keys().next().value,r=t.keys().next().value,c=Number.parseInt(n.match(a)[0],10);return Number.parseInt(r.match(a)[0],10)-c},w=function(e,t){var a=/(?<=Date: )\d+/g,n=e.keys().next().value,r=t.keys().next().value;return Number.parseInt(n.match(a)[0],10)-Number.parseInt(r.match(a)[0],10)},x=function(e){var t="autosave: ".concat(sessionStorage.length),a=e.canvas.toDataURL("image/png");sessionStorage.setItem(t,a)},N=function(e){return 0!==Object.entries(e).length||e.constructor!==Object},A=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=a.props.ctx;x(e),e.rect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#ffffff",e.fill()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{id:"clearButton",className:"uk-icon-link uk-icon-button trash",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),D=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}})(A),I=a(12),T=a.n(I),M=a(13),_=function(e){return{type:"SET_CONTEXT",payload:e}},R=function(e){return{type:"CHANGE_PEN_TYPE",payload:e}},L=function(e){return{type:"CHANGE_IS_SELECTING",payload:e}},P=function(e){return{type:"RESET_CANVAS",payload:e}},B=function(){return{type:"RESET_SELECT_OBJECT"}},Y=function(e){return{type:"UPDATE_SELECTED_OBJECT",payload:e}},X=function(){function e(t,a){if(Object(m.a)(this,e),Array.isArray(t)||Array.isArray(a))return console.log(new TypeError("Bad args, x or y is array, x: "+t+" y: "+a)),new Error("Bad args === bad vector2");var n=[Number(t),Number(a)],r=n[0],c=n[1];if(!Number.isFinite(r)||!Number.isFinite(c))return console.log(new TypeError("Bad args, x or y isn't finite, x: "+t+" y: "+a)),new Error("Bad args === bad vector2");this.x=t,this.y=a}return Object(p.a)(e,[{key:"updateVector2",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y;this.x=e,this.y=t}}],[{key:"getBoxSize",value:function(e,t){return{width:t.x-e.x,height:t.y-e.y}}}]),e}(),H=a(10),V=a.n(H),G=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"saveCanvasAsImg",value:function(){var e=Object(M.a)(T.a.mark(function e(t){var a,n,r,c,i,o,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.isSelecting,n=this.refs.link,a){e.next=6;break}n.href=document.querySelector("#draw").toDataURL("image/png"),e.next=22;break;case 6:if(!a){e.next=22;break}return r=this.props.selectedObject,e.next=10,this.props.resetCanvasActions(!0);case 10:return c=document.createElement("canvas"),i=c.getContext("2d"),o=X.getBoxSize(r.startVector,r.endVector),c.width=Math.abs(o.width),c.height=Math.abs(o.height),e.next=17,this.props.ctx.getImageData(r.startVector.x,r.startVector.y,o.width,o.height);case 17:s=e.sent,i.putImageData(s,0,0),n.href=c.toDataURL("image/png"),this.props.resetSelectedObject(),c.remove();case 22:n.download="canvasImage.png",V.a.notification({message:"".concat(a?"\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440":"\u0425\u043e\u043b\u0441\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440"),pos:"bottom-right",timeout:2500});case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("a",{href:"canvasDownload",ref:"link",id:"saveButton",className:"uk-icon-link uk-icon-button download",onClick:this.saveCanvasAsImg.bind(this)}," "))}}]),t}(n.Component),U=Object(l.b)(function(e){return{ctx:e.canvasState.ctx,isSelecting:e.canvasState.isSelecting,selectedObject:e.canvasState.selectedObject}},function(e){return Object(s.bindActionCreators)({resetCanvasActions:P,resetSelectedObject:B},e)})(G),F=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.changePenType("pipette"),x(a.props.ctx)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image pipette",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),W=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(s.bindActionCreators)({changePenType:R},e)})(F),z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.changePenType("pencil"),x(a.props.ctx)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button pencil",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),J=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(s.bindActionCreators)({changePenType:R},e)})(z),K=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.changePenType("eraser"),x(a.props.ctx)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image eraser",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),q=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(s.bindActionCreators)({changePenType:R},e)})(K),$=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"uploadImgAsCanvas",value:function(){var e=Object(M.a)(T.a.mark(function e(t){var a,n,r,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),window.File&&window.FileReader&&window.FileList&&window.Blob){e.next=4;break}return alert("\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u044d\u0442\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u044e :("),e.abrupt("return");case 4:if(!window.confirm("\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u043e\u0442\u043e \u0445\u043e\u043b\u0441\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0447\u0438\u0449\u0435\u043d, \u0432\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")){e.next=14;break}return(a=this.props.ctx).rect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#ffffff",e.next=10,a.fill();case 10:n=[t.target.files[0],new FileReader],r=n[0],(c=n[1]).onload=function(e){var t=[e.target.result,new Image],n=t[0],r=t[1];r.onload=function(){r.height<=window.innerHeight&&r.width<=window.innerWidth?a.drawImage(r,0,0):r.height>window.innerHeight?a.drawImage(r,0,0,r.width,window.innerHeight):r.width>window.innerWidth&&a.drawImage(r,0,0,window.innerWidth,r.height)},r.src=n,V.a.notification({message:"\u0424\u0430\u0439\u043b \u0431\u044b\u043b \u0443\u0434\u0430\u0447\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d",pos:"bottom-right",timeout:2e3})},c.onerror=function(e){console.log("Error loading file. Code: ".concat(e.target.error.code)),V.a.notification({message:"\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430.",pos:"bottom-right",timeout:2e3})},c.readAsDataURL(r);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("label",{htmlFor:"uploadButton",className:"uk-icon-link uk-icon-button upload"}),r.a.createElement("input",{type:"file",ref:"link",id:"uploadButton",className:"uk-hidden",onChange:this.uploadImgAsCanvas.bind(this)}))}}]),t}(n.Component),Q=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}})($),Z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.changePenType("paint-bucket"),x(a.props.ctx)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button paint-bucket",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),ee=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(s.bindActionCreators)({changePenType:R},e)})(Z),te=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.changeIsSelecting(!0),a.props.isSelecting&&a.props.resetCanvasActions(!0)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button uk-icon-image selection",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),ae=Object(l.b)(function(e){return{color:e.penProperty.color,isSelecting:e.canvasState.isSelecting}},function(e){return Object(s.bindActionCreators)({changeIsSelecting:L,resetCanvasActions:P},e)})(te),ne=function(){return{type:"ENABLE_MODAL"}},re=function(){return{type:"DISABLE_MODAL"}},ce=function(){return{type:"RE_RENDER_MODAL"}},ie=a(20),oe=a.n(ie),se=a(9),le=a.n(se),ue=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={edit:!1},a.onCanvas=function(){a.props.ctx.drawImage(a.refs.image,0,0),a.props.disableModal()},a.editName=function(e){var t=a.props.stringKey,n=localStorage.getItem(t);localStorage.removeItem(t);t=t.replace(/(?<=Name: ).*(?=Date)/g,a.refs.editInput.value),localStorage.setItem(t,n),a.setState({edit:!1},a.props.reRenderModal())},a.deleteImg=function(e){localStorage.removeItem(a.props.stringKey),a.props.reRenderModal()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.stringKey,n=t.imgData,c=this.state.edit,i=function(e){var t=e.match(/(?<=Name: ).*(?=Date)/g)[0],a=Number.parseInt(e.match(/(?<=Date: )\d+/g)[0],10);return{name:t,date:a=(a=String(new Date(a))).match(/^.*(?= GMT)/g)[0],size:e.match(/(?<=Size: ).*$/g)[0]}}(a),o=c?"":"uk-hidden";return r.a.createElement("div",{className:"uk-margin-bottom uk-margin-left uk-card uk-width-1-2@s uk-width-1-3@m uk-width-1-4@l uk-flex-none uk-card-default uk-flex uk-flex-column uk-flex-between"},r.a.createElement("div",null,r.a.createElement("div",{className:"uk-card-media-top uk-card-header"},r.a.createElement("img",{className:"image-border",src:n,alt:"",ref:"image"})),r.a.createElement("div",{className:"uk-card-body"},r.a.createElement("h4",{className:"uk-card-title",onClick:function(){return e.setState({edit:!0})}},i.name),r.a.createElement("div",{id:"editBox",className:o},r.a.createElement("input",{className:"uk-input uk-form-width-small uk-form-small",type:"text",defaultValue:i.name,ref:"editInput"}),r.a.createElement("div",{className:"uk-button-group"},r.a.createElement("span",{className:"uk-icon uk-margin-left uk-icon-button check",onClick:this.editName.bind(this)}),r.a.createElement("span",{className:"uk-icon uk-margin-left uk-icon-button close",onClick:function(){return e.setState({edit:!1})}}))),r.a.createElement("span",null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430: ",r.a.createElement("br",null),i.date),r.a.createElement("br",null),r.a.createElement("span",null,"\u0420\u0430\u0437\u043c\u0435\u0440\u044b: ",i.size))),r.a.createElement("div",{className:"uk-button-group uk-width-1-1 "},r.a.createElement("button",{className:"uk-button uk-button-primary uk-width-1-2",onClick:this.onCanvas.bind(this)},"\u041d\u0430 \u0445\u043e\u043b\u0441\u0442"),r.a.createElement("button",{className:"uk-button uk-button-danger uk-width-1-2",onClick:this.deleteImg.bind(this)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}}]),t}(n.PureComponent),me=Object(l.b)(function(e){return{ctx:e.canvasState.ctx}},function(e){return Object(s.bindActionCreators)({reRenderModal:ce,disableModal:re},e)})(ue),pe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={sortBy:"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"},a.clearHandle=function(){0!==localStorage.length?(localStorage.clear(),V.a.notification({message:"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0431\u044b\u043b\u043e \u043e\u0447\u0438\u0449\u0435\u043d\u043e.",pos:"bottom-right",timeout:2500}),a.forceUpdate()):V.a.notification({message:"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u043f\u0443\u0441\u0442\u043e\u0435!",pos:"bottom-right",timeout:2500})},a.handleChange=function(e){return a.setState({sortBy:e.target.value})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=function(){for(var e=[],t=0;t<localStorage.length;t++){var a=new Map,n=localStorage.key(t),r=localStorage.getItem(n);a.set(n,r),e.push(a)}return e}(),a=this.props.sortBy;"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"===a?t=t.sort(S):"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c)"===a&&(t=t.sort(w));var n=t.map(function(e){return r.a.createElement(me,{key:Math.floor(1e8*Math.random()),stringKey:e.keys().next().value,imgData:e.values().next().value})});return r.a.createElement("div",{className:"uk-flex uk-flex-column uk-flex-between uk-height-1-1"},r.a.createElement("div",null,r.a.createElement("h2",{className:"uk-heading-line uk-text-center"},r.a.createElement("span",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")),r.a.createElement("h4",null,"\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e ",localStorage.length," ","".concat(1===localStorage.length?"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435":"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439"),"."),r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("fieldset",{className:"uk-fieldset"},r.a.createElement("legend",{className:"uk-legend"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c: "),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("select",{className:"uk-select uk-width-medium",onChange:this.handleChange.bind(this),value:this.state.sortBy},r.a.createElement("option",{value:"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"},"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u043d\u043e\u0432\u044b\u0445 \u043a \u0441\u0442\u0430\u0440\u044b\u043c)"),r.a.createElement("option",{value:"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c)"},"\u041f\u043e \u0434\u0430\u0442\u0435(\u043e\u0442 \u0441\u0442\u0430\u0440\u044b\u0445 \u043a \u043d\u043e\u0432\u044b\u043c)"))))))),r.a.createElement("div",{className:"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch"},n),r.a.createElement("div",{className:"uk-flex uk-flex-around"},r.a.createElement("div",{className:"uk-button-group"},r.a.createElement("button",{onClick:this.clearHandle.bind(this),className:"uk-button uk-margin-right uk-margin-bottom uk-button-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0451"),r.a.createElement("button",{onClick:function(){return e.props.disableModal()},className:"uk-button uk-margin-left uk-margin-bottom uk-button-primary"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))}}]),t}(n.Component);me.propTypes={isOpen:le.a.bool,reRender:le.a.number,enableModal:le.a.func,disableModal:le.a.func};var de=Object(l.b)(function(e){return{isOpen:e.modalStorage.isOpen,reRender:e.modalStorage.reRender}},function(e){return Object(s.bindActionCreators)({enableModal:ne,disableModal:re},e)})(pe);oe.a.setAppElement("#root");var he=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).getCursor=function(){return document.querySelector(".cursor")},a.onClickHandle=function(){a.getCursor().style.display="none",a.props.enableModal()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button storage",onClick:this.onClickHandle.bind(this)}),r.a.createElement(oe.a,{isOpen:this.props.isOpen,contentLabel:"Storage Modal"},r.a.createElement(de,null)))}}]),t}(n.Component),ge=Object(l.b)(function(e){return{isOpen:e.modalStorage.isOpen}},function(e){return Object(s.bindActionCreators)({enableModal:ne},e)})(he),fe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleClick",value:function(){var e=Object(M.a)(T.a.mark(function e(){var t,a,n,r,c,i,o,s,l,u,m,p,d;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.ctx,n=t.isSelecting,c="Name: \u0420\u0438\u0441\u0443\u043d\u043e\u043a \u2116".concat(localStorage.length+1),i="Date: ".concat(Date.now()),n){e.next=8;break}s="Size: ".concat(a.canvas.width," x ").concat(a.canvas.height),r=a.canvas.toDataURL("image/png"),e.next=23;break;case 8:return l=this.props.selectedObject,e.next=11,this.props.resetCanvasActions(!0);case 11:return u=document.createElement("canvas"),m=u.getContext("2d"),p=X.getBoxSize(l.startVector,l.endVector),s="Size: ".concat(Math.abs(p.width)," x ").concat(Math.abs(p.height)),u.width=Math.abs(p.width),u.height=Math.abs(p.height),e.next=19,a.getImageData(l.startVector.x,l.startVector.y,p.width,p.height);case 19:d=e.sent,m.putImageData(d,0,0),r=u.toDataURL("image/png"),u.remove();case 23:o=c+i+s;try{localStorage.setItem("".concat(o),r),V.a.notification({message:"".concat(n?"\u0424\u0440\u0430\u0433\u043c\u0435\u043d\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435.":"\u0425\u043e\u043b\u0441\u0442 \u0431\u044b\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435."),pos:"bottom-right",timeout:2500})}catch(h){console.log("Storage failed: "+h)}case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-icon uk-icon-button cloud-upload",onClick:this.handleClick.bind(this)}))}}]),t}(n.Component),be=Object(l.b)(function(e){return{ctx:e.canvasState.ctx,isSelecting:e.canvasState.isSelecting,selectedObject:e.canvasState.selectedObject}},function(e){return Object(s.bindActionCreators)({resetCanvasActions:P},e)})(fe),ve=Object(l.b)(function(e){return{penType:e.canvasState.penType,isSelecting:e.canvasState.isSelecting}})(function(e){var t=e.penType,a=e.isSelecting;return r.a.createElement("div",null,r.a.createElement("nav",{className:"uk-navbar-container uk-flex uk-flex-center","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement("ul",{className:"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel"},r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle"},r.a.createElement(O,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(E,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("pencil"===t&&"active")},r.a.createElement(J,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("pipette"===t&&"active")},r.a.createElement(W,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("eraser"===t&&"active")},r.a.createElement(q,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat("paint-bucket"===t&&"active")},r.a.createElement(ee,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left ".concat(a&&"active")},r.a.createElement(ae,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},r.a.createElement(D,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},r.a.createElement(U,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},r.a.createElement(Q,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},r.a.createElement(be,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left"},r.a.createElement(ge,null))))))}),ke="pencil",Ee="pipette",ye="eraser",Oe="paint-bucket",Ce="none",je=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isDrawing:!1,lastX:0,lastY:0,selectStartX:void 0,selectStartY:void 0,beforeImageData:void 0,selectStart:!1},a.getCanvas=function(){return a.refs.canvas},a.getCanvasContext=function(){return a.getCanvas().getContext("2d")},a.getCursor=function(){return document.querySelector(".cursor")},a.cursor=function(e){var t=a.getCursor(),n=a.props,r=n.penType,c=n.thickness,i=n.pipetteColor,o=n.color;r!==Ce?(t.style.display="block",t.style.width="".concat(c+5,"px"),t.style.height="".concat(c+5,"px"),t.style.top="".concat(e.pageY-Number.parseInt(t.style.height)/2,"px"),t.style.left="".concat(e.pageX-Number.parseInt(t.style.width)/2,"px"),r===ke||r===Oe?t.style.backgroundColor="".concat(o):r===Ee?t.style.backgroundColor="".concat(i):r===ye&&(t.style.backgroundColor="#ffffff")):t.style.display="none"},a.draw=function(e){a.cursor(e);var t=a.props,n=t.ctx,r=t.penType,c=t.thickness,i=t.color,o=t.pipetteColor;n.lineWidth=c,a.state.isDrawing&&r!==Oe&&(n.beginPath(),n.setLineDash([0]),r===ke?n.strokeStyle=i:r===Ee?n.strokeStyle=o:r===ye&&(n.strokeStyle="#ffffff"),n.moveTo(a.state.lastX,a.state.lastY),n.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),n.stroke(),a.setState({lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY}))},a.pickColor=function(e){var t=[e.nativeEvent.offsetX,e.nativeEvent.offsetY],n=t[0],r=t[1],c=a.props.ctx.getImageData(n,r,1,1).data;a.props.changePipetteColor("rgba(".concat(c.join(","),")"))},a.floodFill=function(e){var t=C(a.props.color),n=a.props.ctx.getImageData(0,0,a.getCanvas().width,a.getCanvas().height),r={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},c=a.props.ctx.getImageData(r.x,r.y,1,1),i={r:c.data[0],g:c.data[1],b:c.data[2]};a.props.ctx.putImageData(j(n,t,r,i),0,0)},a.onClickHandle=function(e){a.props.penType===Ee?a.pickColor(e):a.props.penType===Oe&&a.floodFill(e)},a.selectingDraw=function(e){a.cursor(e);var t=a.props.ctx,n=a.state,r=n.lastX,c=n.lastY,i=n.selectStartX,o=n.selectStartY,s=n.selectStart,l=n.beforeImageData;t.lineWidth=1,s&&(a.setState({lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY},function(){var e=r-i,n=c-a.state.selectStartY;t.setLineDash([4,4]),t.lineDashOffset=0,t.strokeRect(i,o,e,n)}),t.putImageData(l,0,0))},a.onMouseMoveEvent=function(e){var t=a.getCanvas();a.props.isSelecting?(a.selectingDraw(e),t.style.cursor="crosshair"):(a.draw(e),t.style.cursor="none")},a.onMouseDownEvent=function(e){var t=a.props,n=t.ctx,r=t.isSelecting,c=t.selectedObject,i=a.state,o=i.selectStartX,s=i.selectStartY,l=i.selectStart,u=i.beforeImageData;if(r){N(c)&&a.props.ctx.putImageData(a.state.beforeImageData,0,0);var m=a.getCanvas(),p=n.getImageData(0,0,m.width,m.height);a.setState({selectStartX:void 0===o?e.nativeEvent.offsetX:o,selectStartY:void 0===s?e.nativeEvent.offsetY:s,beforeImageData:l?u:p,selectStart:!0})}else a.setState({isDrawing:!r,lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY})},a.onMouseUpEvent=function(e){if(a.props.isSelecting){var t=a.state.lastX-a.state.selectStartX,n=a.state.lastY-a.state.selectStartY,r={startVector:new X(a.state.selectStartX,a.state.selectStartY),endVector:new X(a.state.lastX,a.state.lastY)};a.props.updateSelectedObject(r),a.props.ctx.setLineDash([4,4]),a.props.ctx.putImageData(a.state.beforeImageData,0,0),a.props.ctx.strokeRect(a.state.selectStartX,a.state.selectStartY,t,n),a.setState({selectStartX:void 0,selectStartY:void 0,selectStart:!1})}else a.setState({isDrawing:!1})},a.onMouseOutEvent=function(e){a.setState({isDrawing:!1})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.getCanvas(),t=this.getCanvasContext();this.props.setContext(t),e.width=window.innerWidth,e.height=window.innerHeight-document.querySelector(".uk-navbar-container").clientHeight,this.setState({beforeImageData:t.getImageData(0,0,e.width,e.height)}),t.strokeStyle=this.props.color,t.lineJoin="round",t.lineCap="round",t.lineWidth=this.props.thickness,t.rect(0,0,e.width,e.height),t.fillStyle="#ffffff",t.fill()}},{key:"render",value:function(){return this.props.resetCanvas&&(this.props.ctx.putImageData(this.state.beforeImageData,0,0),this.props.resetCanvasActions(!1)),r.a.createElement("div",{id:"draw-container"},r.a.createElement("div",{className:"cursor"}),r.a.createElement("canvas",{id:"draw",ref:"canvas",className:"uk-width-1-1",onMouseMove:this.onMouseMoveEvent.bind(this),onMouseDown:this.onMouseDownEvent.bind(this),onMouseUp:this.onMouseUpEvent.bind(this),onMouseOut:this.onMouseOutEvent.bind(this),onClick:this.onClickHandle.bind(this)}))}}]),t}(n.Component),Se=Object(l.b)(function(e){return{color:e.penProperty.color,thickness:e.penProperty.thickness,ctx:e.canvasState.ctx,pipetteColor:e.penProperty.pipetteColor,penType:e.canvasState.penType,isSelecting:e.canvasState.isSelecting,resetCanvas:e.canvasState.resetCanvas,selectedObject:e.canvasState.selectedObject}},function(e){return Object(s.bindActionCreators)({setContext:_,changeColor:f,changePipetteColor:v,changeIsSelecting:L,updateSelectedObject:Y,resetCanvasActions:P,resetSelectedObject:B},e)})(je),we=function(){return r.a.createElement("div",{className:"uk-container uk-margin-small-top"},r.a.createElement("div",{className:"uk-card uk-card-default uk-width-1-2@m"},r.a.createElement("div",{className:"uk-card-header"},r.a.createElement("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"true"},r.a.createElement("div",{className:"uk-width-expand uk-flex uk-flex-center"},r.a.createElement("h3",{className:"uk-card-title uk-margin-remove-bottom"},"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f")))),r.a.createElement("div",{className:"uk-card-body uk-flex uk-flex-center"},r.a.createElement("button",{className:"uk-button uk-button-danger uk-button-small"},"\u041a\u0438\u043d\u0443\u0442\u044c \u0432 faramo_zayw \u0442\u0430\u043f\u043e\u043a"))))},xe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=window.innerWidth<800?r.a.createElement(we,null):r.a.createElement("div",{className:"App"},r.a.createElement(ve,null),r.a.createElement(Se,null));return r.a.createElement("div",null,e)}}]),t}(n.Component);a(50),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=a(8),Ae={color:"#000000",thickness:1,pipetteColor:"#000000"},De={ctx:{},penType:"pencil",isSelecting:!1,resetCanvas:!1,selectedObject:{}},Ie={isOpen:!1,reRender:0},Te=Object(s.combineReducers)({penProperty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COLOR":return Object(Ne.a)({},e,{color:t.payload});case"CHANGE_THICKNESS":return Object(Ne.a)({},e,{thickness:Number(t.payload)});case"CHANGE_PIPETTE_COLOR":return Object(Ne.a)({},e,{pipetteColor:t.payload});default:return e}},canvasState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTEXT":return Object(Ne.a)({},e,{ctx:t.payload});case"CHANGE_PEN_TYPE":return Object(Ne.a)({},e,{resetCanvas:e.isSelecting&&!0,isSelecting:!1,selectedObject:{},penType:t.payload});case"CHANGE_IS_SELECTING":return Object(Ne.a)({},e,{penType:t.payload?"none":"pencil",isSelecting:t.payload});case"RESET_CANVAS":return Object(Ne.a)({},e,{resetCanvas:t.payload,penType:"pencil",isSelecting:!1});case"RESET_SELECT_OBJECT":return Object(Ne.a)({},e,{selectedObject:{}});case"UPDATE_SELECTED_OBJECT":return Object(Ne.a)({},e,{selectedObject:Object.assign(t.payload)});default:return e}},modalStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;switch((arguments.length>1?arguments[1]:void 0).type){case"ENABLE_MODAL":return Object(Ne.a)({},e,{isOpen:!0});case"DISABLE_MODAL":return Object(Ne.a)({},e,{isOpen:!1});case"RE_RENDER_MODAL":return Object(Ne.a)({},e,{reRender:Math.random()});default:return e}}}),Me=Object(s.createStore)(Te,Object(s.compose)(Object(s.applyMiddleware)(u.a),Object(o.devToolsEnhancer)()));i.a.render(r.a.createElement(l.a,{store:Me},r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.dfae3de9.chunk.js.map