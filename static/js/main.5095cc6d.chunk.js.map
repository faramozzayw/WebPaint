{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","components/Panel/SaveButton.jsx","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","store/actions/modalStorageActions.js","modules/Tools.js","components/Panel/Storage/ImageCard.jsx","components/Panel/Storage/StorageModal.jsx","components/Panel/Storage.jsx","components/Panel/Storage/SaveToStorage.jsx","store/actions/infoModalActions.js","components/InfoBox.jsx","components/Panel/InfoBoxModal.jsx","components/Panel.jsx","modules/PenTypeConsts.js","components/Canvas.jsx","components/DisplayError.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","store/data/storageModal.js","store/data/infoModal.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","store/reducers/modalStorageReducer.js","store/reducers/infoModalReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","changePipetteColor","Thickness","handleChange","event","_this","props","target","react_default","a","createElement","className","onChange","this","bind","Component","connect","state","thickness","penProperty","dispatch","bindActionCreators","ColorPicker","htmlFor","id","color","ClearButton","handleClick","ctx","rect","canvas","width","height","fillStyle","fill","uk-tooltip","onClick","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","resetSelectedObject","updateSelectedObject","Vector2","x","y","Object","classCallCheck","Array","isArray","console","log","TypeError","Error","_ref","Number","_thisX","_thisY","isFinite","createClass","key","arguments","length","undefined","VectorStart","VectorEnd","SaveButton","e","isSelecting","link","refs","href","document","querySelector","toDataURL","selectedObject","getContext","size","getBoxSize","startVector","endVector","Math","abs","getImageData","imageDate","putImageData","remove","download","UIkit","notification","message","concat","pos","timeout","ref","saveCanvasAsImg","Pipette","Pen","Eraser","UploadButton","persist","window","File","FileReader","FileList","Blob","alert","confirm","files","file","reader","onload","_ref2","result","Image","dataUri","image","innerHeight","innerWidth","drawImage","src","onerror","error","code","readAsDataURL","uploadImgAsCanvas","FloodFill","Selection","enableModal","disableModal","reRenderModal","hexToRGB","hex","r","parseInt","slice","g","b","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","blue","stack","pop","pointColor","data","push","sortByDateNewOld","elem1","elem2","regexDate","key1","keys","next","key2","date1","match","sortByDateOldNew","getStorageElemsMap","arr","i","localStorage","map","Map","item","getItem","set","chkObjForNonEmptiness","object","entries","constructor","ImageCard","showEditForm","onCanvas","editName","stringKey","date","removeItem","replace","editInput","setItem","setState","deleteImg","headerClick","prevState","disableEditForm","_this$props","imgData","info","string","name","String","Date","parseKey","hidden","alt","defaultValue","PureComponent","StorageModal","sortBy","clearHandle","clear","forceUpdate","autosaveControlClick","str","autosave","docCookies","JSON","parse","toString","downloadAllImg","list","regexName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","elem","values","click","err","return","_this2","listMap","sort","Storage_ImageCard","floor","random","isOpen","modalStorage","reRender","Modal","setAppElement","Storage","getCursor","onClickHandle","style","display","lib_default","contentLabel","Storage_StorageModal","SaveToStorage","now","imgSize","saveImg","context","enableInfoModal","disableInfoModal","infoModal","uk-overlay-icon","InfoBoxModal","clickHandle","components_InfoBox","penType","uk-navbar","Panel_ColorPicker","Panel_Thickness","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_SaveButton","Panel_UploadButton","Storage_SaveToStorage","Panel_Storage","Panel_InfoBoxModal","pencil","pipette","eraser","paintBucket","none","Canvas","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","cursor","pipetteColor","top","pageY","left","pageX","draw","_this$props2","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","nativeEvent","offsetX","offsetY","stroke","pickColor","join","floodFill","selectingDraw","_this$state","lineDashOffset","strokeRect","onMouseMoveEvent","onMouseDownEvent","_this$props3","_this$state2","onMouseUpEvent","selectObject","onMouseOutEvent","clientHeight","lineJoin","lineCap","resetCanvas","onMouseMove","onMouseDown","onMouseUp","onMouseOut","DisplayError","uk-grid","App","onUnload","hasItem","addEventListener","removeEventListener","app","components_DisplayError","components_Panel","components_Canvas","Boolean","location","hostname","storageModal","rootReducer","combineReducers","action","objectSpread","assign","store","createStore","compose","applyMiddleware","thunk","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5095cc6d.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePipetteColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PIPETTE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nclass Thickness extends Component {\r\n\thandleChange = event => this.props.changeThickness(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<label>Толщина шрифта:\r\n\t\t\t\t\t<select \r\n\t\t\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t\t\t4\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t\t\t8\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t\t\t16\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t\t\t32\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t\t\t64\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nclass ColorPicker extends Component {\r\n\thandleChange = event => this.props.changeColor(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t\t\t<input \r\n\t\t\t\t\ttype=\"color\" \r\n\t\t\t\t\tid=\"colorPicker\" \r\n\t\t\t\t\tonChange={this.handleChange.bind(this)} \r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tlet { ctx } = this.props;\r\n\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Очистить холст\"\r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button trash\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetSelectedObject = () => {\r\n\treturn {\r\n\t\ttype: 'RESET_SELECT_OBJECT'\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n\r\n\tupdateVector2(x = this.x, y = this.y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tresetCanvasActions, \r\n\tresetSelectedObject \r\n}  from './../../store/actions/canvasActions';\r\n\r\nimport { Vector2 } from './../../modules/Vector2';\r\nimport UIkit from 'uikit';\r\n\r\nclass SaveButton extends Component {\r\n\tasync saveCanvasAsImg(e) {\r\n\t\tlet { isSelecting } = this.props;\r\n\t\tlet link = this.refs.link;\r\n\t\tif (!isSelecting) \r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\telse if (isSelecting) {\r\n\t\t\tlet { selectedObject } = this.props;\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet ctx = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = await this.props.ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tctx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t\tthis.props.resetSelectedObject();\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\t\tlink.download = 'canvasImage.png';\r\n\t\tUIkit.notification({\r\n\t\t\tmessage: `${\r\n\t\t\t\tisSelecting ? \r\n\t\t\t\t\"Фрагмент был сохранён на компьютер\"\r\n\t\t\t\t: \"Холст был сохранён на компьютер\"\r\n\t\t\t}`,\r\n\t\t\tpos: 'bottom-right',\r\n\t\t\ttimeout: 2500\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\tuk-tooltip=\"Скачать холст\"\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button download\"\r\n\t\t\t\t\tonClick={this.saveCanvasAsImg.bind(this)}\r\n\t\t\t\t> </a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Pipette extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('pipette');\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Пипетка\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Pen extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('pencil');\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Ручка\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button pencil\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Eraser extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('eraser');\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Ластик\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport UIkit from 'uikit';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif(!window.File || !window.FileReader || !window.FileList || !window.Blob){\r\n\t\t\talert(\"Ваш браузер не поддерживает эту функцию :(\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\tlet { ctx } = this.props;\r\n\t\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tawait ctx.fill();\r\n\r\n\t\t\tlet [ file, reader ] = [ e.target.files[0], new FileReader() ];\r\n\t\t\t\r\n\t\t\treader.onload = e => {\r\n\t\t\t\tlet [ dataUri, image ] = [ e.target.result, new Image()];\r\n\r\n\t\t\t\timage.onload = () => {\r\n\t\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\t\t\telse if (image.height > window.innerHeight) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\r\n\t\t\t\t\telse if (image.width > window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\timage.src = dataUri;\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `Файл был удачно загружен`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.onerror = e => {\r\n\t\t\t\tconsole.log(`Error loading file. Code: ${e.target.error.code}`);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `При загрузке файла произошла ошибка, попробуйте снова.`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tuk-tooltip=\"Загрузить фото\"\r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button upload\"\r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(UploadButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass FloodFill extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changePenType('paint-bucket');\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Заливка цветом\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button paint-bucket\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changeIsSelecting(true)\r\n\t\tif (this.props.isSelecting) \r\n\t\t\tthis.props.resetCanvasActions(true)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Выделение области\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tchangeIsSelecting: PropTypes.func.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","export const enableModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const reRenderModal = () => {\r\n\treturn {\r\n\t\ttype: 'RE_RENDER_MODAL'\r\n\t}\r\n}","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n  }\r\n  return imageData;\r\n}\r\n\r\n/*export const loadWebAssembly = fileName => {\r\n  return fetch(fileName)\r\n    .then(response => response.arrayBuffer())\r\n    .then(bits => {\r\n    \treturn WebAssembly.compile(bits)\r\n    })\r\n    .then(module => new WebAssembly.Instance(module));\r\n};*/\r\n\r\nexport const sortByDateNewOld = (elem1, elem2) => {\r\n\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0], 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0], 10);\r\n\r\n\treturn date2 - date1; // от новых к старым\r\n}\r\n\r\nexport const sortByDateOldNew  = (elem1, elem2) => {\r\n\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0], 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0], 10);\r\n\r\n\treturn date1 - date2; // от старых к новым\r\n}\r\n\r\nexport const parseKey = string => {\r\n\tlet regexName = /(?<=Name: ).*(?=Date)/g;\r\n\tlet name = string.match(regexName)[0];\r\n\r\n\tlet regexDate = /(?<=Date: )\\d+/g;\r\n\tlet resultRegexDate = /^.*(?= GMT)/g;\r\n\tlet date = Number.parseInt(string.match(regexDate)[0], 10);\r\n\tdate = String(new Date(date));\r\n\tdate = date.match(resultRegexDate)[0];\r\n\r\n\tlet regexSize = /(?<=Size: ).*$/g;\r\n\tlet size = string.match(regexSize)[0];\r\n\r\n\treturn {\r\n\t\tname: name,\r\n\t\tdate: date,\r\n\t\tsize: size\r\n\t}\r\n}\r\n\r\nexport const getStorageElemsMap = () => {\r\n\tlet arr = [];\r\n\tfor (let i = 0; i < localStorage.length; i++) {\r\n\t\tlet map = new Map();\r\n\t\tlet key = localStorage.key(i);\r\n\t\tlet item = localStorage.getItem(key);\r\n\t\tmap.set(key, item);\r\n\t\tarr.push(map);\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\n/*export const autosaveImg = ctx => {\r\n\tlet key = `autosave: ${sessionStorage.length}`;\r\n\tlet data = ctx.canvas.toDataURL('image/png');\r\n\r\n\tsessionStorage.setItem(key, data);\r\n}*/\r\n\r\nexport const chkObjForEmptiness = object => (Object.entries(object).length === 0 && object.constructor === Object) ? true : false;\r\nexport const chkObjForNonEmptiness = object => !(Object.entries(object).length === 0 && object.constructor === Object) ? true : false;","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { \r\n\treRenderModal, \r\n\tdisableModal \r\n}  from './../../../store/actions/modalStorageActions';\r\nimport { parseKey } from './../../../modules/Tools';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass ImageCard extends PureComponent {\r\n\tstate = {\r\n\t\tshowEditForm: false\r\n\t}\r\n\r\n\tonCanvas = () => {\r\n\t\tthis.props.ctx.drawImage(this.refs.image, 0, 0);\r\n\t\tthis.props.disableModal();\r\n\t}\r\n\r\n\teditName = e => {\r\n\t\tlet { stringKey } = this.props;\r\n\t\tlet date = localStorage.getItem(stringKey);\r\n\r\n\t\tlocalStorage.removeItem(stringKey);\r\n\r\n\t\tlet regexName = /(?<=Name: ).*(?=Date)/g;\r\n\t\tstringKey = stringKey.replace(regexName, this.refs.editInput.value);\r\n\r\n\t\tlocalStorage.setItem(stringKey, date);\r\n\t\tthis.setState({\r\n\t\t\tshowEditForm: false\r\n\t\t}, this.props.reRenderModal());\r\n\t}\r\n\r\n\tdeleteImg = e => {\r\n\t\tlocalStorage.removeItem(this.props.stringKey);\r\n\t\tthis.props.reRenderModal();\r\n\t}\r\n\r\n\theaderClick = e => {\r\n\t\tthis.setState((prevState, props) => {\r\n\t\t\treturn {\r\n\t\t\t\tshowEditForm: !prevState.showEditForm \r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdisableEditForm = () => this.setState({ showEditForm: false })\r\n\r\n\trender() {\r\n\t\tlet { stringKey, imgData } = this.props;\r\n\t\tlet { showEditForm } = this.state;\r\n\t\tlet info = parseKey(stringKey);\r\n\t\tlet hidden = !showEditForm ? \"uk-hidden\" : \"\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-bottom uk-margin-left uk-card uk-width-medium uk-card-default uk-flex uk-flex-column uk-flex-between\">\r\n\t\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-flex-1\">\r\n\t\t\t\t\t<div className=\"uk-card-media-top uk-card-header\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"image-border\"\r\n\t\t\t\t\t\tsrc={imgData}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tref=\"image\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"uk-card-body padding\">\r\n\t\t\t\t\t\t<h4 \r\n\t\t\t\t\t\t\tclassName=\"uk-card-title uk-heading-bullet\"\r\n\t\t\t\t\t\t\tonClick={this.headerClick.bind(this)}\r\n\t\t\t\t\t\t>{info.name}</h4>\r\n\t\t\t\t\t\t<div id=\"editBox\" className={`${hidden} uk-margin-small-bottom`}>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tclassName=\"uk-input uk-form-width-small uk-form-small\" \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tdefaultValue={info.name} \r\n\t\t\t\t\t\t\t\tref=\"editInput\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button check\" \r\n\t\t\t\t\t\t\t\tonClick={this.editName.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button close\" \r\n\t\t\t\t\t\t\t\tonClick={this.disableEditForm.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>Дата создания файла: <br/>{info.date}</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>Размеры: {info.size}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-button-group uk-width-1-1\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-primary uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.onCanvas.bind(this)}\r\n\t\t\t\t\t>На холст</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-danger uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.deleteImg.bind(this)}\r\n\t\t\t\t\t>Удалить</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\treRenderModal: reRenderModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nImageCard.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\treRenderModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCard);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport { \r\n\tenableModal, \r\n\tdisableModal\r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport UIkit from 'uikit';\r\nimport ImageCard from './ImageCard';\r\nimport { \r\n\tsortByDateNewOld, \r\n\tsortByDateOldNew,\r\n\tgetStorageElemsMap\r\n} from './../../../modules/Tools';\r\n\r\nclass StorageModal extends Component {\r\n\tstate = {\r\n\t\tsortBy: 'По дате(от новых к старым)'\r\n\t}\r\n\r\n\tclearHandle = () => {\r\n\t\tif (localStorage.length !== 0) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище было очищено.',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t\tthis.forceUpdate();\r\n\t\t} else \r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t}\r\n\r\n\thandleChange = event => this.setState({ sortBy: event.target.value })\r\n\r\n\tautosaveControlClick = () => {\r\n\t\tlet str = \"autosaveEnable\";\r\n\t\tlet autosave = docCookies.getItem(str);\r\n\t\tif(autosave !== null) {\r\n\t\t\tdocCookies.setItem(str, (!JSON.parse(autosave)).toString());\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadAllImg = () => {\r\n\t\tlet list = getStorageElemsMap();\r\n\t\tif(list.length === 0) {\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet link = document.createElement('a');\r\n\t\tlet regexName = /(?<=Name: ).*(?=Date)/g;\r\n\r\n\t\tfor(let elem of list) {\r\n\t\t\t\r\n\t\t\tlet key = elem.keys().next().value\r\n\t\t\tlet name = key.match(regexName)[0];\r\n\t\t\tlink.download = `${name}.png`;\r\n\t\t\tlink.href = elem.values().next().value;\r\n\t\t\tlink.click();\r\n\t\t}\r\n\t\tlink.remove();\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet listMap = getStorageElemsMap();\r\n\t\tlet { sortBy } = this.state;\r\n\t\tif (sortBy === 'По дате(от новых к старым)') \r\n\t\t\tlistMap = listMap.sort(sortByDateNewOld);\r\n\t\telse if(sortBy === 'По дате(от старых к новым)')\r\n\t\t\tlistMap = listMap.sort(sortByDateOldNew);\r\n\r\n\t\tlet list = listMap.map(item => (\r\n\t\t\t<ImageCard\r\n\t\t\t\tkey={Math.floor(Math.random() * 100000000)}\r\n\t\t\t\tstringKey={item.keys().next().value}\r\n\t\t\t\timgData={item.values().next().value}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\tconst autosave = JSON.parse(docCookies.getItem(\"autosaveEnable\"));\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-height-1-1\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className=\"uk-heading-line uk-text-center\">\r\n\t\t\t\t\t\t<span>Сохранённые изображения</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4>На данный момент сохранено {localStorage.length} {`${localStorage.length === 1 ? 'изображение' : 'изображений' }`}.</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<fieldset className=\"uk-fieldset\">\r\n\t\t\t\t\t\t\t<legend className=\"uk-legend\">Сортировать: </legend>\r\n\t\t\t\t\t\t\t<div className=\"uk-margin\">\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclassName=\"uk-select uk-width-medium\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.sortBy}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от новых к старым)\">По дате(от новых к старым)</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от старых к новым)\">По дате(от старых к новым)</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch uk-flex-top\">\r\n\t\t\t\t\t{list}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-flex uk-flex-around uk-button-group\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.downloadAllImg.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-right uk-margin-bottom uk-button-default\"\r\n\t\t\t\t\t\t>Скачать всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.autosaveControlClick.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-left uk-margin-bottom uk-button-secondary\"\r\n\t\t\t\t\t\t>{`${autosave ? \"Выключить\" : \"Включить\"} автосохранение`}</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.clearHandle.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-left uk-margin-bottom uk-button-danger\"\r\n\t\t\t\t\t\t>Удалить всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.props.disableModal()}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-left uk-margin-bottom uk-button-primary\"\r\n\t\t\t\t\t\t>Закрыть</button>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen,\r\n\t\treRender: state.modalStorage.reRender,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal,\r\n\t\tdisableModal: disableModal,\r\n\t}, dispatch);\r\n}\r\n\r\nStorageModal.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\treRender: PropTypes.number.isRequired,\r\n\tenableModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StorageModal);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal }  from './../../store/actions/modalStorageActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport StorageModal from './Storage/StorageModal';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nclass Storage extends Component {\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tonClickHandle = () => {\r\n\t\tthis.getCursor().style.display = 'none';\r\n\t\tthis.props.enableModal();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Открыть хранилище\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button storage\"\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={this.props.isOpen}\r\n\t\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<StorageModal />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal\r\n\t}, dispatch);\r\n}\r\n\r\nStorage.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired, \r\n\tenableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Storage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport UIkit from 'uikit';\r\nimport { bindActionCreators } from 'redux';\r\nimport { resetCanvasActions }  from './../../../store/actions/canvasActions';\r\nimport { Vector2 } from './../../../modules/Vector2';\r\n\r\nclass SaveToStorage extends Component {\r\n\tasync handleClick() {\r\n\t\tlet { ctx, isSelecting } = this.props;\r\n\t\tlet saveImg;\r\n\t\tlet name = `Name: Рисунок №${localStorage.length + 1}`;\r\n\t\tlet date = `Date: ${Date.now()}`;\r\n\t\tlet key, imgSize;\r\n\r\n\t\tif (!isSelecting) {\r\n\t\t\timgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tsaveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t} else {\r\n\t\t\tlet { selectedObject } = this.props;\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet context = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\timgSize = `Size: ${Math.abs(size.width)} x ${Math.abs(size.height)}`;\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\t\t\tcontext.putImageData(imageDate, 0, 0);\r\n\t\t\tsaveImg = canvas.toDataURL('image/png');\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\tkey = name + date + imgSize;\r\n\t\ttry {\r\n\t\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `${isSelecting ? \r\n\t\t\t\t\t\t'Фрагмент был сохранён в хранилище.' \r\n\t\t\t\t\t\t: 'Холст был сохранён в хранилище.'\r\n\t\t\t\t\t}`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2500\r\n\t\t\t\t});\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.log(\"Storage failed: \" + e);\r\n\t\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Сохранить в хранилище\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button cloud-upload\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\t//resetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveToStorage.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveToStorage);","export const enableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_INFO_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_INFO_MODAL'\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { disableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nconst InfoBox = ({disableInfoModal}) => (\r\n\t<div>\r\n\t\t<div className=\"uk-margin-medium-bottom\">\r\n\t\t\t<h1 className=\"uk-heading-divider uk-flex uk-flex-between uk-margin-small-left uk-margin-small-right\">\r\n\t\t\tКраткая справка:\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-margin-left uk-icon-button close uk-overlay\" uk-overlay-icon=\"true\" \r\n\t\t\t\t\tonClick={() => disableInfoModal()}\r\n\t\t\t\t></span>\r\n\t\t\t</h1>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<ul>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pencil\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle \">Ручка. Используется для того, чтобы рисовать линии</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pipette\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Пипетка. Даёт возможность получить цвет в определённой точке холста</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle eraser\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Ластик. Ластик используется для очистки произвольного фрагмента</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle paint-bucket\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Заливка. Можно использовать для заливки области</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle selection\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Выделение. Выделив часть холста можно сохранить её либо на компьютер, либо в хранилище</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle trash\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Очищает холст</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle download\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Скачивание. Скачивает либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i></span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle upload\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Загрузка. Загружает выбранное изображение(<span className=\"uk-text-warning\">изображене будет сжато, если его размеры будут больше размеров холста</span>)</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle cloud-upload\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Сохранение. Сохранение либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i> в Хранилище</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle storage\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище. Открывает окно, где храняться сохранённые изображения</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle info\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Справка. Открывает окно с краткой справкой</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<h3>Хранилище</h3>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище - место, куда можно сохранить изображения без скачивания их на компьютер, а также место, куда сохраняются изображения при обновлени/закрытии вкладки. Можно удалить все изображения, скачать их, включить/выключить сохранение изображения при обновлени/закрытии вкладки. Имя изображения можно изменить кликнув на него</span>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tdisableInfoModal: disableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBox.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\tdisableInfoModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBox);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableInfoModal }  from './../../store/actions/infoModalActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport InfoBox from './../InfoBox';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nclass InfoBoxModal extends Component {\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tclickHandle = () => {\r\n\t\tthis.getCursor().style.display = 'none';\r\n\t\tthis.props.enableInfoModal();\r\n\t} \r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Помощь\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button info\"\r\n\t\t\t\t\tonClick={this.clickHandle.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={this.props.isOpen}\r\n\t\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<InfoBox />\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBoxModal.propTypes = {\r\n\tisOpen: PropTypes.bool,\r\n\tenableInfoModal: PropTypes.func\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBoxModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport SaveButton from './Panel/SaveButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst Panel = ({penType, isSelecting}) => (\r\n\t<div>\r\n\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(Panel);","export const pencil = 'pencil';\r\nexport const pipette = 'pipette';\r\nexport const eraser = 'eraser';\r\nexport const paintBucket = 'paint-bucket';\r\nexport const none = 'none';","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\tresetSelectedObject\r\n} from './../store/actions/canvasActions';\r\n\r\nimport {\r\n\tpencil,\r\n\tpipette,\r\n\teraser,\r\n\tpaintBucket,\r\n\tnone\r\n} from './../modules/PenTypeConsts';\r\n\r\nimport { \r\n\tchangeColor, \r\n\tchangePipetteColor\r\n} from './../store/actions/penActions';\r\n\r\nimport { \r\n\thexToRGB,\r\n\tfloodFillImageData,\r\n\t/*chkObjForEmptiness,*/\r\n\tchkObjForNonEmptiness,\r\n\t/*loadWebAssembly*/ \r\n} from './../modules/Tools';\r\n\r\nimport { Vector2 } from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tgetCanvas = () => this.refs.canvas;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\r\n\t\tthis.props.setContext(ctx);\r\n\r\n\t\tcanvas.width = window.innerWidth;\r\n\t\tcanvas.height = window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight;\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n\t\t});\r\n\r\n\t\tctx.strokeStyle = this.props.color;\r\n\t\tctx.lineJoin = \"round\";\r\n\t\tctx.lineCap = \"round\";\r\n\t\tctx.lineWidth = this.props.thickness;\r\n\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tlet { \r\n\t\t\tpenType, \r\n\t\t\tthickness, \r\n\t\t\tpipetteColor, \r\n\t\t\tcolor \r\n\t\t} = this.props;\r\n\r\n\t\tif (penType !== none) {\r\n\t\t\tcursor.style.display = 'block';\r\n\t\t\tcursor.style.width = `${thickness + 5}px`;\r\n\t\t\tcursor.style.height = `${thickness + 5}px`;\r\n\t\r\n\t\t\tcursor.style.top = `${e.pageY - Number.parseInt(cursor.style.height)/2}px`;\r\n\t\t\tcursor.style.left = `${e.pageX - Number.parseInt(cursor.style.width)/2}px`;\r\n\t\r\n\t\t\tif (penType === pencil || penType === paintBucket) \r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\t\t\telse if (penType === pipette) \r\n\t\t\t\tcursor.style.backgroundColor  = `${pipetteColor}`;\r\n\t\t\telse if (penType === eraser) \r\n\t\t\t\tcursor.style.backgroundColor = '#ffffff';\r\n\r\n\t\t} else {\r\n\t\t\tcursor.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tlet  {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color,\r\n\t\t\tpipetteColor \t\r\n\t\t} =  this.props;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (this.state.isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === pipette)\r\n\t\t\t\tctx.strokeStyle = pipetteColor;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tctx.moveTo(this.state.lastX, this.state.lastY);\r\n\t\t\tctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n\t\t\tctx.stroke();\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tconst [x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\tconst imgData = this.props.ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tthis.props.changePipetteColor(`rgba(${pixel.join(',')})`);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tlet color = hexToRGB(this.props.color);\r\n\t\tlet imageData = this.props.ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {\r\n\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\ty: e.nativeEvent.offsetY\r\n\t\t}\r\n\t\tconst imgData = this.props.ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tthis.props.ctx.putImageData(floodFillImageData(imageData, color, startPoint, backgroundColor), 0, 0);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tif (this.props.penType === pipette) this.pickColor(e);\r\n\t\telse if (this.props.penType === paintBucket) this.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tlet  { ctx } =  this.props;\r\n\t\tlet { \r\n\t\t\tlastX, lastY, \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tctx.lineWidth = 1;\r\n\t\tif (selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = lastX - selectStartX;\r\n\t\t\t\tlet height = lastY - this.state.selectStartY;\r\n\t\t\t\tctx.setLineDash([4, 4]);\r\n\r\n\t\t\t\tctx.lineDashOffset = 0;\r\n\t\t\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\t\t\t\t});\r\n\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMoveEvent = e => {\r\n\t\tlet canvas = this.getCanvas();\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tthis.selectingDraw(e);\r\n\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t} else {\r\n\t\t\tthis.draw(e);\r\n\t\t\tcanvas.style.cursor = 'none';\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseDownEvent = e => {\r\n\t\tlet  { ctx, isSelecting, selectedObject } =  this.props;\r\n\t\tlet {  \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart, beforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tif (chkObjForNonEmptiness(selectedObject)) \r\n\t\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\r\n\t\t\tlet canvas = this.getCanvas();\r\n\t\t\tlet imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: selectStartX === undefined ? e.nativeEvent.offsetX : selectStartX,\r\n\t\t\t\tselectStartY: selectStartY === undefined ? e.nativeEvent.offsetY : selectStartY,\r\n\t\t\t\tbeforeImageData: !selectStart ? imageData : beforeImageData,\r\n\t\t\t\tselectStart: true\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: isSelecting ? false : true,\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseUpEvent = e => {\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tlet width = this.state.lastX - this.state.selectStartX;\r\n\t\t\tlet height = this.state.lastY - this.state.selectStartY;\r\n\t\t\tlet selectObject = {\r\n\t\t\t\tstartVector: new Vector2(this.state.selectStartX, this.state.selectStartY),\r\n\t\t\t\tendVector: new Vector2(this.state.lastX, this.state.lastY)\r\n\t\t\t}\r\n\t\t\tthis.props.updateSelectedObject(selectObject);\r\n\t\t\tthis.props.ctx.setLineDash([4, 4]);\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.ctx.strokeRect(this.state.selectStartX, this.state.selectStartY, width, height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: undefined,\r\n\t\t\t\tselectStartY: undefined,\r\n\t\t\t\tselectStart: false,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseOutEvent = e => {\r\n\t\tthis.setState({\r\n\t\t\tisDrawing: false\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref=\"canvas\" \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\t\t\t\t\tonMouseMove={this.onMouseMoveEvent.bind(this)}\r\n\t\t\t\t\tonMouseDown={this.onMouseDownEvent.bind(this)}\r\n\t\t\t\t\tonMouseUp={this.onMouseUpEvent.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t</canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpipetteColor: state.penProperty.pipetteColor,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeColor: changeColor,\r\n\t\tchangePipetteColor: changePipetteColor,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired,\r\n\tchangePipetteColor: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React from 'react';\r\n\r\nconst DisplayError = () => {\r\n\treturn(\r\n\t\t<div className=\"uk-container uk-margin-small-top\">\r\n\t\t\t<div className=\"uk-card uk-card-default uk-width-1-2@m\">\r\n\t\t\t\t<div className=\"uk-card-header\">\r\n\t\t\t\t\t<div className=\"uk-grid-small uk-flex-middle\" uk-grid=\"true\">\r\n\t\t\t\t\t  <div className=\"uk-width-expand uk-flex uk-flex-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"uk-card-title uk-margin-remove-bottom\">Ваш браузер не поддерживается</h3>\r\n\t\t\t\t\t \t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-card-body uk-flex uk-flex-center\">\r\n\t\t\t\t  <button className=\"uk-button uk-button-danger uk-button-small\">Кинуть в faramo_zayw тапок</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DisplayError;","import React, { Component } from 'react';\r\nimport './../css/App.css';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport Panel from './Panel';\r\nimport Canvas from './Canvas';\r\nimport DisplayError from './DisplayError';\r\n\r\nimport { enableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nclass App extends Component {\r\n\tonUnload = (e) => {\r\n\t\tlet  { ctx } = this.props;\r\n\t\tlet autosave = docCookies.getItem(\"autosaveEnable\");\r\n\t\tautosave = JSON.parse(autosave);\r\n\t\tif (autosave) {\r\n\t\t\tlet saveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t\tlet name = `Name: Несохраненный  рисунок`;\r\n\t\t\tlet date = `Date: ${Date.now()}`;\r\n\t\t\tlet imgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tlet key = name + date + imgSize;\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet exist = docCookies.hasItem(\"firstLogin\");\r\n\t\t\tif (exist) {\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"false\")\r\n\t\t\t} else {\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"true\");\r\n\t\t\t\tdocCookies.setItem(\"autosaveEnable\", \"false\");\r\n\t\t\t\tthis.props.enableInfoModal();\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(`Failed with error: ${e}`);\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('beforeunload', this.onUnload);\r\n\t}\r\n\r\n\tcomponentDidUmmount() {\r\n\t\twindow.removeEventListener(\"beforeunload\", this.onUnload)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst app = !(window.innerWidth < 800) ? \r\n\t\t(\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Panel />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t) : <DisplayError />;\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{app}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nApp.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n\tpipetteColor: '#000000'\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","const storageModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default storageModal;\r\n","const infoModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default infoModal;\r\n","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\nimport modalStorageReducer from './store/reducers/modalStorageReducer';\r\nimport infoModalReducer from './store/reducers/infoModalReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer,\r\n\t\"modalStorage\": modalStorageReducer,\r\n\t\"infoModal\": infoModalReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PIPETTE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpipetteColor: action.payload\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: state.isSelecting && true,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tselectedObject: {},\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\tpenType: 'pencil',\r\n\t\t\t\tisSelecting: false\r\n\t\t\t}\r\n\t\tcase 'RESET_SELECT_OBJECT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import storageModal from './../data/storageModal';\r\n\r\nexport default (state = storageModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tcase 'RE_RENDER_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\treRender: Math.random()\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import infoModal from './../data/infoModal';\r\n\r\nexport default (state = infoModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tapplyMiddleware(thunk), \r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}