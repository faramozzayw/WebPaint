{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","modules/Tools.js","components/Panel/DownloadButton.jsx","modules/PenTypeConsts.js","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","store/actions/modalStorageActions.js","components/Panel/Storage/ImageCard.jsx","components/Panel/Storage/StorageModal.jsx","components/Panel/Storage.jsx","components/Panel/Storage/SaveToStorage.jsx","store/actions/infoModalActions.js","components/InfoBox.jsx","components/Panel/InfoBoxModal.jsx","components/Panel.jsx","components/PanelMobile.jsx","components/Canvas.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","store/data/storageModal.js","store/data/infoModal.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","store/reducers/modalStorageReducer.js","store/reducers/infoModalReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","connect","state","thickness","penProperty","dispatch","bindActionCreators","_ref","react_default","a","createElement","className","onChange","e","target","color","htmlFor","id","ClearButton","handleClick","ctx","_this","props","rect","canvas","width","height","fillStyle","fill","uk-tooltip","onClick","this","bind","Component","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","resetSelectedObject","updateSelectedObject","Vector2","x","y","Object","classCallCheck","Array","isArray","console","log","TypeError","Error","Number","_thisX","_thisY","isFinite","VectorStart","VectorEnd","hexToRGB","hex","r","parseInt","slice","g","b","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","blue","stack","length","pop","pointColor","data","push","sortByDateNewOld","elem1","elem2","regexDate","key1","keys","next","key2","date1","match","replace","sortByDateOldNew","getStorageElemsMap","arr","i","localStorage","map","Map","key","item","getItem","set","chkObjForNonEmptiness","object","entries","constructor","DownloadButton","link","React","createRef","isSelecting","selectedObject","current","href","document","querySelector","toDataURL","localCtx","getContext","size","getBoxSize","startVector","endVector","Math","abs","getImageData","imageDate","putImageData","remove","download","UIkit","notification","message","concat","pos","timeout","ref","downloadCanvasAsImg","pencil","pipette","eraser","paintBucket","none","UploadButton","persist","window","File","FileReader","FileList","Blob","alert","confirm","files","file","reader","onload","_ref2","result","Image","dataUri","image","innerHeight","innerWidth","drawImage","src","onerror","error","code","readAsDataURL","uploadImgAsCanvas","Selection","enableModal","disableModal","reRenderModal","ImageCard","showEditForm","editInput","onCanvas","finishEditName","_this$props","stringKey","date","removeItem","setItem","setState","deleteImg","headerClick","prevState","disableEditForm","_this$props2","imgData","info","string","name","regexSize","String","Date","parseKey","hidden","alt","defaultValue","PureComponent","StorageModal","sortBy","clearHandle","clear","forceUpdate","handleChange","event","autosaveControlClick","str","autosave","docCookies","JSON","parse","toString","downloadAllImg","list","body","appendChild","regexName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","elem","values","click","err","return","removeChild","_this2","listMap","sort","Storage_ImageCard","floor","random","isOpen","modalStorage","reRender","Modal","setAppElement","style","display","lib_default","contentLabel","Storage_StorageModal","SaveToStorage","now","imgSize","saveImg","context","enableInfoModal","disableInfoModal","infoModal","uk-overlay-icon","components_InfoBox","penType","uk-navbar","Panel_ColorPicker","Panel_Thickness","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_DownloadButton","Panel_UploadButton","Storage_SaveToStorage","Storage","Panel_InfoBoxModal","uk-toggle","uk-offcanvas","Canvas","mobile","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","getCursor","cursor","top","pageY","left","pageX","pickColor","changedTouches","clientX","py","clientY","clientHeight","nativeEvent","offsetX","offsetY","join","floodFill","_this$props3","rgbColor","draw","_this$props4","_this$state","_e$nativeEvent","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","stroke","touchMoveEventLister","_this$props5","_this$state2","touches","touchStartEventLister","touchEndEventLister","onClickHandle","selectingDraw","_this$state3","lineDashOffset","strokeRect","onMouseMoveEvent","onMouseDownEvent","_this$props6","_this$state4","_e$nativeEvent2","onMouseUpEvent","_this$state5","_this$props7","onMouseOutEvent","_this$props8","test","navigator","userAgent","lineJoin","lineCap","resetCanvas","onTouchMove","onTouchStart","onMouseOut","onTouchEnd","onTouchCancel","onMouseMove","onMouseDown","onMouseUp","App","onUnload","hasItem","addEventListener","removeEventListener","app","components_PanelMobile","components_Canvas","components_Panel","Boolean","location","hostname","storageModal","rootReducer","combineReducers","arguments","action","objectSpread","assign","store","createStore","compose","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2ff01504.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nconst Thickness = ({changeThickness}) =>  (\r\n\t<div>\r\n\t\t<label className=\"thickness\">Толщина шрифта:\r\n\t\t\t<select \r\n\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\tonChange={e => changeThickness(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t1\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t2\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t4\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t8\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t16\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t32\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t64\r\n\t\t\t\t</option>\r\n\t\t\t</select>\r\n\t\t</label>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nconst ColorPicker = ({ changeColor }) => (\r\n\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t<input \r\n\t\t\ttype=\"color\" \r\n\t\t\tid=\"colorPicker\" \r\n\t\t\tonChange={e => changeColor(e.target.value)} \r\n\t\t/>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tlet { ctx } = this.props;\r\n\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Очистить холст\"\r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button trash icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetSelectedObject = () => {\r\n\treturn {\r\n\t\ttype: 'RESET_SELECT_OBJECT'\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export default class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n}","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n  }\r\n\r\n  return imageData;\r\n}\r\n\r\nexport const sortByDateNewOld = (elem1, elem2) => {\r\n\tlet regexDate = /Date: (\\d+)(?=Size)/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\r\n\treturn date2 - date1; // от новых к старым\r\n}\r\n\r\nexport const sortByDateOldNew  = (elem1, elem2) => {\r\n\tlet regexDate = /Date: (\\d+)(?=Size)/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\r\n\treturn date1 - date2; // от старых к новым\r\n}\r\n\r\nexport const parseKey = string => {\r\n\tlet regexName = /Name: (.*?)(?=Date)/g;\r\n\tlet name = string.match(regexName)[0].replace(/Name: (.*)/, \"$1\");\r\n\r\n\tlet regexDate = /Date: (\\d+)/g;\r\n\tlet resultRegexDate = /^.*(?= GMT)/g;\r\n\tlet date = Number.parseInt(string.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10)\r\n\tdate = String(new Date(date));\r\n\tdate = date.match(resultRegexDate)[0];\r\n\r\n\tlet regexSize = /Size: (.*)$/g;\r\n\tlet size = string.match(regexSize)[0].replace(regexSize, \"$1\");\r\n\r\n\treturn {\r\n\t\tname: name,\r\n\t\tdate: date,\r\n\t\tsize: size\r\n\t}\r\n}\r\n\r\nexport const getStorageElemsMap = () => {\r\n\tlet arr = [];\r\n\tfor (let i = 0; i < localStorage.length; i++) {\r\n\t\tlet map = new Map();\r\n\t\tlet key = localStorage.key(i);\r\n\t\tlet item = localStorage.getItem(key);\r\n\t\tmap.set(key, item);\r\n\t\tarr.push(map);\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nexport const chkObjForEmptiness = object => (Object.entries(object).length === 0 && object.constructor === Object) ? true : false;\r\nexport const chkObjForNonEmptiness = object => !(Object.entries(object).length === 0 && object.constructor === Object) ? true : false;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tresetCanvasActions, \r\n\tresetSelectedObject \r\n}  from './../../store/actions/canvasActions';\r\n\r\nimport Vector2 from './../../modules/Vector2';\r\nimport { chkObjForNonEmptiness } from './../../modules/Tools' \r\nimport UIkit from 'uikit';\r\n\r\nclass DownloadButton extends Component {\r\n\tlink = React.createRef()\r\n\r\n\tasync downloadCanvasAsImg(e) {\r\n\t\tlet { \r\n\t\t\tisSelecting, \r\n\t\t\tresetSelectedObject,\r\n\t\t\tresetCanvasActions,\r\n\t\t\tselectedObject\r\n\t\t} = this.props;\r\n\r\n\t\tlet link = this.link.current;\r\n\t\tif (!isSelecting)\r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\telse if (isSelecting && chkObjForNonEmptiness(selectedObject)) {\r\n\t\t\tlet { ctx } = this.props;\r\n\r\n\t\t\tawait resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet localCtx = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tlocalCtx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t\tresetSelectedObject();\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\t\tlink.download = 'canvasImage.png';\r\n\t\tUIkit.notification({\r\n\t\t\tmessage: `${\r\n\t\t\t\tisSelecting ? \r\n\t\t\t\t\"Фрагмент был сохранён на устройство\"\r\n\t\t\t\t: \"Холст был сохранён на устройство\"\r\n\t\t\t}`,\r\n\t\t\tpos: 'bottom-right',\r\n\t\t\ttimeout: 2500\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\tuk-tooltip=\"Скачать холст\"\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref={this.link}\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button download icon\"\r\n\t\t\t\t\tonClick={this.downloadCanvasAsImg.bind(this)}\r\n\t\t\t\t> </a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nDownloadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DownloadButton);","export const pencil = 'pencil';\r\nexport const pipette = 'pipette';\r\nexport const eraser = 'eraser';\r\nexport const paintBucket = 'paint-bucket';\r\nexport const none = 'none';","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { pipette } from './../../modules/PenTypeConsts';\r\n\r\nconst Pipette = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Пипетка\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette icon\" \r\n\t\t\tonClick={() => changePenType(pipette)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { pencil } from './../../modules/PenTypeConsts';\r\n\r\nconst Pen = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Ручка\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button pencil icon\" \r\n\t\t\tonClick={() => changePenType(pencil)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { eraser } from './../../modules/PenTypeConsts';\r\n\r\nconst Eraser = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Ластик\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser icon\" \r\n\t\t\tonClick={() => changePenType(eraser)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport UIkit from 'uikit';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif(!window.File || !window.FileReader || !window.FileList || !window.Blob){\r\n\t\t\talert(\"Ваш браузер не поддерживает эту функцию :(\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\tlet { ctx } = this.props;\r\n\t\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tawait ctx.fill();\r\n\r\n\t\t\tlet [file, reader] = [e.target.files[0], new FileReader()];\r\n\t\t\t\r\n\t\t\treader.onload = e => {\r\n\t\t\t\tlet [dataUri, image] = [e.target.result, new Image()];\r\n\r\n\t\t\t\timage.onload = () => {\r\n\t\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\t\t\telse if (image.height > window.innerHeight) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\r\n\t\t\t\t\telse if (image.width > window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t}\r\n\r\n\t\t\t\timage.src = dataUri;\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `Файл был удачно загружен`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.onerror = e => {\r\n\t\t\t\tconsole.log(`Error loading file. Code: ${e.target.error.code}`);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `При загрузке файла произошла ошибка, попробуйте снова.`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tuk-tooltip=\"Загрузить фото\"\r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button upload icon\"\r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(UploadButton);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { paintBucket } from './../../modules/PenTypeConsts';\r\n\r\nconst FloodFill  = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Заливка цветом\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button paint-bucket icon\" \r\n\t\t\tonClick={() => changePenType(paintBucket)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changeIsSelecting(true)\r\n\t\tif (this.props.isSelecting) \r\n\t\t\tthis.props.resetCanvasActions(true)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Выделение области\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tchangeIsSelecting: PropTypes.func.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","export const enableModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const reRenderModal = () => {\r\n\treturn {\r\n\t\ttype: 'RE_RENDER_MODAL'\r\n\t}\r\n}","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types';\r\nimport { \r\n\treRenderModal, \r\n\tdisableModal \r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport { parseKey } from './../../../modules/Tools';\r\n\r\nclass ImageCard extends PureComponent {\r\n\tstate = {\r\n\t\tshowEditForm: false\r\n\t}\r\n\r\n\teditInput = React.createRef()\r\n\timage = React.createRef()\r\n\r\n\tonCanvas = () => {\r\n\t\tthis.props.ctx.drawImage(this.image.current, 0, 0);\r\n\t\tthis.props.disableModal();\r\n\t}\r\n\r\n\tfinishEditName = e => {\r\n\t\tlet { stringKey, reRenderModal } = this.props;\r\n\t\tlet date = localStorage.getItem(stringKey);\r\n\r\n\t\tlocalStorage.removeItem(stringKey);\r\n\r\n\t\t//let regexName = /(?<=Name: ).*(?=Date)/g;\r\n\t\tlet regexName = /Name: .*?(?=Date)/g;\r\n\t\tstringKey = stringKey.replace(regexName, `Name: ${this.editInput.current.value}`);\r\n\t\t\r\n\t\tlocalStorage.setItem(stringKey, date);\r\n\t\tthis.setState({\r\n\t\t\tshowEditForm: false\r\n\t\t}, reRenderModal);\r\n\t}\r\n\r\n\tdeleteImg = e => {\r\n\t\tlocalStorage.removeItem(this.props.stringKey);\r\n\t\tthis.props.reRenderModal();\r\n\t}\r\n\r\n\theaderClick = e => {\r\n\t\tthis.setState((prevState, props) => {\r\n\t\t\treturn {\r\n\t\t\t\tshowEditForm: !prevState.showEditForm \r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdisableEditForm = () => this.setState({ showEditForm: false })\r\n\r\n\trender() {\r\n\t\tlet { stringKey, imgData } = this.props;\r\n\t\tlet { showEditForm } = this.state;\r\n\t\tlet info = parseKey(stringKey);\r\n\t\tlet hidden = !showEditForm ? \"uk-hidden\" : \"\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-bottom uk-margin-left uk-card uk-width-medium uk-card-default uk-flex uk-flex-column uk-flex-between\">\r\n\t\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-flex-1\">\r\n\t\t\t\t\t<div className=\"uk-card-media-top uk-card-header\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"image-border\"\r\n\t\t\t\t\t\tsrc={imgData}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tref={this.image}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"uk-card-body padding\">\r\n\t\t\t\t\t\t<h4 \r\n\t\t\t\t\t\t\tclassName=\"uk-card-title uk-heading-bullet\"\r\n\t\t\t\t\t\t\tonClick={this.headerClick.bind(this)}\r\n\t\t\t\t\t\t>{info.name}</h4>\r\n\t\t\t\t\t\t<div id=\"editBox\" className={`${hidden} uk-margin-small-bottom`}>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tclassName=\"uk-input uk-form-width-small uk-form-small\" \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tdefaultValue={info.name} \r\n\t\t\t\t\t\t\t\tref={this.editInput}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button icon check\" \r\n\t\t\t\t\t\t\t\tonClick={this.finishEditName.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button icon close\" \r\n\t\t\t\t\t\t\t\tonClick={this.disableEditForm.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>Дата создания файла: <br/>{info.date}</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>Размеры: {info.size}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-button-group uk-width-1-1\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-primary uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.onCanvas.bind(this)}\r\n\t\t\t\t\t>На холст</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-danger uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.deleteImg.bind(this)}\r\n\t\t\t\t\t>Удалить</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\treRenderModal: reRenderModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nImageCard.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\treRenderModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCard);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport { \r\n\tenableModal, \r\n\tdisableModal\r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport UIkit from 'uikit';\r\nimport ImageCard from './ImageCard';\r\nimport { \r\n\tsortByDateNewOld, \r\n\tsortByDateOldNew,\r\n\tgetStorageElemsMap\r\n} from './../../../modules/Tools';\r\n\r\nclass StorageModal extends Component {\r\n\tstate = {\r\n\t\tsortBy: 'По дате(от новых к старым)'\r\n\t}\r\n\r\n\tclearHandle = () => {\r\n\t\tif (localStorage.length !== 0) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище было очищено.',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t\tthis.forceUpdate();\r\n\t\t} else \r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t}\r\n\r\n\thandleChange = event => this.setState({ sortBy: event.target.value })\r\n\r\n\tautosaveControlClick = () => {\r\n\t\tlet str = \"autosaveEnable\";\r\n\t\tlet autosave = docCookies.getItem(str);\r\n\t\tif(autosave !== null) {\r\n\t\t\tdocCookies.setItem(str, (!JSON.parse(autosave)).toString());\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadAllImg = () => {\r\n\t\tlet list = getStorageElemsMap();\r\n\t\tif(list.length === 0) {\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet link = document.createElement('a');\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlet regexName = /Name: .*?(?=Date)/g;\r\n\r\n\t\t\tfor(let elem of list) {\r\n\t\t\t\tlet key = elem.keys().next().value\r\n\t\t\t\tlet name = key.match(regexName)[0];\r\n\t\t\t\tname = name.replace(/Name: (.*)/, \"$1\");\r\n\t\t\t\tlink.download = `${name}.png`;\r\n\t\t\t\tlink.href = elem.values().next().value;\r\n\t\t\t\tlink.click();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet listMap = getStorageElemsMap();\r\n\t\tlet { sortBy } = this.state;\r\n\t\tif (sortBy === 'По дате(от новых к старым)') \r\n\t\t\tlistMap = listMap.sort(sortByDateNewOld);\r\n\t\telse if(sortBy === 'По дате(от старых к новым)')\r\n\t\t\tlistMap = listMap.sort(sortByDateOldNew);\r\n\r\n\t\tlet list = listMap.map(item => (\r\n\t\t\t<ImageCard\r\n\t\t\t\tkey={Math.floor(Math.random() * 100000000)}\r\n\t\t\t\tstringKey={item.keys().next().value}\r\n\t\t\t\timgData={item.values().next().value}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\tconst autosave = JSON.parse(docCookies.getItem(\"autosaveEnable\"));\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-height-1-1\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className=\"uk-heading-line uk-text-center\">\r\n\t\t\t\t\t\t<span>Сохранённые изображения</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4>На данный момент сохранено {localStorage.length} {`${localStorage.length === 1 ? 'изображение' : 'изображений' }`}.</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<fieldset className=\"uk-fieldset\">\r\n\t\t\t\t\t\t\t<legend className=\"uk-legend\">Сортировать: </legend>\r\n\t\t\t\t\t\t\t<div className=\"uk-margin\">\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclassName=\"uk-select uk-width-medium\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.sortBy}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от новых к старым)\">По дате(от новых к старым)</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от старых к новым)\">По дате(от старых к новым)</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch uk-flex-top\">\r\n\t\t\t\t\t{list}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-flex uk-flex-around uk-button-group uk-flex-wrap\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.downloadAllImg.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-default uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Скачать всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.autosaveControlClick.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-secondary uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>{`${autosave ? \"Выключить\" : \"Включить\"} автосохранение`}</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.clearHandle.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-danger uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Удалить всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.props.disableModal()}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-primary uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Закрыть</button>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen,\r\n\t\treRender: state.modalStorage.reRender,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal,\r\n\t\tdisableModal: disableModal,\r\n\t}, dispatch);\r\n}\r\n\r\nStorageModal.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\treRender: PropTypes.number.isRequired,\r\n\tenableModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StorageModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal }  from './../../store/actions/modalStorageActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport StorageModal from './Storage/StorageModal';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst ShowStorage = ({ isOpen, enableModal }) => {\r\n\tconst clickHandle = () => {\r\n\t\tdocument.querySelector('.cursor').style.display = 'none';\r\n\t\tenableModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t<span\r\n\t\t\t\tuk-tooltip=\"Открыть хранилище\"\r\n\t\t\t\tclassName=\"uk-icon uk-icon-button storage icon\"\r\n\t\t\t\tonClick={() => clickHandle()}\r\n\t\t\t></span>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isOpen}\r\n\t\t\t\tcontentLabel=\"Show storage Modal\"\r\n\t\t\t>\r\n\t\t\t\t<StorageModal />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal\r\n\t}, dispatch);\r\n}\r\n\r\nShowStorage.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired, \r\n\tenableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowStorage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport UIkit from 'uikit';\r\nimport { bindActionCreators } from 'redux';\r\nimport { resetCanvasActions }  from './../../../store/actions/canvasActions';\r\nimport Vector2 from './../../../modules/Vector2';\r\n\r\nclass SaveToStorage extends Component {\r\n\tasync handleClick() {\r\n\t\tlet { ctx, isSelecting } = this.props;\r\n\t\tlet saveImg;\r\n\t\tlet name = `Name: Рисунок №${localStorage.length + 1}`;\r\n\t\tlet date = `Date: ${Date.now()}`;\r\n\t\tlet key, imgSize;\r\n\r\n\t\tif (!isSelecting) {\r\n\t\t\timgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tsaveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t} else {\r\n\t\t\tlet { selectedObject } = this.props;\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet context = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\timgSize = `Size: ${Math.abs(size.width)} x ${Math.abs(size.height)}`;\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\t\t\tcontext.putImageData(imageDate, 0, 0);\r\n\t\t\tsaveImg = canvas.toDataURL('image/png');\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\tkey = name + date + imgSize;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: `${isSelecting ? \r\n\t\t\t\t\t'Фрагмент был сохранён в хранилище.' \r\n\t\t\t\t\t: 'Холст был сохранён в хранилище.'\r\n\t\t\t\t}`,\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(\"Storage failed: \");\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Сохранить в хранилище\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button cloud-upload icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\t//resetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveToStorage.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveToStorage);","export const enableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_INFO_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_INFO_MODAL'\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { disableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nconst InfoBox = ({ disableInfoModal }) => (\r\n\t<div id=\"info-box\">\r\n\t\t<div className=\"uk-margin-medium-bottom\">\r\n\t\t\t<h1 className=\"uk-heading-divider uk-flex uk-flex-between uk-margin-small-left uk-margin-small-right\">\r\n\t\t\tКраткая справка:\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-margin-left uk-icon-button close icon uk-overlay\" uk-overlay-icon=\"true\" \r\n\t\t\t\t\tonClick={() => disableInfoModal()}\r\n\t\t\t\t></span>\r\n\t\t\t</h1>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<ul>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pencil icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle \">Ручка. Используется для того, чтобы рисовать линии</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pipette icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Пипетка. Даёт возможность получить цвет в определённой точке холста</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle eraser icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Ластик. Ластик используется для очистки произвольного фрагмента</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle paint-bucket icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Заливка. Можно использовать для заливки области</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle selection icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Выделение. Выделив часть холста можно сохранить её либо на компьютер, либо в хранилище</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle trash icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Очищает холст</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle download icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Скачивание. Скачивает либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i></span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle upload icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Загрузка. Загружает выбранное изображение(<span className=\"uk-text-warning\">изображене будет сжато, если его размеры будут больше размеров холста</span>)</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle cloud-upload icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Сохранение. Сохранение либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i> в Хранилище</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle storage icon\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище. Открывает окно, где храняться сохранённые изображения</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle info icon\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Справка. Открывает окно с краткой справкой</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<h3>Хранилище</h3>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище - место, куда можно сохранить изображения без скачивания их на компьютер, а также место, куда сохраняются изображения при обновлени/закрытии вкладки. Можно удалить все изображения, скачать их, включить/выключить сохранение изображения при обновлени/закрытии вкладки. Имя изображения можно изменить кликнув на него</span>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tdisableInfoModal: disableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBox.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\tdisableInfoModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBox);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableInfoModal }  from './../../store/actions/infoModalActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport InfoBox from './../InfoBox';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst InfoBoxModal = ({ isOpen, enableInfoModal }) => {\r\n\tconst clickHandle = () => {\r\n\t\tdocument.querySelector('.cursor').style.display = 'none';\r\n\t\tenableInfoModal();\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t<span\r\n\t\t\t\tuk-tooltip=\"Помощь\"\r\n\t\t\t\tclassName=\"uk-icon uk-icon-button info icon\"\r\n\t\t\t\tonClick={() => clickHandle()}\r\n\t\t\t></span>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isOpen}\r\n\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t>\r\n\t\t\t\t<InfoBox />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBoxModal.propTypes = {\r\n\tisOpen: PropTypes.bool,\r\n\tenableInfoModal: PropTypes.func\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBoxModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport DownloadButton from './Panel/DownloadButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst Panel = ({penType, isSelecting}) => (\r\n\t<div>\r\n\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<DownloadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left  uk-margin-medium-right\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(Panel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport DownloadButton from './Panel/DownloadButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\n//import Selection from './Panel/Selection';\r\n//import Storage from './Panel/Storage';\r\n//import SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst PanelMobile = ({ penType, infoModal, modalStorage }) => (\r\n\t<div>\r\n\t\t<button className=\"uk-button uk-button-primary uk-width-1-1 panel-mobile border-x-none\" type=\"button\" uk-toggle=\"target: #offcanvas-nav-default\">Меню</button>\r\n\t\t<div id=\"offcanvas-nav-default\" uk-offcanvas={`${(infoModal || modalStorage) ? \"overlay: false\" : \"overlay: true\"}`}>\r\n\t\t\t<div className=\"uk-offcanvas-bar uk-flex uk-flex-column\">\r\n\r\n\t\t\t\t<ul className=\"uk-nav uk-nav-default uk-nav-center\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'pencil' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'pipette' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'eraser' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'paint-bucket' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<DownloadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{/*<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>*/}\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tinfoModal: state.infoModal.isOpen,\r\n\t\tmodalStorage: state.modalStorage.isOpen,\r\n\t}\r\n}\r\n\r\nPanelMobile.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tinfoModal: PropTypes.bool.isRequired,\r\n\tmodalStorage: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(PanelMobile);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\tresetSelectedObject,\r\n\tchangePenType\r\n} from './../store/actions/canvasActions';\r\n\r\nimport {\r\n\tpencil,\r\n\tpipette,\r\n\teraser,\r\n\tpaintBucket,\r\n\tnone\r\n} from './../modules/PenTypeConsts';\r\n\r\nimport { changeColor } from './../store/actions/penActions';\r\n\r\nimport { \r\n\thexToRGB,\r\n\tfloodFillImageData,\r\n\tchkObjForNonEmptiness,\r\n} from './../modules/Tools';\r\n\r\nimport Vector2 from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tmobile: false,\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tcanvas = React.createRef();\r\n\r\n\tgetCanvas = () => this.canvas.current;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\t\tlet { \r\n\t\t\tsetContext,\r\n\t\t\tcolor,\r\n\t\t\tthickness\r\n\t\t} = this.props;\r\n\t\tsetContext(ctx);\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height),\r\n\t\t\tmobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\r\n\t\t}, () => {\r\n\t\t\tcanvas.width = window.innerWidth;\r\n\t\t\tcanvas.height = !this.state.mobile\r\n\t\t\t? window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight \r\n\t\t\t: window.innerHeight - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\t\r\n\t\t\tctx.strokeStyle = color;\r\n\t\t\tctx.lineJoin = \"round\";\r\n\t\t\tctx.lineCap = \"round\";\r\n\t\t\tctx.lineWidth = thickness;\r\n\t\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tctx.fill();\r\n\t\t});\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tlet { \r\n\t\t\tpenType, \r\n\t\t\tthickness, \r\n\t\t\tcolor \r\n\t\t} = this.props;\r\n\r\n\t\tif (penType !== none) {\r\n\t\t\tcursor.style.display = 'block';\r\n\t\t\tcursor.style.width = `${thickness + 5}px`;\r\n\t\t\tcursor.style.height = `${thickness + 5}px`;\r\n\t\r\n\t\t\tcursor.style.top = `${e.pageY - Number.parseInt(cursor.style.height)/2}px`;\r\n\t\t\tcursor.style.left = `${e.pageX - Number.parseInt(cursor.style.width)/2}px`;\r\n\t\r\n\t\t\tif (penType === pencil) \r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\r\n\t\t\telse if(penType === paintBucket) {\r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\t\t\t\tcursor.style.width = `16px`;\r\n\t\t\t\tcursor.style.height = `16px`;\r\n\r\n\t\t\t} else if (penType === pipette) {\r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\t\t\t\tcursor.style.width = `8px`;\r\n\t\t\t\tcursor.style.height = `8px`;\r\n\r\n\t\t\t} else if (penType === eraser) \r\n\t\t\t\tcursor.style.backgroundColor = '#ffffff';\r\n\r\n\t\t} else \r\n\t\t\tcursor.style.display = 'none';\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tlet { mobile } = this.state;\r\n\t\tlet { changeColor, changePenType, ctx } = this.props;\r\n\r\n\t\tlet x, y;\r\n\t\tif (!mobile)\r\n\t\t\t[x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\telse if(mobile) {\r\n\t\t\tx = Math.floor(e.changedTouches[0].clientX);\r\n\t\t\tlet py = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(py >= 0)\r\n\t\t\t\ty = py;\r\n\t\t}\r\n\t\tconst imgData = ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tchangeColor(`rgba(${pixel.join(',')})`);\r\n\t\tchangePenType(pencil);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tconsole.log(e);\r\n\t\tconsole.log(\"started floodFill\");\r\n\t\tlet { color, ctx } = this.props;\r\n\t\tlet rgbColor = hexToRGB(color);\r\n\t\tlet imageData = ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {};\r\n\r\n\t\tlet { mobile } = this.state;\r\n\r\n\t\tif(!mobile) {\r\n\t\t\tstartPoint = {\r\n\t\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\t\ty: e.nativeEvent.offsetY\r\n\t\t\t}\r\n\t\t} else if(mobile) {\r\n\t\t\tlet x = Math.floor(e.changedTouches[0].clientX);\r\n\t\t\tlet y = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tstartPoint = {\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log(startPoint);\r\n\t\tconst imgData = ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tctx.putImageData(floodFillImageData(imageData, rgbColor, startPoint, backgroundColor), 0, 0);\r\n\t\tconsole.log(\"finished floodFill\");\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\t\r\n\t\tlet {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color \t\r\n\t\t} =  this.props;\r\n\t\tlet { lastX, lastY, isDrawing } = this.state;\r\n\t\tlet { offsetX, offsetY } = e.nativeEvent;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil || penType === pipette)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tctx.moveTo(lastX, lastY);\r\n\t\t\tctx.lineTo(offsetX, offsetY);\r\n\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: offsetX,\r\n\t\t\t\tlastY: offsetY\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\ttouchMoveEventLister = e => {\r\n\t\tlet {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color \t\r\n\t\t} =  this.props;\r\n\t\tlet { lastX, lastY, isDrawing } = this.state;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil || penType === pipette)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tlet x = e.touches[0].clientX;\r\n\t\t\tlet y = Math.floor(e.touches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tctx.moveTo(lastX, lastY);\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tlastX: x,\r\n\t\t\t\t\tlastY: y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\ttouchStartEventLister = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tlet\tx = e.changedTouches[0].clientX;\r\n\t\tlet\ty = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\r\n\t\tif(penType === pencil || penType === eraser) {\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisDrawing: true,\r\n\t\t\t\t\tlastX: x,\r\n\t\t\t\t\tlastY: y,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\ttouchEndEventLister = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tif (penType === pipette) \r\n\t\t\tthis.pickColor(e);\r\n\t\telse if (penType === paintBucket)\r\n\t\t\tthis.floodFill(e);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tif (penType === pipette) \r\n\t\t\tthis.pickColor(e);\r\n\t\telse if (penType === paintBucket) \r\n\t\t\tthis.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\t\r\n\t\tlet  { ctx } =  this.props;\r\n\t\tlet { \r\n\t\t\tlastX, lastY, \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tctx.lineWidth = 1;\r\n\t\tif (selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = lastX - selectStartX;\r\n\t\t\t\tlet height = lastY - selectStartY;\r\n\t\t\t\tctx.setLineDash([4, 4]);\r\n\r\n\t\t\t\tctx.lineDashOffset = 0;\r\n\t\t\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\t\t\t});\r\n\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMoveEvent = e => {\r\n\t\tlet canvas = this.getCanvas();\r\n\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tthis.selectingDraw(e);\r\n\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t} else if (this.state.isDrawing) {\r\n\t\t\tthis.draw(e);\r\n\t\t\tcanvas.style.cursor = 'none';\r\n\t\t} else\r\n\t\t\tthis.cursor(e);\r\n\t}\r\n\r\n\tonMouseDownEvent = e => {\r\n\t\tlet  { ctx, isSelecting, selectedObject } =  this.props;\r\n\t\tlet {  \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart, beforeImageData\r\n\t\t} = this.state;\r\n\t\tlet { offsetX, offsetY } = e.nativeEvent;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tif (chkObjForNonEmptiness(selectedObject)) \r\n\t\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\r\n\t\t\tlet canvas = this.getCanvas();\r\n\t\t\tlet imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: selectStartX === undefined ? offsetX : selectStartX,\r\n\t\t\t\tselectStartY: selectStartY === undefined ? offsetY : selectStartY,\r\n\t\t\t\tbeforeImageData: !selectStart ? imageData : beforeImageData,\r\n\t\t\t\tselectStart: true\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: isSelecting ? false : true,\r\n\t\t\t\tlastX: offsetX,\r\n\t\t\t\tlastY: offsetY,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseUpEvent = e => {\r\n\t\tlet {\r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tlastX, lastY,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\t\tlet {\r\n\t\t\tctx, updateSelectedObject,\r\n\t\t\tisSelecting\r\n\t\t} =  this.props;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tlet width = lastX - selectStartX;\r\n\t\t\tlet height = lastY - selectStartY;\r\n\t\t\tlet selectObject = {\r\n\t\t\t\tstartVector: new Vector2(selectStartX, selectStartY),\r\n\t\t\t\tendVector: new Vector2(lastX, lastY)\r\n\t\t\t}\r\n\r\n\t\t\tupdateSelectedObject(selectObject);\r\n\t\t\tctx.setLineDash([4, 4]);\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: undefined,\r\n\t\t\t\tselectStartY: undefined,\r\n\t\t\t\tselectStart: false,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseOutEvent = e => {\r\n\t\tthis.setState({\r\n\t\t\tisDrawing: false\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t{ !this.state.mobile ? (\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref={this.canvas} \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonMouseMove={this.onMouseMoveEvent.bind(this)}\r\n\t\t\t\t\tonMouseDown={this.onMouseDownEvent.bind(this)}\r\n\t\t\t\t\tonMouseUp={this.onMouseUpEvent.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\r\n\t\t\t\t></canvas>) \r\n\t\t\t\t: (<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref={this.canvas} \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonTouchMove={this.touchMoveEventLister.bind(this)}\r\n\t\t\t\t\tonTouchStart={this.touchStartEventLister.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonTouchEnd={this.touchEndEventLister.bind(this)}\r\n\t\t\t\t\tonTouchCancel={this.onMouseOutEvent.bind(this)}\r\n\r\n\t\t\t\t></canvas>)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject,\r\n\t\tchangePenType: changePenType,\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React, { Component } from 'react';\r\nimport './../css/App.css';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport Panel from './Panel';\r\nimport PanelMobile from './PanelMobile';\r\nimport Canvas from './Canvas';\r\n//import DisplayError from './DisplayError';\r\n\r\nimport { enableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nclass App extends Component {\r\n\tonUnload = e => {\r\n\t\tlet  { ctx } = this.props;\r\n\t\tlet autosave = docCookies.getItem(\"autosaveEnable\");\r\n\t\tautosave = JSON.parse(autosave);\r\n\t\tif (autosave) {\r\n\t\t\tlet saveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t\tlet name = `Name: Несохраненный  рисунок`;\r\n\t\t\tlet date = `Date: ${Date.now()}`;\r\n\t\t\tlet imgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tlet key = name + date + imgSize;\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet exist = docCookies.hasItem(\"firstLogin\");\r\n\t\t\tif (exist)\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"false\")\r\n\t\t\telse {\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"true\");\r\n\t\t\t\tdocCookies.setItem(\"autosaveEnable\", \"false\");\r\n\t\t\t\tthis.props.enableInfoModal();\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"Failed with error: \");\r\n\t\t\tconsole.log(e);\r\n\t\t\t\r\n\t\t} finally {\r\n\t\t\twindow.addEventListener('beforeunload', this.onUnload);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUmmount() {\r\n\t\twindow.removeEventListener(\"beforeunload\", this.onUnload)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\t\tconst app = !mobile ? \r\n\t\t(\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Panel />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<PanelMobile />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{app}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nApp.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","const storageModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default storageModal;\r\n","const infoModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default infoModal;\r\n","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\nimport modalStorageReducer from './store/reducers/modalStorageReducer';\r\nimport infoModalReducer from './store/reducers/infoModalReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer,\r\n\t\"modalStorage\": modalStorageReducer,\r\n\t\"infoModal\": infoModalReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: state.isSelecting && true,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tselectedObject: {},\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\tpenType: 'pencil',\r\n\t\t\t\tisSelecting: false\r\n\t\t\t}\r\n\t\tcase 'RESET_SELECT_OBJECT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import storageModal from './../data/storageModal';\r\n\r\nexport default (state = storageModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tcase 'RE_RENDER_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\treRender: Math.random()\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import infoModal from './../data/infoModal';\r\n\r\nexport default (state = infoModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose } from 'redux';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}