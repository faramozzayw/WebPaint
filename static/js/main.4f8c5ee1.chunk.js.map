{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","components/Panel/SaveButton.jsx","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","components/Panel.jsx","modules/Tools.js","components/Canvas.jsx","components/DisplayError.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","changePipetteColor","Thickness","handleChange","event","_this","props","target","react_default","a","createElement","className","onChange","this","bind","Component","connect","state","thickness","penProperty","dispatch","bindActionCreators","ColorPicker","htmlFor","id","color","ClearButton","handleClick","ctx","rect","canvas","width","height","fillStyle","fill","uk-icon","onClick","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","updateSelectedObject","Vector2","x","y","Object","classCallCheck","Array","isArray","console","log","TypeError","Error","_ref","Number","_thisX","_thisY","isFinite","createClass","key","arguments","length","undefined","VectorStart","VectorEnd","SaveButton","e","link","refs","isSelecting","href","document","querySelector","toDataURL","getContext","size","getBoxSize","selectedObject","startVector","endVector","Math","abs","imageDate","getImageData","putImageData","download","ref","saveCanvasAsImg","Pipette","Pen","Eraser","UploadButton","persist","window","confirm","file","files","reader","FileReader","image","Image","onload","src","result","innerHeight","innerWidth","drawImage","readAsDataURL","uploadImgAsCanvas","FloodFill","Selection","Panel","uk-navbar","Panel_ColorPicker","Panel_Thickness","concat","penType","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_SaveButton","Panel_UploadButton","hexToRGB","hex","r","parseInt","slice","g","b","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","blue","stack","pop","pointColor","data","push","Canvas","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","getCursor","cursor","style","display","top","pageY","left","pageX","pipetteColor","draw","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","nativeEvent","offsetX","offsetY","stroke","setState","pickColor","join","floodFill","imgData","onClickHandle","selectingDraw","lineDashOffset","strokeRect","clientHeight","lineJoin","lineCap","_this2","resetCanvas","onMouseMove","onMouseDown","onMouseUp","selectObject","onMouseOut","DisplayError","uk-grid","App","app","components_DisplayError","components_Panel","components_Canvas","Boolean","location","hostname","match","rootReducer","combineReducers","action","objectSpread","assign","store","createStore","compose","applyMiddleware","thunk","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4f8c5ee1.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePipetteColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PIPETTE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nclass Thickness extends Component {\r\n\thandleChange = event => this.props.changeThickness(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<label>Толщина шрифта:\r\n\t\t\t\t\t<select \r\n\t\t\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t\t\t4\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t\t\t8\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t\t\t16\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t\t\t32\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t\t\t64\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nclass ColorPicker extends Component {\r\n\thandleChange = event => this.props.changeColor(event.target.value);\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t\t\t<input \r\n\t\t\t\t\ttype=\"color\" \r\n\t\t\t\t\tid=\"colorPicker\" \r\n\t\t\t\t\tonChange={this.handleChange.bind(this)} \r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.ctx.rect(0, 0, this.props.ctx.canvas.width, this.props.ctx.canvas.height);\r\n\t\tthis.props.ctx.fillStyle = '#ffffff';\r\n\t\tthis.props.ctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button\" \r\n\t\t\t\t\tuk-icon=\"trash\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n\r\n\tupdateVector2(x = this.x, y = this.y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { resetCanvasActions }  from './../../store/actions/canvasActions';\r\nimport { Vector2 } from './../../modules/Vector2';\r\n\r\nclass SaveButton extends Component {\r\n\tasync saveCanvasAsImg(e) {\r\n\t\tlet link = this.refs.link;\r\n\t\tif (!this.props.isSelecting) {\r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\t} else if (this.props.isSelecting) {\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet ctx = canvas.getContext('2d');\r\n\t\t\tconsole.log('test');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(this.props.selectedObject.startVector, this.props.selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = this.props.ctx.getImageData(\r\n\t\t\t\tthis.props.selectedObject.startVector.x,\r\n\t\t\t\tthis.props.selectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tlet link = this.refs.link;\r\n\t\t\tctx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t}\r\n\t\tlink.download = 'canvasImage.png';\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button\"\r\n\t\t\t\t\tuk-icon=\"download\"  \r\n\t\t\t\t\tonClick={this.saveCanvasAsImg.bind(this)}\r\n\t\t\t\t></a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSaveButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Pipette extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('pipette')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Pen extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button\" \r\n\t\t\t\t\tuk-icon=\"pencil\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('pencil')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass Eraser extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('eraser')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\tthis.props.ctx.rect(0, 0, this.props.ctx.canvas.width, this.props.ctx.canvas.height);\r\n\t\t\tthis.props.ctx.fillStyle = '#ffffff';\r\n\t\t\tawait this.props.ctx.fill();\r\n\r\n\t\t\tlet file = e.target.files[0];\r\n\t\t\tlet reader = new FileReader();\r\n\t\t\tlet image = new Image();\r\n\t\t\t\r\n\t\t\treader.onload = e => {\r\n\t\t\t\timage.src = e.target.result\r\n\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) {\r\n\t\t\t\t\tthis.props.ctx.drawImage(image, 0, 0);\r\n\t\t\t\t} else if (image.height > window.innerHeight) {\r\n\t\t\t\t\tthis.props.ctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\t\t\t\t} else if (image.width > window.innerWidth) {\r\n\t\t\t\t\tthis.props.ctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label \r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button\"\r\n\t\t\t\t\tuk-icon=\"upload\" \r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref=\"link\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object\r\n}\r\n\r\nexport default connect(mapStateToProps)(UploadButton);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nclass FloodFill extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button\" \r\n\t\t\t\t\tuk-icon=\"paint-bucket\" \r\n\t\t\t\t\tonClick={() => this.props.changePenType('paint-bucket')}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changeIsSelecting(true)\r\n\t\tif (this.props.isSelecting) this.props.resetCanvasActions(true)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tchangeIsSelecting: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport SaveButton from './Panel/SaveButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\n\r\nclass Panel extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right\">\r\n\t\t\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${this.props.isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<SaveButton />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</nav>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(Panel);","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t  ]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n  }\r\n  return imageData;\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux';\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\t} from './../store/actions/canvasActions';\r\nimport { changeColor, changePipetteColor } from './../store/actions/penActions';\r\nimport { hexToRGB, floodFillImageData } from './../modules/Tools';\r\nimport { Vector2 } from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tgetCanvas = () => this.refs.canvas;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\r\n\t\tthis.props.setContext(ctx);\r\n\r\n\t\tcanvas.width = window.innerWidth;\r\n\t\tcanvas.height = window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight;\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n\t\t});\r\n\r\n\t\tctx.strokeStyle = this.props.color;\r\n\t\tctx.lineJoin = \"round\";\r\n\t\tctx.lineCap = \"round\";\r\n\t\tctx.lineWidth = this.props.thickness;\r\n\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tif (this.props.penType !== 'none') {\r\n\t\t\tcursor.style.display = 'block';\r\n\t\t\tcursor.style.width = `${this.props.thickness + 5}px`;\r\n\t\t\tcursor.style.height = `${this.props.thickness + 5}px`;\r\n\t\r\n\t\t\tcursor.style.top = `${e.pageY - Number.parseInt(cursor.style.height)/2}px`;\r\n\t\t\tcursor.style.left = `${e.pageX - Number.parseInt(cursor.style.width)/2}px`;\r\n\t\r\n\t\t\tif (this.props.penType === 'pencil' || this.props.penType === 'paint-bucket') {\r\n\t\t\t\tcursor.style.backgroundColor  = `${this.props.color}`;\r\n\t\t\t} else if (this.props.penType === 'pipette') {\r\n\t\t\t\tcursor.style.backgroundColor  = `${this.props.pipetteColor}`;\r\n\t\t\t} else if (this.props.penType === 'eraser') {\r\n\t\t\t\tcursor.style.backgroundColor = '#ffffff';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcursor.style.display = 'none';\r\n\t\t}\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tthis.props.ctx.lineWidth = this.props.thickness;\r\n\t\tif (this.state.isDrawing && this.props.penType !== 'paint-bucket') {\r\n\t\t\tthis.props.ctx.beginPath();\r\n\t\t\tthis.props.ctx.setLineDash([0]);\r\n\r\n\t\t\tif (this.props.penType === 'pencil')\r\n\t\t\t\tthis.props.ctx.strokeStyle = this.props.color;\r\n\t\t\telse if (this.props.penType === 'pipette')\r\n\t\t\t\tthis.props.ctx.strokeStyle = this.props.pipetteColor;\r\n\t\t\telse if (this.props.penType === 'eraser')\r\n\t\t\t\tthis.props.ctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tthis.props.ctx.moveTo(this.state.lastX, this.state.lastY);\r\n\t\t\tthis.props.ctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n\t\t\tthis.props.ctx.stroke();\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tconst [x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\tconst imgData = this.props.ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tthis.props.changePipetteColor(`rgba(${pixel.join(',')})`);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tlet color = hexToRGB(this.props.color);\r\n\t\tlet imageData = this.props.ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {\r\n\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\ty: e.nativeEvent.offsetY\r\n\t\t}\r\n\t\tconst imgData = this.props.ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tthis.props.ctx.putImageData(floodFillImageData(imageData, color, startPoint, backgroundColor), 0, 0);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tif (this.props.penType === 'pipette') this.pickColor(e);\r\n\t\telse if (this.props.penType === 'paint-bucket') this.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\tthis.props.ctx.lineWidth = 1;\r\n\t\tif (this.state.selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = this.state.lastX - this.state.selectStartX;\r\n\t\t\t\tlet height = this.state.lastY - this.state.selectStartY;\r\n\t\t\t\tthis.props.ctx.setLineDash([4, 4]);\r\n  \t\t\tthis.props.ctx.lineDashOffset = 0;\r\n\t\t\t\tthis.props.ctx.strokeRect(this.state.selectStartX, this.state.selectStartY, width, height);\r\n\t\t\t});\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref=\"canvas\" \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonMouseMove={e => {\r\n\t\t\t\t\t\tlet canvas = this.getCanvas();\r\n\t\t\t\t\t\tif (this.props.isSelecting) {\r\n\t\t\t\t\t\t\tthis.selectingDraw(e);\r\n\t\t\t\t\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.draw(e);\r\n\t\t\t\t\t\t\tcanvas.style.cursor = 'none';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseDown={e => {\r\n\t\t\t\t\t\tif (this.props.isSelecting) {\r\n\t\t\t\t\t\t\tlet canvas = this.getCanvas();\r\n\t\t\t\t\t\t\tlet imageData = this.props.ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tselectStartX: this.state.selectStartX === undefined ? e.nativeEvent.offsetX : this.state.selectStartX,\r\n\t\t\t\t\t\t\t\tselectStartY: this.state.selectStartY === undefined ? e.nativeEvent.offsetY : this.state.selectStartY,\r\n\t\t\t\t\t\t\t\tbeforeImageData: !this.state.selectStart ? imageData : this.state.beforeImageData,\r\n\t\t\t\t\t\t\t\tselectStart: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tisDrawing: this.state.isSelecting ? false : true,\r\n\t\t\t\t\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\t\t\t\t\tlastY: e.nativeEvent.offsetY,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseUp={e => {\r\n\t\t\t\t\t\tif (this.props.isSelecting) {\r\n\t\t\t\t\t\t\tlet width = this.state.lastX - this.state.selectStartX;\r\n\t\t\t\t\t\t\tlet height = this.state.lastY - this.state.selectStartY;\r\n\t\t\t\t\t\t\tlet selectObject = {\r\n\t\t\t\t\t\t\t\tstartVector: new Vector2(this.state.selectStartX, this.state.selectStartY),\r\n\t\t\t\t\t\t\t\tendVector: new Vector2(this.state.lastX, this.state.lastY)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.props.updateSelectedObject(selectObject);\r\n\t\t\t\t\t\t\tthis.props.ctx.setLineDash([4, 4]);\r\n\t\t\t\t\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\t\t\t\t\tthis.props.ctx.strokeRect(this.state.selectStartX, this.state.selectStartY, width, height);\r\n\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tselectStartX: undefined,\r\n\t\t\t\t\t\t\t\tselectStartY: undefined,\r\n\t\t\t\t\t\t\t\tselectStart: false,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tisDrawing: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tisDrawing: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t</canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpipetteColor: state.penProperty.pipetteColor,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeColor: changeColor,\r\n\t\tchangePipetteColor: changePipetteColor,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired,\r\n\tchangePipetteColor: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React from 'react';\r\n\r\nconst DisplayError = () => {\r\n\treturn(\r\n\t\t<div className=\"uk-container uk-margin-small-top\">\r\n\t\t\t<div className=\"uk-card uk-card-default uk-width-1-2@m\">\r\n\t\t\t\t<div className=\"uk-card-header\">\r\n\t\t\t\t\t<div className=\"uk-grid-small uk-flex-middle\" uk-grid=\"true\">\r\n\t\t\t\t\t  <div className=\"uk-width-expand uk-flex uk-flex-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"uk-card-title uk-margin-remove-bottom\">Ваш браузер не поддерживается</h3>\r\n\t\t\t\t\t \t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-card-body uk-flex uk-flex-center\">\r\n\t\t\t\t  <button className=\"uk-button uk-button-danger uk-button-small\">Кинуть в faramo_zayw тапок</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DisplayError;","import React, { Component } from 'react';\nimport './../css/App.css';\nimport Panel from './Panel';\nimport Canvas from './Canvas';\nimport DisplayError from './DisplayError';\n\nclass App extends Component {\n  render() {\n  \tconst app = !(window.innerWidth < 768) ? \n    (\n      <div className=\"App\">\n\t\t  \t<Panel />\n\t\t  \t<Canvas /> \n\t\t  </div>\n    ) : <DisplayError />;\n\n    return (\n    \t<div>\n    \t\t{app}\n    \t</div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n\tpipetteColor: '#000000'\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PIPETTE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpipetteColor: action.payload\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tresetCanvas: state.isSelecting ? true : false\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tapplyMiddleware(thunk), \r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}