{"version":3,"sources":["store/actions/penActions.js","components/Panel/Thickness.jsx","components/Panel/ColorPicker.jsx","components/Panel/ClearButton.js","store/actions/canvasActions.js","modules/Vector2.js","modules/Tools.js","components/Panel/DownloadButton.jsx","modules/PenTypeConsts.js","components/Panel/Pipette.jsx","components/Panel/Pen.jsx","components/Panel/Eraser.jsx","components/Panel/UploadButton.jsx","components/Panel/FloodFill.jsx","components/Panel/Selection.jsx","store/actions/modalStorageActions.js","components/Panel/Storage/ImageCard.jsx","components/Panel/Storage/StorageModal.jsx","components/Panel/Storage.jsx","components/Panel/Storage/SaveToStorage.jsx","store/actions/infoModalActions.js","components/InfoBox.jsx","components/Panel/InfoBoxModal.jsx","components/Panel.jsx","components/PanelMobile.jsx","components/Canvas.jsx","components/App.js","serviceWorker.js","store/data/penProperty.js","store/data/canvasState.js","store/data/storageModal.js","store/data/infoModal.js","rootReducer.js","store/reducers/penProperty.js","store/reducers/canvasStateReducer.js","store/reducers/modalStorageReducer.js","store/reducers/infoModalReducer.js","index.js"],"names":["changeColor","value","type","payload","changeThickness","connect","state","thickness","penProperty","dispatch","bindActionCreators","_ref","react_default","a","createElement","className","onChange","e","target","color","htmlFor","id","ClearButton","handleClick","ctx","_this","props","rect","canvas","width","height","fillStyle","fill","uk-tooltip","onClick","this","bind","Component","canvasState","setContext","changePenType","changeIsSelecting","resetCanvasActions","resetSelectedObject","updateSelectedObject","Vector2","x","y","Object","classCallCheck","Array","isArray","console","log","TypeError","Error","Number","_thisX","_thisY","isFinite","VectorStart","VectorEnd","hexToRGB","hex","r","parseInt","slice","g","b","rgbaToHex","rgba","match","filter","i","map","elem","toString","length","join","floodFillImageData","imageData","startPoint","backgroundColor","pixel","red","green","blue","stack","pop","pointColor","data","push","sortByDateNewOld","elem1","elem2","regexDate","key1","keys","next","key2","date1","replace","sortByDateOldNew","getStorageElemsMap","arr","localStorage","Map","key","item","getItem","set","chkObjForNonEmptiness","object","entries","constructor","DownloadButton","link","React","createRef","isSelecting","selectedObject","current","href","document","querySelector","toDataURL","localCtx","getContext","size","getBoxSize","startVector","endVector","Math","abs","getImageData","imageDate","putImageData","remove","download","UIkit","notification","message","concat","pos","timeout","ref","downloadCanvasAsImg","pencil","pipette","eraser","paintBucket","none","UploadButton","persist","window","File","FileReader","FileList","Blob","alert","confirm","files","file","reader","onload","_ref2","result","Image","dataUri","image","innerHeight","innerWidth","drawImage","src","onerror","error","code","readAsDataURL","uploadImgAsCanvas","Selection","enableModal","disableModal","reRenderModal","ImageCard","showEditForm","editInput","onCanvas","finishEditName","_this$props","stringKey","date","removeItem","setItem","setState","deleteImg","headerClick","prevState","disableEditForm","_this$props2","imgData","info","string","name","regexSize","String","Date","parseKey","hidden","alt","defaultValue","PureComponent","StorageModal","sortBy","clearHandle","clear","forceUpdate","handleChange","event","autosaveControlClick","str","autosave","docCookies","JSON","parse","downloadAllImg","list","body","appendChild","regexName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","values","click","err","return","removeChild","_this2","listMap","sort","Storage_ImageCard","floor","random","isOpen","modalStorage","reRender","Modal","setAppElement","style","display","lib_default","contentLabel","Storage_StorageModal","SaveToStorage","now","imgSize","saveImg","context","enableInfoModal","disableInfoModal","infoModal","uk-overlay-icon","components_InfoBox","penType","uk-navbar","Panel_ColorPicker","Panel_Thickness","Panel_Pen","Panel_Pipette","Panel_Eraser","Panel_FloodFill","Panel_Selection","Panel_ClearButton","Panel_DownloadButton","Panel_UploadButton","Storage_SaveToStorage","Storage","Panel_InfoBoxModal","uk-toggle","uk-offcanvas","Canvas","mobile","isDrawing","lastX","lastY","selectStartX","selectStartY","beforeImageData","selectStart","getCanvas","getCanvasContext","getCursor","cursor","top","pageY","left","pageX","pickColor","changedTouches","clientX","py","clientY","clientHeight","nativeEvent","offsetX","offsetY","floodFill","_this$props3","rgbColor","draw","_this$props4","_this$state","_e$nativeEvent","lineWidth","beginPath","setLineDash","strokeStyle","moveTo","lineTo","stroke","touchMoveEventLister","_this$props5","_this$state2","touches","touchStartEventLister","touchEndEventLister","onClickHandle","selectingDraw","_this$state3","lineDashOffset","strokeRect","onMouseMoveEvent","onMouseDownEvent","_this$props6","_this$state4","_e$nativeEvent2","onMouseUpEvent","_this$state5","_this$props7","onMouseOutEvent","_this$props8","test","navigator","userAgent","lineJoin","lineCap","resetCanvas","onTouchMove","onTouchStart","onMouseOut","onTouchEnd","onTouchCancel","onMouseMove","onMouseDown","onMouseUp","App","onUnload","hasItem","addEventListener","removeEventListener","app","components_PanelMobile","components_Canvas","components_Panel","Boolean","location","hostname","storageModal","rootReducer","combineReducers","arguments","action","objectSpread","assign","store","createStore","compose","devToolsEnhancer","ReactDOM","render","es","components_App","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.563a324b.chunk.js","sourcesContent":["export const changeColor = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_COLOR',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeThickness = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_THICKNESS',\r\n\t\tpayload: value\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeThickness }  from './../../store/actions/penActions';\r\n\r\nconst Thickness = ({changeThickness}) =>  (\r\n\t<div>\r\n\t\t<label className=\"thickness\">Толщина шрифта:\r\n\t\t\t<select \r\n\t\t\t\t\tclassName=\"uk-select\" \r\n\t\t\t\t\tonChange={e => changeThickness(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t<option value=\"1\">\r\n\t\t\t\t\t1\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"2\">\r\n\t\t\t\t\t2\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"4\">\r\n\t\t\t\t\t4\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"8\">\r\n\t\t\t\t\t8\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"16\">\r\n\t\t\t\t\t16\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"32\">\r\n\t\t\t\t\t32\r\n\t\t\t\t</option>\r\n\t\t\t\t<option value=\"64\">\r\n\t\t\t\t\t64\r\n\t\t\t\t</option>\r\n\t\t\t</select>\r\n\t\t</label>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tthickness: state.penProperty.thickness\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeThickness: changeThickness\r\n\t}, dispatch);\r\n}\r\n\r\nThickness.propTypes = {\r\n\tthickness: PropTypes.number.isRequired,\r\n\tchangeThickness: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Thickness);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeColor }  from './../../store/actions/penActions';\r\n\r\nconst ColorPicker = ({ changeColor }) => (\r\n\t<div className=\"uk-flex uk-flex-column\">\r\n\t\t<label htmlFor=\"colorPicker\">Цвет:</label>\r\n\t\t<input \r\n\t\t\ttype=\"color\" \r\n\t\t\tid=\"colorPicker\" \r\n\t\t\tonChange={e => changeColor(e.target.value)} \r\n\t\t/>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nColorPicker.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass ClearButton extends Component {\r\n\thandleClick = () => {\r\n\t\tlet { ctx } = this.props;\r\n\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\tctx.fillStyle = '#ffffff';\r\n\t\tctx.fill();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Очистить холст\"\r\n\t\t\t\t\tid=\"clearButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button trash icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nClearButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClearButton);","export const setContext = value => {\r\n\treturn {\r\n\t\ttype: 'SET_CONTEXT',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changePenType = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_PEN_TYPE',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const changeIsSelecting = value => {\r\n\treturn {\r\n\t\ttype: 'CHANGE_IS_SELECTING',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetCanvasActions = value => {\r\n\treturn {\r\n\t\ttype: 'RESET_CANVAS',\r\n\t\tpayload: value\r\n\t}\r\n}\r\n\r\nexport const resetSelectedObject = () => {\r\n\treturn {\r\n\t\ttype: 'RESET_SELECT_OBJECT'\r\n\t}\r\n}\r\n\r\nexport const updateSelectedObject = value => {\r\n\treturn {\r\n\t\ttype: 'UPDATE_SELECTED_OBJECT',\r\n\t\tpayload: value\r\n\t}\r\n}","export default class Vector2 {\r\n\tconstructor(x, y) {\r\n\t\tif (Array.isArray(x) || Array.isArray(y)) {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y is array, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\r\n\t\tconst [_thisX, _thisY] = [Number(x), Number(y)];\r\n\r\n\t\tif (Number.isFinite(_thisX) && Number.isFinite(_thisY)) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t} else {\r\n\t\t\tconsole.log(new TypeError('Bad args, x or y isn\\'t finite, x: ' + x + ' y: ' + y));\r\n\t\t\treturn new Error('Bad args === bad vector2');\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getBoxSize(VectorStart, VectorEnd) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: VectorEnd.x - VectorStart.x,\r\n\t\t\t\theight: VectorEnd.y - VectorStart.y\r\n\t\t\t}\r\n\t}\r\n}","export const hexToRGB = hex => {\r\n\treturn {\r\n\t\tr: Number.parseInt(hex.slice(1, 3), 16),\r\n\t\tg: Number.parseInt(hex.slice(3, 5), 16),\r\n\t\tb: Number.parseInt(hex.slice(5, 7), 16),\r\n\t}\r\n}\r\n\r\nexport const rgbaToHex = rgba => {\r\n\tlet match = rgba.match(/(\\d+)/g);\r\n\tmatch = match.filter((e, i) => i !== 3);\r\n\tmatch = match.map(elem => {\r\n\t\tlet a = Number.parseInt(elem, 10).toString(16);\r\n\t\treturn a.length !== 1 ? a : \"0\" + a;\r\n\t});\r\n\treturn \"#\"+match.join(\"\");\r\n}\r\n\r\nexport const floodFillImageData = (imageData, color, startPoint, backgroundColor) => {\r\n\tlet [width, height] = [imageData.width, imageData.height];\r\n\tlet pixel;\r\n\tlet red, green, blue = 0;\r\n\r\n\tlet stack = [[startPoint.x, startPoint.y]];\r\n\r\n\twhile (stack.length > 0) {   \r\n\t\tpixel = stack.pop();\r\n\r\n\t\tif (pixel[0] < 0 || pixel[0] >= width) continue;\r\n\t\tif (pixel[1] < 0 || pixel[1] >= height) continue;\r\n\t\t\t\t\r\n\t\tred = pixel[1] * 4 * width + pixel[0] * 4;\r\n\t\tgreen = red + 1;\r\n\t\tblue = green + 1;\r\n\t\tconst pointColor = {\r\n\t\t\tr: imageData.data[red],\r\n\t\t\tg: imageData.data[green],\r\n\t\t\tb: imageData.data[blue]\r\n\t\t}\r\n\r\n\t\tif ((pointColor.r !== color.r || pointColor.g !== color.g || pointColor.b !== color.b)\r\n\t\t\t&& (pointColor.r === backgroundColor.r && pointColor.g === backgroundColor.g && pointColor.b === backgroundColor.b)) {\r\n\t\t\timageData.data[red] = color.r;\r\n\t\t\timageData.data[green] = color.g;\r\n\t\t\timageData.data[blue] = color.b;\r\n\t\t\t\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] - 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t\t]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0] + 1,\r\n\t\t\t\tpixel[1]\r\n\t\t\t\t]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] - 1\r\n\t\t\t\t]);\r\n\t\t\tstack.push([\r\n\t\t\t\tpixel[0],\r\n\t\t\t\tpixel[1] + 1\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn imageData;\r\n}\r\n\r\nexport const sortByDateNewOld = (elem1, elem2) => {\r\n\tlet regexDate = /Date: (\\d+)(?=Size)/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\r\n\treturn date2 - date1; // от новых к старым\r\n}\r\n\r\nexport const sortByDateOldNew  = (elem1, elem2) => {\r\n\tlet regexDate = /Date: (\\d+)(?=Size)/g;\r\n\r\n\tlet key1 = elem1.keys().next().value;\r\n\tlet key2 = elem2.keys().next().value;\r\n\r\n\tlet date1 = Number.parseInt(key1.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\tlet date2 = Number.parseInt(key2.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10);\r\n\r\n\treturn date1 - date2; // от старых к новым\r\n}\r\n\r\nexport const parseKey = string => {\r\n\tlet regexName = /Name: (.*?)(?=Date)/g;\r\n\tlet name = string.match(regexName)[0].replace(/Name: (.*)/, \"$1\");\r\n\r\n\tlet regexDate = /Date: (\\d+)/g;\r\n\tlet resultRegexDate = /^.*(?= GMT)/g;\r\n\tlet date = Number.parseInt(string.match(regexDate)[0].replace(/Date: (.*)/, \"$1\"), 10)\r\n\tdate = String(new Date(date));\r\n\tdate = date.match(resultRegexDate)[0];\r\n\r\n\tlet regexSize = /Size: (.*)$/g;\r\n\tlet size = string.match(regexSize)[0].replace(regexSize, \"$1\");\r\n\r\n\treturn {\r\n\t\tname: name,\r\n\t\tdate: date,\r\n\t\tsize: size\r\n\t}\r\n}\r\n\r\nexport const getStorageElemsMap = () => {\r\n\tlet arr = [];\r\n\tfor (let i = 0; i < localStorage.length; i++) {\r\n\t\tlet map = new Map();\r\n\t\tlet key = localStorage.key(i);\r\n\t\tlet item = localStorage.getItem(key);\r\n\t\tmap.set(key, item);\r\n\t\tarr.push(map);\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\nexport const chkObjForEmptiness = object => (Object.entries(object).length === 0 && object.constructor === Object) ? true : false;\r\nexport const chkObjForNonEmptiness = object => !(Object.entries(object).length === 0 && object.constructor === Object) ? true : false;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tresetCanvasActions, \r\n\tresetSelectedObject \r\n}  from './../../store/actions/canvasActions';\r\n\r\nimport Vector2 from './../../modules/Vector2';\r\nimport { chkObjForNonEmptiness } from './../../modules/Tools' \r\nimport UIkit from 'uikit';\r\n\r\nclass DownloadButton extends Component {\r\n\tlink = React.createRef()\r\n\r\n\tasync downloadCanvasAsImg(e) {\r\n\t\tlet { \r\n\t\t\tisSelecting, \r\n\t\t\tresetSelectedObject,\r\n\t\t\tresetCanvasActions,\r\n\t\t\tselectedObject\r\n\t\t} = this.props;\r\n\r\n\t\tlet link = this.link.current;\r\n\t\tif (!isSelecting)\r\n\t\t\tlink.href = document.querySelector('#draw').toDataURL('image/png');\r\n\t\telse if (isSelecting && chkObjForNonEmptiness(selectedObject)) {\r\n\t\t\tlet { ctx } = this.props;\r\n\r\n\t\t\tawait resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet localCtx = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\t\t\t\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\r\n\t\t\tlocalCtx.putImageData(imageDate, 0, 0);\r\n\t\t\tlink.href = canvas.toDataURL('image/png');\r\n\t\t\tresetSelectedObject();\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\t\tlink.download = 'canvasImage.png';\r\n\t\tUIkit.notification({\r\n\t\t\tmessage: `${\r\n\t\t\t\tisSelecting ? \r\n\t\t\t\t\"Фрагмент был сохранён на устройство\"\r\n\t\t\t\t: \"Холст был сохранён на устройство\"\r\n\t\t\t}`,\r\n\t\t\tpos: 'bottom-right',\r\n\t\t\ttimeout: 2500\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<a\r\n\t\t\t\t\tuk-tooltip=\"Скачать холст\"\r\n\t\t\t\t\thref=\"canvasDownload\"\r\n\t\t\t\t\tref={this.link}\r\n\t\t\t\t\tid=\"saveButton\" \r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button download icon\"\r\n\t\t\t\t\tonClick={this.downloadCanvasAsImg.bind(this)}\r\n\t\t\t\t> </a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nDownloadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DownloadButton);","export const pencil = 'pencil';\r\nexport const pipette = 'pipette';\r\nexport const eraser = 'eraser';\r\nexport const paintBucket = 'paint-bucket';\r\nexport const none = 'none';","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { pipette } from './../../modules/PenTypeConsts';\r\n\r\nconst Pipette = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Пипетка\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image pipette icon\" \r\n\t\t\tonClick={() => changePenType(pipette)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPipette.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pipette);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { pencil } from './../../modules/PenTypeConsts';\r\n\r\nconst Pen = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Ручка\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button pencil icon\" \r\n\t\t\tonClick={() => changePenType(pencil)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nPen.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pen);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { eraser } from './../../modules/PenTypeConsts';\r\n\r\nconst Eraser = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Ластик\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image eraser icon\" \r\n\t\t\tonClick={() => changePenType(eraser)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nEraser.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Eraser);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport UIkit from 'uikit';\r\n\r\nclass UploadButton extends Component {\r\n\tasync uploadImgAsCanvas(e) {\r\n\t\te.persist()\r\n\t\tif(!window.File || !window.FileReader || !window.FileList || !window.Blob){\r\n\t\t\talert(\"Ваш браузер не поддерживает эту функцию :(\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (window.confirm(\"При загрузке фото холст будет очищен, вы уверены?\")) {\r\n\t\t\tlet { ctx } = this.props;\r\n\t\t\tctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tawait ctx.fill();\r\n\r\n\t\t\tlet [file, reader] = [e.target.files[0], new FileReader()];\r\n\t\t\t\r\n\t\t\treader.onload = e => {\r\n\t\t\t\tlet [dataUri, image] = [e.target.result, new Image()];\r\n\r\n\t\t\t\timage.onload = () => {\r\n\t\t\t\t\tif (image.height <= window.innerHeight && image.width <= window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\t\t\telse if (image.height > window.innerHeight) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, image.width, window.innerHeight);\r\n\r\n\t\t\t\t\telse if (image.width > window.innerWidth) \r\n\t\t\t\t\t\tctx.drawImage(image, 0, 0, window.innerWidth, image.height);\r\n\t\t\t\t}\r\n\r\n\t\t\t\timage.src = dataUri;\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `Файл был удачно загружен`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.onerror = e => {\r\n\t\t\t\tconsole.log(`Error loading file. Code: ${e.target.error.code}`);\r\n\t\t\t\tUIkit.notification({\r\n\t\t\t\t\tmessage: `При загрузке файла произошла ошибка, попробуйте снова.`,\r\n\t\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\t\ttimeout: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tuk-tooltip=\"Загрузить фото\"\r\n\t\t\t\t\thtmlFor=\"uploadButton\"\r\n\t\t\t\t\tclassName=\"uk-icon-link uk-icon-button upload icon\"\r\n\t\t\t\t></label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tid=\"uploadButton\" \r\n\t\t\t\t\tclassName=\"uk-hidden\"\r\n\t\t\t\t\tonChange={this.uploadImgAsCanvas.bind(this)}\r\n\t\t\t\t></input>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nUploadButton.propTypes = {\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(UploadButton);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changePenType }  from './../../store/actions/canvasActions';\r\n\r\nimport { paintBucket } from './../../modules/PenTypeConsts';\r\n\r\nconst FloodFill  = ({ changePenType }) => (\r\n\t<div className=\"uk-margin-small-top\">\r\n\t\t<span\r\n\t\t\tuk-tooltip=\"Заливка цветом\"\r\n\t\t\tclassName=\"uk-icon uk-icon-button paint-bucket icon\" \r\n\t\t\tonClick={() => changePenType(paintBucket)}\r\n\t\t></span>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangePenType: changePenType\r\n\t}, dispatch);\r\n}\r\n\r\nFloodFill.propTypes = {\r\n\tchangePenType: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloodFill);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { changeIsSelecting, resetCanvasActions }  from './../../store/actions/canvasActions';\r\n\r\nclass Selection extends Component {\r\n\thandleClick = () => {\r\n\t\tthis.props.changeIsSelecting(true)\r\n\t\tif (this.props.isSelecting) \r\n\t\t\tthis.props.resetCanvasActions(true)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Выделение области\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button uk-icon-image selection icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tresetCanvasActions: resetCanvasActions\r\n\t}, dispatch);\r\n}\r\n\r\nSelection.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tchangeIsSelecting: PropTypes.func.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Selection);","export const enableModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_MODAL'\r\n\t}\r\n}\r\n\r\nexport const reRenderModal = () => {\r\n\treturn {\r\n\t\ttype: 'RE_RENDER_MODAL'\r\n\t}\r\n}","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types';\r\nimport { \r\n\treRenderModal, \r\n\tdisableModal \r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport { parseKey } from './../../../modules/Tools';\r\n\r\nclass ImageCard extends PureComponent {\r\n\tstate = {\r\n\t\tshowEditForm: false\r\n\t}\r\n\r\n\teditInput = React.createRef()\r\n\timage = React.createRef()\r\n\r\n\tonCanvas = () => {\r\n\t\tthis.props.ctx.drawImage(this.image.current, 0, 0);\r\n\t\tthis.props.disableModal();\r\n\t}\r\n\r\n\tfinishEditName = e => {\r\n\t\tlet { stringKey, reRenderModal } = this.props;\r\n\t\tlet date = localStorage.getItem(stringKey);\r\n\r\n\t\tlocalStorage.removeItem(stringKey);\r\n\r\n\t\t//let regexName = /(?<=Name: ).*(?=Date)/g;\r\n\t\tlet regexName = /Name: .*?(?=Date)/g;\r\n\t\tstringKey = stringKey.replace(regexName, `Name: ${this.editInput.current.value}`);\r\n\t\t\r\n\t\tlocalStorage.setItem(stringKey, date);\r\n\t\tthis.setState({\r\n\t\t\tshowEditForm: false\r\n\t\t}, reRenderModal);\r\n\t}\r\n\r\n\tdeleteImg = e => {\r\n\t\tlocalStorage.removeItem(this.props.stringKey);\r\n\t\tthis.props.reRenderModal();\r\n\t}\r\n\r\n\theaderClick = e => {\r\n\t\tthis.setState((prevState, props) => {\r\n\t\t\treturn {\r\n\t\t\t\tshowEditForm: !prevState.showEditForm \r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tdisableEditForm = () => this.setState({ showEditForm: false })\r\n\r\n\trender() {\r\n\t\tlet { stringKey, imgData } = this.props;\r\n\t\tlet { showEditForm } = this.state;\r\n\t\tlet info = parseKey(stringKey);\r\n\t\tlet hidden = !showEditForm ? \"uk-hidden\" : \"\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-bottom uk-margin-left uk-card uk-width-medium uk-card-default uk-flex uk-flex-column uk-flex-between\">\r\n\t\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-flex-1\">\r\n\t\t\t\t\t<div className=\"uk-card-media-top uk-card-header\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"image-border\"\r\n\t\t\t\t\t\tsrc={imgData}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tref={this.image}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"uk-card-body padding\">\r\n\t\t\t\t\t\t<h4 \r\n\t\t\t\t\t\t\tclassName=\"uk-card-title uk-heading-bullet\"\r\n\t\t\t\t\t\t\tonClick={this.headerClick.bind(this)}\r\n\t\t\t\t\t\t>{info.name}</h4>\r\n\t\t\t\t\t\t<div id=\"editBox\" className={`${hidden} uk-margin-small-bottom`}>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tclassName=\"uk-input uk-form-width-small uk-form-small\" \r\n\t\t\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t\t\tdefaultValue={info.name} \r\n\t\t\t\t\t\t\t\tref={this.editInput}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className=\"uk-button-group\">\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button icon check\" \r\n\t\t\t\t\t\t\t\tonClick={this.finishEditName.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\tclassName=\"uk-icon uk-margin-small-left uk-icon-button icon close\" \r\n\t\t\t\t\t\t\t\tonClick={this.disableEditForm.bind(this)}\r\n\t\t\t\t\t\t\t></span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span>Дата создания файла: <br/>{info.date}</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span>Размеры: {info.size}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-button-group uk-width-1-1\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-primary uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.onCanvas.bind(this)}\r\n\t\t\t\t\t>На холст</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"uk-button uk-button-danger uk-width-1-2\"\r\n\t\t\t\t\t\tonClick={this.deleteImg.bind(this)}\r\n\t\t\t\t\t>Удалить</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\treRenderModal: reRenderModal,\r\n\t\tdisableModal: disableModal\r\n\t}, dispatch);\r\n}\r\n\r\nImageCard.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\treRenderModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCard);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport { \r\n\tenableModal, \r\n\tdisableModal\r\n}  from './../../../store/actions/modalStorageActions';\r\n\r\nimport UIkit from 'uikit';\r\nimport ImageCard from './ImageCard';\r\nimport { \r\n\tsortByDateNewOld, \r\n\tsortByDateOldNew,\r\n\tgetStorageElemsMap\r\n} from './../../../modules/Tools';\r\n\r\nclass StorageModal extends Component {\r\n\tstate = {\r\n\t\tsortBy: 'По дате(от новых к старым)'\r\n\t}\r\n\r\n\tclearHandle = () => {\r\n\t\tif (localStorage.length !== 0) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище было очищено.',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t\tthis.forceUpdate();\r\n\t\t} else \r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t}\r\n\r\n\thandleChange = event => this.setState({ sortBy: event.target.value })\r\n\r\n\tautosaveControlClick = () => {\r\n\t\tlet str = \"autosaveEnable\";\r\n\t\tlet autosave = docCookies.getItem(str);\r\n\t\tif(autosave !== null) {\r\n\t\t\tdocCookies.setItem(str, (!JSON.parse(autosave)).toString());\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadAllImg = () => {\r\n\t\tlet list = getStorageElemsMap();\r\n\t\tif(list.length === 0) {\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: 'Хранилище пустое!',\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet link = document.createElement('a');\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlet regexName = /Name: .*?(?=Date)/g;\r\n\r\n\t\t\tfor(let elem of list) {\r\n\t\t\t\tlet key = elem.keys().next().value\r\n\t\t\t\tlet name = key.match(regexName)[0];\r\n\t\t\t\tname = name.replace(/Name: (.*)/, \"$1\");\r\n\t\t\t\tlink.download = `${name}.png`;\r\n\t\t\t\tlink.href = elem.values().next().value;\r\n\t\t\t\tlink.click();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet listMap = getStorageElemsMap();\r\n\t\tlet { sortBy } = this.state;\r\n\t\tif (sortBy === 'По дате(от новых к старым)') \r\n\t\t\tlistMap = listMap.sort(sortByDateNewOld);\r\n\t\telse if(sortBy === 'По дате(от старых к новым)')\r\n\t\t\tlistMap = listMap.sort(sortByDateOldNew);\r\n\r\n\t\tlet list = listMap.map(item => (\r\n\t\t\t<ImageCard\r\n\t\t\t\tkey={Math.floor(Math.random() * 100000000)}\r\n\t\t\t\tstringKey={item.keys().next().value}\r\n\t\t\t\timgData={item.values().next().value}\r\n\t\t\t/>\r\n\t\t));\r\n\r\n\t\tconst autosave = JSON.parse(docCookies.getItem(\"autosaveEnable\"));\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-flex uk-flex-column uk-flex-between uk-height-1-1\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2 className=\"uk-heading-line uk-text-center\">\r\n\t\t\t\t\t\t<span>Сохранённые изображения</span>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4>На данный момент сохранено {localStorage.length} {`${localStorage.length === 1 ? 'изображение' : 'изображений' }`}.</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<fieldset className=\"uk-fieldset\">\r\n\t\t\t\t\t\t\t<legend className=\"uk-legend\">Сортировать: </legend>\r\n\t\t\t\t\t\t\t<div className=\"uk-margin\">\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclassName=\"uk-select uk-width-medium\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.sortBy}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от новых к старым)\">По дате(от новых к старым)</option>\r\n\t\t\t\t\t\t\t\t\t<option value=\"По дате(от старых к новым)\">По дате(от старых к новым)</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-padding uk-flex uk-flex-around uk-flex-row uk-flex-wrap uk-flex-wrap-stretch uk-flex-top\">\r\n\t\t\t\t\t{list}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"uk-flex uk-flex-around uk-button-group uk-flex-wrap\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.downloadAllImg.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-default uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Скачать всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.autosaveControlClick.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-secondary uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>{`${autosave ? \"Выключить\" : \"Включить\"} автосохранение`}</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={this.clearHandle.bind(this)}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-danger uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Удалить всё</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.props.disableModal()}\r\n\t\t\t\t\t\t\tclassName=\"uk-button uk-margin-auto uk-margin-bottom uk-button-primary uk-width-1-1@s uk-width-1-4@m\"\r\n\t\t\t\t\t\t>Закрыть</button>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen,\r\n\t\treRender: state.modalStorage.reRender,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal,\r\n\t\tdisableModal: disableModal,\r\n\t}, dispatch);\r\n}\r\n\r\nStorageModal.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\treRender: PropTypes.number.isRequired,\r\n\tenableModal: PropTypes.func.isRequired,\r\n\tdisableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StorageModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableModal }  from './../../store/actions/modalStorageActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport StorageModal from './Storage/StorageModal';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst ShowStorage = ({ isOpen, enableModal }) => {\r\n\tconst clickHandle = () => {\r\n\t\tdocument.querySelector('.cursor').style.display = 'none';\r\n\t\tenableModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t<span\r\n\t\t\t\tuk-tooltip=\"Открыть хранилище\"\r\n\t\t\t\tclassName=\"uk-icon uk-icon-button storage icon\"\r\n\t\t\t\tonClick={() => clickHandle()}\r\n\t\t\t></span>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isOpen}\r\n\t\t\t\tcontentLabel=\"Show storage Modal\"\r\n\t\t\t>\r\n\t\t\t\t<StorageModal />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.modalStorage.isOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableModal: enableModal\r\n\t}, dispatch);\r\n}\r\n\r\nShowStorage.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired, \r\n\tenableModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowStorage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport UIkit from 'uikit';\r\nimport { bindActionCreators } from 'redux';\r\nimport { resetCanvasActions }  from './../../../store/actions/canvasActions';\r\nimport Vector2 from './../../../modules/Vector2';\r\n\r\nclass SaveToStorage extends Component {\r\n\tasync handleClick() {\r\n\t\tlet { ctx, isSelecting } = this.props;\r\n\t\tlet saveImg;\r\n\t\tlet name = `Name: Рисунок №${localStorage.length + 1}`;\r\n\t\tlet date = `Date: ${Date.now()}`;\r\n\t\tlet key, imgSize;\r\n\r\n\t\tif (!isSelecting) {\r\n\t\t\timgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tsaveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t} else {\r\n\t\t\tlet { selectedObject } = this.props;\r\n\t\t\tawait this.props.resetCanvasActions(true);\r\n\t\t\tlet canvas = document.createElement('canvas');\r\n\t\t\tlet context = canvas.getContext('2d');\r\n\r\n\t\t\tlet size = Vector2.getBoxSize(selectedObject.startVector, selectedObject.endVector);\r\n\t\t\timgSize = `Size: ${Math.abs(size.width)} x ${Math.abs(size.height)}`;\r\n\t\t\tcanvas.width = Math.abs(size.width);\r\n\t\t\tcanvas.height = Math.abs(size.height);\r\n\r\n\t\t\tlet imageDate = await ctx.getImageData(\r\n\t\t\t\tselectedObject.startVector.x,\r\n\t\t\t\tselectedObject.startVector.y,\r\n\t\t\t\tsize.width,\r\n\t\t\t\tsize.height\r\n\t\t\t);\r\n\t\t\tcontext.putImageData(imageDate, 0, 0);\r\n\t\t\tsaveImg = canvas.toDataURL('image/png');\r\n\t\t\tcanvas.remove();\r\n\t\t}\r\n\r\n\t\tkey = name + date + imgSize;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t\tUIkit.notification({\r\n\t\t\t\tmessage: `${isSelecting ? \r\n\t\t\t\t\t'Фрагмент был сохранён в хранилище.' \r\n\t\t\t\t\t: 'Холст был сохранён в хранилище.'\r\n\t\t\t\t}`,\r\n\t\t\t\tpos: 'bottom-right',\r\n\t\t\t\ttimeout: 2500\r\n\t\t\t});\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(\"Storage failed: \");\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tuk-tooltip=\"Сохранить в хранилище\"\r\n\t\t\t\t\tclassName=\"uk-icon uk-icon-button cloud-upload icon\" \r\n\t\t\t\t\tonClick={this.handleClick.bind(this)}\r\n\t\t\t\t></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\t//resetSelectedObject: resetSelectedObject\r\n\t}, dispatch);\r\n}\r\n\r\nSaveToStorage.propTypes = {\r\n\tctx: PropTypes.object.isRequired,\r\n\tresetCanvasActions: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired,\r\n\tselectedObject: PropTypes.object.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveToStorage);","export const enableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'ENABLE_INFO_MODAL'\r\n\t}\r\n}\r\n\r\nexport const disableInfoModal = () => {\r\n\treturn {\r\n\t\ttype: 'DISABLE_INFO_MODAL'\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { disableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nconst InfoBox = ({ disableInfoModal }) => (\r\n\t<div id=\"info-box\">\r\n\t\t<div className=\"uk-margin-medium-bottom\">\r\n\t\t\t<h1 className=\"uk-heading-divider uk-flex uk-flex-between uk-margin-small-left uk-margin-small-right\">\r\n\t\t\tКраткая справка:\r\n\t\t\t\t<span \r\n\t\t\t\t\tclassName=\"uk-icon uk-margin-left uk-icon-button close icon uk-overlay\" uk-overlay-icon=\"true\" \r\n\t\t\t\t\tonClick={() => disableInfoModal()}\r\n\t\t\t\t></span>\r\n\t\t\t</h1>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<ul>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pencil icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle \">Ручка. Используется для того, чтобы рисовать линии</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle pipette icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Пипетка. Даёт возможность получить цвет в определённой точке холста</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle eraser icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Ластик. Ластик используется для очистки произвольного фрагмента</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle paint-bucket icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Заливка. Можно использовать для заливки области</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle selection icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Выделение. Выделив часть холста можно сохранить её либо на компьютер, либо в хранилище</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle trash icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Очищает холст</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle download icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Скачивание. Скачивает либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i></span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle upload icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Загрузка. Загружает выбранное изображение(<span className=\"uk-text-warning\">изображене будет сжато, если его размеры будут больше размеров холста</span>)</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle cloud-upload icon\"></span>\r\n\t\t\t\t<span className=\"info-text uk-margin-small-left uk-margin-small-top uk-text-middle\">Сохранение. Сохранение либо холст, либо фрагмент холста, выделенный с использованием <i>Выделение</i> в Хранилище</span>\r\n\t\t\t</li>\r\n\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle storage icon\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище. Открывает окно, где храняться сохранённые изображения</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom info-li\">\r\n\t\t\t\t<span className=\"uk-icon uk-icon-button uk-icon-image uk-text-middle info icon\"></span>\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Справка. Открывает окно с краткой справкой</span>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<h3>Хранилище</h3>\r\n\t\t\t</li>\r\n\t\t\t<li className=\"uk-flex uk-flex-auto uk-margin-small-bottom\">\r\n\t\t\t\t<span className=\"uk-margin-small-left uk-margin-small-top uk-text-middle\">Хранилище - место, куда можно сохранить изображения без скачивания их на компьютер, а также место, куда сохраняются изображения при обновлени/закрытии вкладки. Можно удалить все изображения, скачать их, включить/выключить сохранение изображения при обновлени/закрытии вкладки. Имя изображения можно изменить кликнув на него</span>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tdisableInfoModal: disableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBox.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired,\r\n\tdisableInfoModal: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBox);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport { enableInfoModal }  from './../../store/actions/infoModalActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport InfoBox from './../InfoBox';\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst InfoBoxModal = ({ isOpen, enableInfoModal }) => {\r\n\tconst clickHandle = () => {\r\n\t\tdocument.querySelector('.cursor').style.display = 'none';\r\n\t\tenableInfoModal();\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className=\"uk-margin-small-top\">\r\n\t\t\t<span\r\n\t\t\t\tuk-tooltip=\"Помощь\"\r\n\t\t\t\tclassName=\"uk-icon uk-icon-button info icon\"\r\n\t\t\t\tonClick={() => clickHandle()}\r\n\t\t\t></span>\r\n\t\t\t<Modal\r\n\t\t\t\tisOpen={isOpen}\r\n\t\t\t\tcontentLabel=\"Storage Modal\"\r\n\t\t\t>\r\n\t\t\t\t<InfoBox />\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nInfoBoxModal.propTypes = {\r\n\tisOpen: PropTypes.bool,\r\n\tenableInfoModal: PropTypes.func\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoBoxModal);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport DownloadButton from './Panel/DownloadButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\nimport Selection from './Panel/Selection';\r\nimport Storage from './Panel/Storage';\r\nimport SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst Panel = ({penType, isSelecting}) => (\r\n\t<div>\r\n\t\t<nav className=\"uk-navbar-container uk-flex uk-flex-center\" uk-navbar=\"true\">\r\n\t\t\t<div className=\"uk-navbar-left\">\r\n\t\t\t\t<ul className=\"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle panel\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pencil' && 'active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'pipette' && 'active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'eraser' && 'active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${penType === 'paint-bucket' && 'active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom uk-margin-left ${isSelecting && 'active'}`}>\r\n\t\t\t\t\t\t<Selection />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-medium-right\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<DownloadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left  uk-margin-medium-right\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom uk-margin-left\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting\r\n\t}\r\n}\r\n\r\nPanel.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(Panel);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Thickness from './Panel/Thickness';\r\nimport ColorPicker from './Panel/ColorPicker';\r\nimport ClearButton from './Panel/ClearButton';\r\nimport DownloadButton from './Panel/DownloadButton';\r\nimport Pipette from './Panel/Pipette';\r\nimport Pen from './Panel/Pen';\r\nimport Eraser from './Panel/Eraser';\r\nimport UploadButton from './Panel/UploadButton'\r\nimport FloodFill from './Panel/FloodFill';\r\n//import Selection from './Panel/Selection';\r\n//import Storage from './Panel/Storage';\r\n//import SaveToStorage from'./Panel/Storage/SaveToStorage';\r\nimport InfoBoxModal from './Panel/InfoBoxModal';\r\n\r\nconst PanelMobile = ({ penType, infoModal, modalStorage }) => (\r\n\t<div>\r\n\t\t<button className=\"uk-button uk-button-primary uk-width-1-1 panel-mobile border-x-none\" type=\"button\" uk-toggle=\"target: #offcanvas-nav-default\">Меню</button>\r\n\t\t<div id=\"offcanvas-nav-default\" uk-offcanvas={`${(infoModal || modalStorage) ? \"overlay: false\" : \"overlay: true\"}`}>\r\n\t\t\t<div className=\"uk-offcanvas-bar uk-flex uk-flex-column\">\r\n\r\n\t\t\t\t<ul className=\"uk-nav uk-nav-default uk-nav-center\">\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<ColorPicker />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<Thickness />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'pencil' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Pen />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'pipette' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Pipette />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'eraser' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<Eraser />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className={`uk-active uk-margin-top uk-margin-bottom ${penType === 'paint-bucket' && 'mobile-active'}`}>\r\n\t\t\t\t\t\t<FloodFill />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<ClearButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<DownloadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<UploadButton />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{/*<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<SaveToStorage />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<Storage />\r\n\t\t\t\t\t</li>*/}\r\n\t\t\t\t\t<li className=\"uk-active uk-margin-top uk-margin-bottom\">\r\n\t\t\t\t\t\t<InfoBoxModal />\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n);\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tinfoModal: state.infoModal.isOpen,\r\n\t\tmodalStorage: state.modalStorage.isOpen,\r\n\t}\r\n}\r\n\r\nPanelMobile.propTypes = {\r\n\tpenType: PropTypes.string.isRequired,\r\n\tinfoModal: PropTypes.bool.isRequired,\r\n\tmodalStorage: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps)(PanelMobile);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { \r\n\tsetContext, \r\n\tchangeIsSelecting, \r\n\tupdateSelectedObject, \r\n\tresetCanvasActions,\r\n\tresetSelectedObject,\r\n\tchangePenType\r\n} from './../store/actions/canvasActions';\r\n\r\nimport {\r\n\tpencil,\r\n\tpipette,\r\n\teraser,\r\n\tpaintBucket,\r\n\tnone\r\n} from './../modules/PenTypeConsts';\r\n\r\nimport { changeColor } from './../store/actions/penActions';\r\n\r\nimport { \r\n\thexToRGB,\r\n\trgbaToHex,\r\n\tfloodFillImageData,\r\n\tchkObjForNonEmptiness,\r\n} from './../modules/Tools';\r\n\r\nimport Vector2 from './../modules/Vector2';\r\n\r\nclass Canvas extends Component {\r\n\tstate = {\r\n\t\tmobile: false,\r\n\t\tisDrawing: false,\r\n\t\tlastX: 0,\r\n\t\tlastY: 0,\r\n\t\tselectStartX: undefined,\r\n\t\tselectStartY: undefined,\r\n\t\tbeforeImageData: undefined,\r\n\t\tselectStart: false\r\n\t};\r\n\r\n\tcanvas = React.createRef();\r\n\r\n\tgetCanvas = () => this.canvas.current;\r\n\tgetCanvasContext = () => this.getCanvas().getContext('2d');\r\n\tgetCursor = () => document.querySelector('.cursor');\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.getCanvas();\r\n\t\tconst ctx = this.getCanvasContext();\r\n\t\tlet { \r\n\t\t\tsetContext,\r\n\t\t\tcolor,\r\n\t\t\tthickness\r\n\t\t} = this.props;\r\n\t\tsetContext(ctx);\r\n\r\n\t\tthis.setState({\r\n\t\t\tbeforeImageData: ctx.getImageData(0, 0, canvas.width, canvas.height),\r\n\t\t\tmobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\r\n\t\t}, () => {\r\n\t\t\tcanvas.width = window.innerWidth;\r\n\t\t\tcanvas.height = !this.state.mobile\r\n\t\t\t? window.innerHeight - document.querySelector('.uk-navbar-container').clientHeight \r\n\t\t\t: window.innerHeight - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\t\r\n\t\t\tctx.strokeStyle = color;\r\n\t\t\tctx.lineJoin = \"round\";\r\n\t\t\tctx.lineCap = \"round\";\r\n\t\t\tctx.lineWidth = thickness;\r\n\t\t\tctx.rect(0, 0, canvas.width, canvas.height);\r\n\t\t\tctx.fillStyle = '#ffffff';\r\n\t\t\tctx.fill();\r\n\t\t});\r\n\t}\r\n\r\n\tcursor = e => {\r\n\t\tconst cursor = this.getCursor();\r\n\r\n\t\tlet { \r\n\t\t\tpenType, \r\n\t\t\tthickness, \r\n\t\t\tcolor \r\n\t\t} = this.props;\r\n\r\n\t\tif (penType !== none) {\r\n\t\t\tcursor.style.display = 'block';\r\n\t\t\tcursor.style.width = `${thickness + 5}px`;\r\n\t\t\tcursor.style.height = `${thickness + 5}px`;\r\n\t\r\n\t\t\tcursor.style.top = `${e.pageY - Number.parseInt(cursor.style.height)/2}px`;\r\n\t\t\tcursor.style.left = `${e.pageX - Number.parseInt(cursor.style.width)/2}px`;\r\n\t\r\n\t\t\tif (penType === pencil) \r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\r\n\t\t\telse if(penType === paintBucket) {\r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\t\t\t\tcursor.style.width = `16px`;\r\n\t\t\t\tcursor.style.height = `16px`;\r\n\r\n\t\t\t} else if (penType === pipette) {\r\n\t\t\t\tcursor.style.backgroundColor  = `${color}`;\r\n\t\t\t\tcursor.style.width = `8px`;\r\n\t\t\t\tcursor.style.height = `8px`;\r\n\r\n\t\t\t} else if (penType === eraser) \r\n\t\t\t\tcursor.style.backgroundColor = '#ffffff';\r\n\r\n\t\t} else \r\n\t\t\tcursor.style.display = 'none';\r\n\t};\r\n\r\n\tpickColor = e => {\r\n\t\tlet { mobile } = this.state;\r\n\t\tlet { changeColor, changePenType, ctx } = this.props;\r\n\r\n\t\tlet x, y;\r\n\t\tif (!mobile)\r\n\t\t\t[x, y] = [e.nativeEvent.offsetX, e.nativeEvent.offsetY];\r\n\t\telse if(mobile) {\r\n\t\t\tx = Math.floor(e.changedTouches[0].clientX);\r\n\t\t\tlet py = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(py >= 0)\r\n\t\t\t\ty = py;\r\n\t\t}\r\n\t\tconst imgData = ctx.getImageData(x, y, 1, 1);\r\n\t\tconst pixel = imgData.data;\r\n\t\tconst color = `rgba(${pixel.join(',')})`;\r\n\t\tchangeColor(rgbaToHex(color));\r\n\t\tchangePenType(pencil);\r\n\t};\r\n\r\n\tfloodFill = e => {\r\n\t\tlet { color, ctx } = this.props;\r\n\t\tlet rgbColor = hexToRGB(color);\r\n\t\tlet imageData = ctx.getImageData(0, 0, this.getCanvas().width, this.getCanvas().height);\r\n\t\tlet startPoint = {};\r\n\r\n\t\tlet { mobile } = this.state;\r\n\r\n\t\tif(!mobile) {\r\n\t\t\tstartPoint = {\r\n\t\t\t\tx: e.nativeEvent.offsetX,\r\n\t\t\t\ty: e.nativeEvent.offsetY\r\n\t\t\t}\r\n\t\t} else if(mobile) {\r\n\t\t\tlet x = Math.floor(e.changedTouches[0].clientX);\r\n\t\t\tlet y = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tstartPoint = {\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst imgData = ctx.getImageData(startPoint.x, startPoint.y, 1, 1)\r\n\t\tconst backgroundColor = {\r\n\t\t\tr: imgData.data[0],\r\n\t\t\tg: imgData.data[1],\r\n\t\t\tb: imgData.data[2]\r\n\t\t}\r\n\t\t\r\n\t\tctx.putImageData(floodFillImageData(imageData, rgbColor, startPoint, backgroundColor), 0, 0);\r\n\t};\r\n\r\n\tdraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\t\r\n\t\tlet {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color \t\r\n\t\t} =  this.props;\r\n\t\tlet { lastX, lastY, isDrawing } = this.state;\r\n\t\tlet { offsetX, offsetY } = e.nativeEvent;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil || penType === pipette)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tctx.moveTo(lastX, lastY);\r\n\t\t\tctx.lineTo(offsetX, offsetY);\r\n\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: offsetX,\r\n\t\t\t\tlastY: offsetY\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\ttouchMoveEventLister = e => {\r\n\t\tlet {\r\n\t\t\tctx, penType, \r\n\t\t\tthickness, color \t\r\n\t\t} =  this.props;\r\n\t\tlet { lastX, lastY, isDrawing } = this.state;\r\n\r\n\t\tctx.lineWidth = thickness;\r\n\t\tif (isDrawing && penType !== paintBucket) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.setLineDash([0]);\r\n\r\n\t\t\tif (penType === pencil || penType === pipette)\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\telse if (penType === eraser)\r\n\t\t\t\tctx.strokeStyle = '#ffffff';\r\n\r\n\t\t\tlet x = e.touches[0].clientX;\r\n\t\t\tlet y = Math.floor(e.touches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tctx.moveTo(lastX, lastY);\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tlastX: x,\r\n\t\t\t\t\tlastY: y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\ttouchStartEventLister = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tlet\tx = e.changedTouches[0].clientX;\r\n\t\tlet\ty = Math.floor(e.changedTouches[0].clientY) - document.querySelector('.panel-mobile').clientHeight;\r\n\r\n\t\tif(penType === pencil || penType === eraser) {\r\n\t\t\tif(y >= 0) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisDrawing: true,\r\n\t\t\t\t\tlastX: x,\r\n\t\t\t\t\tlastY: y,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\ttouchEndEventLister = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tif (penType === pipette) \r\n\t\t\tthis.pickColor(e);\r\n\t\telse if (penType === paintBucket)\r\n\t\t\tthis.floodFill(e);\r\n\t};\r\n\r\n\tonClickHandle = e => {\r\n\t\tlet { penType } = this.props;\r\n\t\tif (penType === pipette) \r\n\t\t\tthis.pickColor(e);\r\n\t\telse if (penType === paintBucket) \r\n\t\t\tthis.floodFill(e);\r\n\t};\r\n\r\n\tselectingDraw = e => {\r\n\t\tthis.cursor(e);\r\n\t\t\r\n\t\tlet  { ctx } =  this.props;\r\n\t\tlet { \r\n\t\t\tlastX, lastY, \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\r\n\t\tctx.lineWidth = 1;\r\n\t\tif (selectStart) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tlastX: e.nativeEvent.offsetX,\r\n\t\t\t\tlastY: e.nativeEvent.offsetY\r\n\t\t\t}, () => {\r\n\t\t\t\tlet width = lastX - selectStartX;\r\n\t\t\t\tlet height = lastY - selectStartY;\r\n\t\t\t\tctx.setLineDash([4, 4]);\r\n\r\n\t\t\t\tctx.lineDashOffset = 0;\r\n\t\t\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\t\t\t});\r\n\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMoveEvent = e => {\r\n\t\tlet canvas = this.getCanvas();\r\n\r\n\t\tif (this.props.isSelecting) {\r\n\t\t\tthis.selectingDraw(e);\r\n\t\t\tcanvas.style.cursor = 'crosshair';\r\n\t\t} else if (this.state.isDrawing) {\r\n\t\t\tthis.draw(e);\r\n\t\t\tcanvas.style.cursor = 'none';\r\n\t\t} else\r\n\t\t\tthis.cursor(e);\r\n\t}\r\n\r\n\tonMouseDownEvent = e => {\r\n\t\tlet  { ctx, isSelecting, selectedObject } =  this.props;\r\n\t\tlet {  \r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tselectStart, beforeImageData\r\n\t\t} = this.state;\r\n\t\tlet { offsetX, offsetY } = e.nativeEvent;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tif (chkObjForNonEmptiness(selectedObject)) \r\n\t\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\r\n\t\t\tlet canvas = this.getCanvas();\r\n\t\t\tlet imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: selectStartX === undefined ? offsetX : selectStartX,\r\n\t\t\t\tselectStartY: selectStartY === undefined ? offsetY : selectStartY,\r\n\t\t\t\tbeforeImageData: !selectStart ? imageData : beforeImageData,\r\n\t\t\t\tselectStart: true\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: isSelecting ? false : true,\r\n\t\t\t\tlastX: offsetX,\r\n\t\t\t\tlastY: offsetY,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseUpEvent = e => {\r\n\t\tlet {\r\n\t\t\tselectStartX, selectStartY,\r\n\t\t\tlastX, lastY,\r\n\t\t\tbeforeImageData\r\n\t\t} = this.state;\r\n\t\tlet {\r\n\t\t\tctx, updateSelectedObject,\r\n\t\t\tisSelecting\r\n\t\t} =  this.props;\r\n\r\n\t\tif (isSelecting) {\r\n\t\t\tlet width = lastX - selectStartX;\r\n\t\t\tlet height = lastY - selectStartY;\r\n\t\t\tlet selectObject = {\r\n\t\t\t\tstartVector: new Vector2(selectStartX, selectStartY),\r\n\t\t\t\tendVector: new Vector2(lastX, lastY)\r\n\t\t\t}\r\n\r\n\t\t\tupdateSelectedObject(selectObject);\r\n\t\t\tctx.setLineDash([4, 4]);\r\n\t\t\tctx.putImageData(beforeImageData, 0, 0);\r\n\t\t\tctx.strokeRect(selectStartX, selectStartY, width, height);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectStartX: undefined,\r\n\t\t\t\tselectStartY: undefined,\r\n\t\t\t\tselectStart: false,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisDrawing: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseOutEvent = e => {\r\n\t\tthis.setState({\r\n\t\t\tisDrawing: false\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.resetCanvas) {\r\n\t\t\tthis.props.ctx.putImageData(this.state.beforeImageData, 0, 0);\r\n\t\t\tthis.props.resetCanvasActions(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"draw-container\">\r\n\t\t\t\t<div className=\"cursor\"></div>\r\n\t\t\t\t{ !this.state.mobile ? (\r\n\t\t\t\t\t<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref={this.canvas} \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonMouseMove={this.onMouseMoveEvent.bind(this)}\r\n\t\t\t\t\tonMouseDown={this.onMouseDownEvent.bind(this)}\r\n\t\t\t\t\tonMouseUp={this.onMouseUpEvent.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonClick={this.onClickHandle.bind(this)}\r\n\r\n\t\t\t\t></canvas>) \r\n\t\t\t\t: (<canvas\r\n\t\t\t\t\tid=\"draw\"\r\n\t\t\t\t\tref={this.canvas} \r\n\t\t\t\t\tclassName=\"uk-width-1-1\"\r\n\r\n\t\t\t\t\tonTouchMove={this.touchMoveEventLister.bind(this)}\r\n\t\t\t\t\tonTouchStart={this.touchStartEventLister.bind(this)}\r\n\t\t\t\t\tonMouseOut={this.onMouseOutEvent.bind(this)}\r\n\t\t\t\t\tonTouchEnd={this.touchEndEventLister.bind(this)}\r\n\t\t\t\t\tonTouchCancel={this.onMouseOutEvent.bind(this)}\r\n\r\n\t\t\t\t></canvas>)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcolor: state.penProperty.color,\r\n\t\tthickness: state.penProperty.thickness,\r\n\t\tctx: state.canvasState.ctx,\r\n\t\tpenType: state.canvasState.penType,\r\n\t\tisSelecting: state.canvasState.isSelecting,\r\n\t\tresetCanvas: state.canvasState.resetCanvas,\r\n\t\tselectedObject: state.canvasState.selectedObject\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tsetContext: setContext,\r\n\t\tchangeIsSelecting: changeIsSelecting,\r\n\t\tupdateSelectedObject: updateSelectedObject,\r\n\t\tresetCanvasActions: resetCanvasActions,\r\n\t\tresetSelectedObject: resetSelectedObject,\r\n\t\tchangePenType: changePenType,\r\n\t\tchangeColor: changeColor\r\n\t}, dispatch);\r\n}\r\n\r\nCanvas.propTypes = {\r\n\tcolor: PropTypes.string.isRequired,\r\n\tthickness: PropTypes.number.isRequired,\r\n\tsetContext: PropTypes.func.isRequired,\r\n\tctx: PropTypes.object.isRequired,\r\n\tchangeColor: PropTypes.func.isRequired,\r\n\tisSelecting: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React, { Component } from 'react';\r\nimport './../css/App.css';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { bindActionCreators } from 'redux';\r\nimport docCookies from 'doc-cookies';\r\n\r\nimport Panel from './Panel';\r\nimport PanelMobile from './PanelMobile';\r\nimport Canvas from './Canvas';\r\n\r\nimport { enableInfoModal }  from './../store/actions/infoModalActions';\r\n\r\nclass App extends Component {\r\n\tonUnload = e => {\r\n\t\tlet  { ctx } = this.props;\r\n\t\tlet autosave = docCookies.getItem(\"autosaveEnable\");\r\n\t\tautosave = JSON.parse(autosave);\r\n\t\tif (autosave) {\r\n\t\t\tlet saveImg = ctx.canvas.toDataURL('image/png');\r\n\t\t\tlet name = `Name: Несохраненный  рисунок`;\r\n\t\t\tlet date = `Date: ${Date.now()}`;\r\n\t\t\tlet imgSize = `Size: ${ctx.canvas.width} x ${ctx.canvas.height}`;\r\n\t\t\tlet key = name + date + imgSize;\r\n\t\t\tlocalStorage.setItem(`${key}`, saveImg);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\ttry {\r\n\t\t\tlet exist = docCookies.hasItem(\"firstLogin\");\r\n\t\t\tif (exist)\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"false\")\r\n\t\t\telse {\r\n\t\t\t\tdocCookies.setItem(\"firstLogin\", \"true\");\r\n\t\t\t\tdocCookies.setItem(\"autosaveEnable\", \"false\");\r\n\t\t\t\tthis.props.enableInfoModal();\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(\"Failed with error: \");\r\n\t\t\tconsole.log(e);\r\n\t\t\t\r\n\t\t} finally {\r\n\t\t\twindow.addEventListener('beforeunload', this.onUnload);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUmmount() {\r\n\t\twindow.removeEventListener(\"beforeunload\", this.onUnload)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\t\tconst app = !mobile ? \r\n\t\t(\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Panel />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<PanelMobile />\r\n\t\t\t\t<Canvas /> \r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{app}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tisOpen: state.infoModal.isOpen,\r\n\t\tctx: state.canvasState.ctx,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn bindActionCreators({\r\n\t\tenableInfoModal: enableInfoModal\r\n\t}, dispatch);\r\n}\r\n\r\nApp.propTypes = {\r\n\tisOpen: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const penProperty = {\r\n\tcolor: '#000000',\r\n\tthickness: 1,\r\n}\r\n\r\nexport default penProperty;","const canvasState = {\r\n\tctx: {},\r\n\tpenType: 'pencil',\r\n\tisSelecting: false,\r\n\tresetCanvas: false,\r\n\tselectedObject: {}\r\n}\r\n\r\nexport default canvasState;\r\n\r\n/*\r\n\tpenType:\r\n\t\tpencil\r\n\t\tpipette\r\n\t\teraser\r\n\t\tpaint-bucket\r\n*/","const storageModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default storageModal;\r\n","const infoModal = {\r\n\tisOpen: false,\r\n\treRender: 0\r\n}\r\n\r\nexport default infoModal;\r\n","import { combineReducers } from 'redux';\r\nimport penProperty from './store/reducers/penProperty.js';\r\nimport canvasStateReducer from './store/reducers/canvasStateReducer';\r\nimport modalStorageReducer from './store/reducers/modalStorageReducer';\r\nimport infoModalReducer from './store/reducers/infoModalReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n\t\"penProperty\": penProperty,\r\n\t\"canvasState\": canvasStateReducer,\r\n\t\"modalStorage\": modalStorageReducer,\r\n\t\"infoModal\": infoModalReducer\r\n});\r\n\r\nexport default rootReducer;","import penProperty from './../data/penProperty';\r\n\r\nexport default (state = penProperty, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'CHANGE_COLOR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcolor: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_THICKNESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tthickness: Number(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import canvasState from './../data/canvasState';\r\n\r\nexport default (state = canvasState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'SET_CONTEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tctx: action.payload\r\n\t\t\t}\r\n\t\tcase 'CHANGE_PEN_TYPE': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: state.isSelecting && true,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\tselectedObject: {},\r\n\t\t\t\tpenType: action.payload,\r\n\t\t\t}\r\n\t\tcase 'CHANGE_IS_SELECTING': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpenType: action.payload ? 'none' : 'pencil',\r\n\t\t\t\tisSelecting: action.payload\r\n\t\t\t}\r\n\t\tcase 'RESET_CANVAS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tresetCanvas: action.payload,\r\n\t\t\t\tpenType: 'pencil',\r\n\t\t\t\tisSelecting: false\r\n\t\t\t}\r\n\t\tcase 'RESET_SELECT_OBJECT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: {}\r\n\t\t\t}\r\n\t\tcase 'UPDATE_SELECTED_OBJECT': \r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedObject: Object.assign(action.payload)\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import storageModal from './../data/storageModal';\r\n\r\nexport default (state = storageModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tcase 'RE_RENDER_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\treRender: Math.random()\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import infoModal from './../data/infoModal';\r\n\r\nexport default (state = infoModal, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase 'ENABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: true\r\n\t\t\t}\r\n\t\tcase 'DISABLE_INFO_MODAL':\r\n\t\t\treturn {\r\n\t\t\t\tisOpen: false\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport { createStore, compose } from 'redux';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport App from './components/App';\r\nimport './css/index.css';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport rootReducer from './rootReducer';\r\n\r\nconst store = createStore(\r\n\trootReducer,\r\n\tcompose(\r\n\t\tdevToolsEnhancer()\r\n\t)\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<App />\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}