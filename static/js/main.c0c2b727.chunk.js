(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(31)},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),i=n(17),l=n(6),s=n(7),u=n(19),p=n(1),m=n(2),f=n(4),k=n(3),h=n(5),d=(n(29),function(e){return{type:"CHANGE_COLOR",payload:e}}),b=function(e){return{type:"CHANGE_THICKNESS",payload:e}},g=function(e){return{type:"CHANGE_PIPETTE_COLOR",payload:e}},v=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return n.props.changeThickness(e.target.value)},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",null,"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0448\u0440\u0438\u0444\u0442\u0430:",r.a.createElement("select",{className:"uk-select",onChange:this.handleChange.bind(this)},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"16"},"16"),r.a.createElement("option",{value:"32"},"32"),r.a.createElement("option",{value:"64"},"64"))))}}]),t}(a.Component),E=Object(s.b)(function(e){return{thickness:e.penProperty.thickness}},function(e){return Object(l.bindActionCreators)({changeThickness:b},e)})(v),y=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return n.props.changeColor(e.target.value)},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-flex uk-flex-column"},r.a.createElement("label",{htmlFor:"colorPicker"},"\u0426\u0432\u0435\u0442:"),r.a.createElement("input",{type:"color",id:"colorPicker",onChange:this.handleChange.bind(this)}))}}]),t}(a.Component),O=Object(s.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(l.bindActionCreators)({changeColor:d},e)})(y),j=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.props.ctx.clearRect(0,0,window.innerWidth,window.innerHeight)},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{id:"clearButton",className:"uk-icon-link uk-icon-button","uk-icon":"trash",onClick:this.handleClick.bind(this)}))}}]),t}(a.Component),C=Object(s.b)(function(e){return{clear:e.canvasState.clear,ctx:e.canvasState.ctx}})(j),w=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).saveCanvasAsImg=function(e){n.props.ctx.save();var t=n.refs.link;t.href=document.querySelector("#draw").toDataURL("image/png"),t.download="canvasImage.png",t.click(),n.props.ctx.restore()},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("a",{ref:"link",id:"saveButton",className:"uk-icon-link uk-icon-button","uk-icon":"download",onClick:this.saveCanvasAsImg.bind(this)}))}}]),t}(a.Component),x=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}})(w),N=function(e){return{type:"SET_CONTEXT",payload:e}},T=function(e){return{type:"CHANGE_PEN_TYPE",payload:e}},P=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-margin-small-right uk-icon uk-icon-button uk-icon-image pipette",onClick:function(){return e.props.changePenType("pipette")}}))}}]),t}(a.Component),A=Object(s.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(l.bindActionCreators)({changePenType:T},e)})(P),S=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-margin-small-right uk-icon uk-icon-button","uk-icon":"pencil",onClick:function(){return e.props.changePenType("pencil")}}))}}]),t}(a.Component),I=Object(s.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(l.bindActionCreators)({changePenType:T},e)})(S),X=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-margin-small-right uk-icon uk-icon-button uk-icon-image eraser",onClick:function(){return e.props.changePenType("eraser")}}))}}]),t}(a.Component),Y=Object(s.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(l.bindActionCreators)({changePenType:T},e)})(X),H=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).uploadImgAsCanvas=function(e){if(window.confirm("\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u043e\u0442\u043e \u0445\u043e\u043b\u0441\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0447\u0438\u0449\u0435\u043d, \u0432\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")){alert("\u0414\u0430 \u0441\u0432\u0435\u0440\u0448\u0438\u0442\u0441\u044f \u043f\u0440\u0435\u0434\u043d\u0430\u0447\u0435\u0440\u0442\u0430\u043d\u043d\u043e\u0435"),n.props.ctx.clearRect(0,0,window.innerWidth,window.innerHeight);var t=e.target.files[0],a=new FileReader,r=new Image;a.onload=function(e){r.src=e.target.result,n.props.ctx.drawImage(r,0,0)},a.readAsDataURL(t)}},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("label",{htmlFor:"uploadButton",className:"uk-icon-link uk-icon-button","uk-icon":"upload"}),r.a.createElement("input",{type:"file",ref:"link",id:"uploadButton",className:"uk-hidden",onChange:this.uploadImgAsCanvas.bind(this)}))}}]),t}(a.Component),_=Object(s.b)(function(e){return{ctx:e.canvasState.ctx}})(H),D=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"uk-margin-small-top"},r.a.createElement("span",{className:"uk-margin-small-right uk-icon uk-icon-button","uk-icon":"paint-bucket",onClick:function(){return e.props.changePenType("paint-bucket")}}))}}]),t}(a.Component),R=Object(s.b)(function(e){return{color:e.penProperty.color}},function(e){return Object(l.bindActionCreators)({changePenType:T},e)})(D),G=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"uk-navbar-container uk-flex uk-flex-center","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement("ul",{className:"uk-navbar-nav uk-flex uk-flex-row uk-flex-middle"},r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right uk-flex uk-flex-middle"},r.a.createElement(O,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(E,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(I,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(A,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(Y,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(R,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(C,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(x,null)),r.a.createElement("li",{className:"uk-active uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right"},r.a.createElement(_,null))))))}}]),t}(a.Component),W=function(e){return{r:Number.parseInt(e.slice(1,3),16),g:Number.parseInt(e.slice(3,5),16),b:Number.parseInt(e.slice(5,7),16)}},L=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={isDrawing:!1,lastX:0,lastY:0,color:null},n.getCanvas=function(){return n.refs.canvas},n.getCanvasContext=function(){return n.getCanvas().getContext("2d")},n.getCursor=function(){return document.querySelector(".cursor")},n.cursor=function(e){var t=n.getCursor();t.style.width="".concat(n.props.thickness+5,"px"),t.style.height="".concat(n.props.thickness+5,"px"),t.style.top="".concat(e.pageY-Number.parseInt(t.style.height)/2,"px"),t.style.left="".concat(e.pageX-Number.parseInt(t.style.width)/2,"px"),"pencil"===n.props.penType?t.style.backgroundColor="".concat(n.props.color):"pipette"===n.props.penType?t.style.backgroundColor="".concat(n.props.pipetteColor):"eraser"===n.props.penType&&(t.style.backgroundColor="#ffffff")},n.draw=function(e){n.cursor(e),n.props.ctx.lineWidth=n.props.thickness,n.state.isDrawing&&("pencil"===n.props.penType?(n.props.ctx.beginPath(),n.props.ctx.strokeStyle=n.props.color,n.props.ctx.moveTo(n.state.lastX,n.state.lastY),n.props.ctx.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),n.props.ctx.stroke(),n.setState({lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY})):"pipette"===n.props.penType?(n.props.ctx.beginPath(),n.props.ctx.strokeStyle=n.props.pipetteColor,n.props.ctx.moveTo(n.state.lastX,n.state.lastY),n.props.ctx.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),n.props.ctx.stroke(),n.setState({lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY})):"eraser"===n.props.penType&&(n.props.ctx.beginPath(),n.props.ctx.strokeStyle="#ffffff",n.props.ctx.moveTo(n.state.lastX,n.state.lastY),n.props.ctx.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),n.props.ctx.stroke(),n.setState({lastX:e.nativeEvent.offsetX,lastY:e.nativeEvent.offsetY})))},n.pickColor=function(e){var t=[e.nativeEvent.offsetX,e.nativeEvent.offsetY],a=t[0],r=t[1],o=n.props.ctx.getImageData(a,r,1,1).data;console.log("rgba(".concat(o.join(","),")")),n.props.changePipetteColor("rgba(".concat(o.join(","),")"))},n.floodFill=function(e){var t,a=W(n.props.color),r=n.props.ctx.getImageData(0,0,n.getCanvas().width,n.getCanvas().height),o=[r.width,r.height],c=o[0],i=o[1],l=[e.nativeEvent.offsetX,e.nativeEvent.offsetY],s=l[0],u=l[1],p=[[s,u]],m=0,f=0,k=0,h=n.props.ctx.getImageData(s,u,1,1),d={r:h.data[0],g:h.data[1],b:h.data[2]};for(console.log(d);p.length>0;)if(!((t=p.pop())[0]<0||t[0]>=c)&&!(t[1]<0||t[1]>=i)){k=(f=(m=4*t[1]*c+4*t[0])+1)+1;var b={r:r.data[m],g:r.data[f],b:r.data[k]};b.r===a.r&&b.g===a.g&&b.b===a.b||b.r!==d.r||b.g!==d.g||b.b!==d.b||(r.data[m]=a.r,r.data[f]=a.g,r.data[k]=a.b,p.push([t[0]-1,t[1]]),p.push([t[0]+1,t[1]]),p.push([t[0],t[1]-1]),p.push([t[0],t[1]+1]))}n.props.ctx.putImageData(r,0,0)},n.onClickHandle=function(e){"pipette"===n.props.penType?n.pickColor(e):"paint-bucket"===n.props.penType&&n.floodFill(e)},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.getCanvas(),t=this.getCanvasContext();this.props.setContext(t),e.width=window.innerWidth,e.height=window.innerHeight-document.querySelector(".uk-navbar-container").clientHeight,t.strokeStyle=this.props.color,t.lineJoin="round",t.lineCap="round",t.lineWidth=this.props.thickness,t.miterLimit=1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"cursor"}),r.a.createElement("canvas",{id:"draw",ref:"canvas",className:"uk-width-1-1",onMouseMove:this.draw.bind(this),onMouseDown:function(t){e.setState({isDrawing:!0,lastX:t.nativeEvent.offsetX,lastY:t.nativeEvent.offsetY})},onMouseUp:function(t){e.setState({isDrawing:!1})},onMouseOut:function(t){e.setState({isDrawing:!1})},onClick:this.onClickHandle.bind(this)}))}}]),t}(a.Component),M=Object(s.b)(function(e){return{color:e.penProperty.color,thickness:e.penProperty.thickness,ctx:e.canvasState.ctx,pipetteColor:e.penProperty.pipetteColor,penType:e.canvasState.penType}},function(e){return Object(l.bindActionCreators)({setContext:N,changeColor:d,changePipetteColor:g},e)})(L),B=function(){return r.a.createElement("div",{className:"uk-container uk-margin-small-top"},r.a.createElement("div",{className:"uk-card uk-card-default uk-width-1-2@m"},r.a.createElement("div",{className:"uk-card-header"},r.a.createElement("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"true"},r.a.createElement("div",{className:"uk-width-expand uk-flex uk-flex-center"},r.a.createElement("h3",{className:"uk-card-title uk-margin-remove-bottom"},"\u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f")))),r.a.createElement("div",{className:"uk-card-body uk-flex uk-flex-center"},r.a.createElement("button",{className:"uk-button uk-button-danger uk-button-small"},"\u041a\u0438\u043d\u0443\u0442\u044c \u0432 faramo_zayw \u0442\u0430\u043f\u043e\u043a"))))},F=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=window.innerWidth<768?r.a.createElement(B,null):r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement(M,null));return r.a.createElement("div",null,e)}}]),t}(a.Component);n(30),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(8),J={color:"#000000",thickness:1,pipetteColor:"#000000"},U={ctx:{},penType:"pencil"},K=Object(l.combineReducers)({penProperty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COLOR":return Object(q.a)({},e,{color:t.payload});case"CHANGE_THICKNESS":return Object(q.a)({},e,{thickness:Number(t.payload)});case"CHANGE_PIPETTE_COLOR":return Object(q.a)({},e,{pipetteColor:t.payload});default:return e}},canvasState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTEXT":return Object(q.a)({},e,{ctx:t.payload});case"CHANGE_PEN_TYPE":return Object(q.a)({},e,{penType:t.payload});default:return e}}}),z=Object(l.createStore)(K,Object(l.compose)(Object(l.applyMiddleware)(u.a),Object(i.devToolsEnhancer)()));c.a.render(r.a.createElement(s.a,{store:z},r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.c0c2b727.chunk.js.map